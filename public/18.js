webpackJsonp([18],{"+O4B":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5 attendance-head"},[a("div",{staticClass:"mb-5 row align-items-center"},[a("div",{staticClass:"col-12 title-con"},[a("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),t.to?a("div",{staticClass:"row justify-content-end"},[a("router-link",{staticClass:"text-link mt-3",attrs:{to:t.to}},[t._v(t._s(t.buttonTitle))])],1):t._e()])])])},staticRenderFns:[]}},EJ7O:function(t,e,a){var r=a("VU/8")(a("oKx2"),a("+O4B"),!1,null,null,null);t.exports=r.exports},TuDH:function(t,e,a){var r=a("VU/8")(a("YWwI"),a("d6qT"),!1,null,null,null);t.exports=r.exports},YWwI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(a("I3G/")),o=a("ic49"),s=l(a("K23+")),n=a("p/p5"),i=l(a("EJ7O"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={components:{CustomHeader:i.default},data:function(){return{form:{},mode:null,error:{},show:!1,store:"/api/category",method:"POST",status:{available:1,unavailable:0}}},beforeRouteEnter:function(t,e,a){(0,n.get)(function(t){return{create:"/api/category/create",edit:"/api/category/"+t.params.id+"/edit"}[t.meta.mode]}(t)).then(function(t){var e=t.data;return a(function(t){return t.prepareForm(e)})}).catch(function(){return a(function(){return s.default.setError("Error Preparing form")})})},methods:{prepareForm:function(t){var e=t.form;r.default.set(this.$data,"mode",this.$route.meta.mode),r.default.set(this.$data,"form",e),"edit"===this.mode&&(this.store="/api/category/"+this.$route.params.id,this.method="PUT"),this.show=!0},onSave:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.$network()?(t.$LIPS(!0),(0,n.byMethod)(t.method,t.store,t.form).then(function(e){var a=e.data;(a.saved||a.updated)&&((0,o.log)(a.log,a.staff_id),r.default.set(t.$data,"form",a.form),s.default.setSuccess(a.message,5e3),a.updated&&t.$router.push("/log/categories")),t.error={}}).catch(function(e){var a=e.response,r=a.data;422===a.status&&(t.error=r.errors?r.errors:r,t.$networkErr("unique"))}).finally(function(){t.$scrollToTop(),t.$LIPS(!1)})):t.$networkErr():t.$networkErr("form")})}}}},d6qT:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"pt-md-3 pt-2 attendance-view",attrs:{id:"index"}},[a("custom-header",{attrs:{to:"/log/categories",title:t.mode+" Category","button-title":"view categories!"}}),t._v(" "),a("div",{staticClass:"attendance-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.onSave(e)}}},[a("div",{staticClass:"my-4 clearfix p-5 row bg-white shadow-sm card-radius"},[a("div",{staticClass:"form-group col-12 float-left px-0 px-md-3"},[a("label",[t._v("Category name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"},{name:"validate",rawName:"v-validate",value:"required|max:50|alpha_spaces",expression:"'required|max:50|alpha_spaces'"}],staticClass:"form-control mb-2",attrs:{placeholder:"category name",name:"category name",type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),t.errors.first("category name")?a("small",[t._v(t._s(t.errors.first("category name")))]):t._e(),t._v(" "),t.error.name?a("small",[t._v(t._s(t.error.name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"form-group col-12 px-0 px-md-3"},[a("label",[t._v("Status")]),t._v(" "),a("br"),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.is_available,expression:"form.is_available"}],staticClass:"custom-select w-25",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"is_available",e.target.multiple?a:a[0])}}},t._l(t.status,function(e,r){return a("option",{domProps:{value:e}},[t._v("\n                                "+t._s(r)+"\n                            ")])})),t._v(" "),t.errors.first("Available")?a("small",[t._v(t._s(t.errors.first("Available")))]):t._e(),t._v(" "),t.error.name?a("small",[t._v(t._s(t.error.name[0]))]):t._e()])]),t._v(" "),a("div",{staticClass:"mb-5 px-0 row align-items-center"},[a("div",{staticClass:"clearfix d-flex justify-content-end w-100"},["edit"===t.mode?a("router-link",{staticClass:"mx-5 text-link mt-4 pt-2",attrs:{to:"/log/categories"}},[t._v("\n                            Cancel\n                        ")]):t._e(),t._v(" "),a("button",{staticClass:"btn bg-default",attrs:{disabled:t.$isProcessing,type:"submit"}},[t._v("\n                            "+t._s(t._f("capitalize")(t.mode))+" Category "),a("i",{staticClass:"far fa-paper-plane ml-1"})])],1)])])])],1)])},staticRenderFns:[]}},ic49:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=function(t,e){t=t.replace(/([A-Z])/g," $1").replace(/^./,function(t){return t.toUpperCase()}),(0,r.post)("/api/log",{action:t,description:e})};var r=a("p/p5")},oKx2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:"",buttonTitle:null,to:null}}}});