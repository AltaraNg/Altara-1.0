webpackJsonp([2,6],{"+O4B":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-5 attendance-head"},[r("div",{staticClass:"mb-5 row align-items-center"},[r("div",{staticClass:"col-12 title-con"},[r("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),t.to?r("div",{staticClass:"row justify-content-end"},[r("router-link",{staticClass:"text-link mt-3",attrs:{to:t.to}},[t._v(t._s(t.buttonTitle))])],1):t._e()])])])},staticRenderFns:[]}},"1PU9":function(t,e,r){var a=r("VU/8")(r("tIeX"),r("qQoq"),!1,function(t){r("lEcZ")},"data-v-1a49c150",null);t.exports=a.exports},"7elN":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("p/p5"),s=o(r("K23+")),n=r("rN6N"),i=o(r("PASs"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={components:{CustomSMSButton:i.default},props:{mode:null,index:null,startIndex:{default:1},order:{default:null,type:n.Order}},created:function(){this.order.setReminder(this.mode)},methods:{logReminder:function(){var t=this;this.$LIPS(!0),delete this.order.reminder.order,delete this.order.reminder.canBeSelected,(0,a.post)("/api/reminder",{reminders:[this.order.reminder]}).then(function(e){return e.data.saved&&t.logPromiseCall()}).catch(function(){return t.$displayErrorMessage("Error Logging reminders!")})},logPromiseCall:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Reminder Logged!";this.order.promiseCall.date?(0,a.post)("/api/promise_call",this.order.promiseCall).then(function(r){return r.data.saved&&t.done(e+" Promise call added!")}).catch(function(){return t.$displayErrorMessage("Error Logging promise call!")}):this.done(e)},done:function(t){this.$scrollToTop(),s.default.setSuccess(t,5e3),this.$emit("done")},toggleSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.order.reminder.canBeSelected&&(this.order.isSelected=null!==t?t:!this.order.isSelected)}}}},EJ7O:function(t,e,r){var a=r("VU/8")(r("oKx2"),r("+O4B"),!1,null,null,null);t.exports=a.exports},LgGm:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"CustomSMSButton d-flex align-items-center justify-content-center",on:{click:function(e){t.toggleModal("SMSModal")}}},[r("i",{staticClass:"fas fa-envelope"})])},staticRenderFns:[]}},PASs:function(t,e,r){var a=r("VU/8")(r("UoNi"),r("LgGm"),!1,null,null,null);t.exports=a.exports},"PdN/":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.show?r("div",{staticClass:"tab-content mt-1 attendance-body"},[r("div",{staticClass:"tab-pane active text-center",attrs:{id:"reminder-panel",role:"tabpanel"}},t._l(t.orders,function(e,a){return r("order-item",{key:e.order.id,attrs:{index:a,"start-index":t.startIndex,order:e,mode:t.mode},on:{done:function(e){t.fetchList(t.list)},display:t.displayDetails}})})),t._v(" "),"normal-list"!=t.mode?r("div",{staticClass:"w-100 my-5 mx-0 hr"}):t._e()]):r("div",{staticClass:"tab-content mt-1 attendance-body"},[t._m(0)]),t._v(" "),t.show&&"sms"===t.mode?r("div",{staticClass:"mt-1 attendance-body"},[r("div",{staticClass:"mb-5 px-0 row align-items-center"},[r("div",{staticClass:"clearfix d-flex justify-content-end w-100"},[r("button",{staticClass:"btn bg-default",attrs:{disabled:t.$isProcessing},on:{click:t.processSelected}},[t._v("\n                    Send Reminder(s) "),r("i",{staticClass:"far fa-paper-plane ml-1"})])])])]):t._e(),t._v(" "),r("div",{staticClass:"modal fade",attrs:{id:"purchase_order"}},[r("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),t.showModalContent?r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"table table-bordered table-striped"},[r("tbody",[r("tr",[r("th",[t._v("Order ID")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.id))])]),t._v(" "),r("tr",[r("th",[t._v("Order date")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.order_date))])]),t._v(" "),r("tr",[r("th",[t._v("Product")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.store_product.product_name))])]),t._v(" "),r("tr",[r("th",[t._v("Repayment")]),t._v(" "),r("td",[t._v(t._s(t.$formatCurrency(t.activeOrder.amountsToBePaid[0])))])]),t._v(" "),r("tr",[r("th",[t._v("Down Payment")]),t._v(" "),r("td",[t._v(t._s(t.$formatCurrency(t.activeOrder.order.down_payment)))])]),t._v(" "),r("tr",[r("th",[t._v("Discount (%)")]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(t.activeOrder.discount)))])]),t._v(" "),r("tr",[r("th",[t._v("Sale Type")]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(t.activeOrder.order.sales_type.name)))])]),t._v(" "),r("tr",[r("th",[t._v("Total amount to Pay")]),t._v(" "),r("td",[t._v(t._s(t.$formatCurrency(t.activeOrder.order.product_price)))])]),t._v(" "),r("tr",[r("th",[t._v("Processed by")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.floor_agent?t.activeOrder.order.floor_agent.full_name:null)+"\n                                ")])])])])])]):t._e(),t._v(" "),t._m(2)])])]),t._v(" "),r("div",{staticClass:"modal fade",attrs:{id:"customer_info"}},[r("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),t.showModalContent?r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"table table-bordered table-striped"},[r("tbody",[r("tr",[r("th",[t._v("Customer ID")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.id))])]),t._v(" "),r("tr",[r("th",[t._v("Full Name")]),t._v(" "),r("td",[t._v(t._s(t.$getCustomerFullName(t.activeOrder.customer)))])]),t._v(" "),r("tr",[r("th",[t._v("Address")]),t._v(" "),r("td",[t._v(t._s(t.$getCustomerAddress(t.activeOrder.customer)))])]),t._v(" "),r("tr",[r("th",[t._v("Phone")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.telephone))])]),t._v(" "),r("tr",[r("th",[t._v("Branch")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.branch.name))])]),t._v(" "),r("tr",[r("th",[t._v("Category")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.employment_status))])]),t._v(" "),r("tr",[r("th",[t._v("Work guarantor name")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customerWGName)+"\n                                ")])]),t._v(" "),r("tr",[r("th",[t._v("Work guarantor phone")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.work_guarantor_telno))])]),t._v(" "),r("tr",[r("th",[t._v("Personal guarantor name")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customerPGName)+"\n                                ")])]),t._v(" "),r("tr",[r("th",[t._v("Personal guarantor phone")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.personal_guarantor_telno))])]),t._v(" "),r("tr",[r("th",[t._v("Verified by")]),t._v(" "),r("td",[r("router-link",{staticClass:"text-link",attrs:{target:"_blank",to:"/dva/verification?id="+t.activeOrder.customer.id}},[t._v("\n                                        click here to see verifications status\n                                    ")])],1)])])])])]):t._e(),t._v(" "),t._m(4)])])]),t._v(" "),r("div",{staticClass:"modal fade repayment",attrs:{id:"repayment"}},[r("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[t.showModalContent?r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header py-2"},[r("h6",{staticClass:"modal-title py-1"},[t._v("\n                        Repayment Plan/Summary - "+t._s(t._f("capitalize")(t.activeOrder.customer.employment_status))+"\n                    ")]),t._v(" "),t._m(5)]),t._v(" "),r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[r("h5",{staticClass:"mt-3 mb-0"},[t._v("Order Information")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",[t._m(6),t._v(" "),r("tr",[r("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.activeOrder.customerName)+"\n                                ")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.order.id))]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.order.store_product.product_name))]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.branch.name))]),t._v(" "),r("td",{staticClass:"font-weight-bold",class:t.orderStatusClass(t.activeOrder)},[t._v("\n                                    "+t._s(t.orderStatus(t.activeOrder))+"\n                                ")])])])]),t._v(" "),r("h5",{staticClass:"mt-5 mb-0"},[t._v("Amortization Schedule")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",[r("th",[t._v("Repayment")]),t._v(" "),t._l(t.activeOrder.repaymentCaptions,function(e){return r("td",{domProps:{innerHTML:t._s(e)}})})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Due Date")]),t._v(" "),t._l(t.activeOrder.dueDates,function(e){return r("td",[t._v(t._s(e))])})],2),t._v(" "),r("tr",[r("th",[t._v("Actual Pay Day")]),t._v(" "),t._l(t.activeOrder.actualPayDates,function(e){return r("td",[t._v(t._s(e))])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Status")]),t._v(" "),t._l(t.activeOrder.paymentStatusClasses,function(t){return r("td",{class:t.class},[r("i",{staticClass:"fas",class:t.icon})])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Repayment Amount")]),t._v(" "),t._l(t.activeOrder.amountsToBePaid,function(e){return r("td",[t._v(t._s(t.$formatCurrency(e)))])})],2),t._v(" "),r("tr",[r("th",[t._v("Actual Amount Paid")]),t._v(" "),t._l(t.activeOrder.actualAmountsPaid,function(e){return r("td",[t._v(t._s(t.$formatCurrency(e))+"\n                                ")])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Payment Method")]),t._v(" "),t._l(t.activeOrder.paymentMethods,function(e){return r("td",{staticClass:"text-capitalize"},[t._v("\n                                    "+t._s(t.Order.convertToName(e,"paymentMethods"))+"\n                                ")])})],2),t._v(" "),r("tr",[r("th",[t._v("Bank")]),t._v(" "),t._l(t.activeOrder.paymentBanks,function(e){return r("td",{staticClass:"text-capitalize"},[t._v("\n                                    "+t._s(t.Order.convertToName(e,"banks"))+"\n                                ")])})],2)])]),t._v(" "),r("h5",{staticClass:"mt-5 mb-0"},[t._v("Payment Summary")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",{staticClass:"table-separator"},[r("td",{staticClass:"text-left"},[t._v("Discount Detail (%)")]),t._v(" "),r("th",[t._v(t._s(t._f("capitalize")(t.activeOrder.discount)))]),t._v(" "),r("td",[t._v("Total Before Discount")]),t._v(" "),r("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.product_price))))]),t._v(" "),r("td",[t._v("Total Paid")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.amountPaid))])]),t._v(" "),r("tr",[r("td",{staticClass:"text-left"},[t._v("Discount Amount")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.discountAmount))]),t._v(" "),r("td",[t._v("Total After Discount")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.discountedTotal))]),t._v(" "),r("td",[t._v("Total Debt")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.outstandingDebt))])]),t._v(" "),r("tr",[r("td",{staticClass:"text-left"},[t._v("Down Payment")]),t._v(" "),r("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.down_payment))))]),t._v(" "),r("td",[t._v("Total Plus Default Fee")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.totalPlusDefault))]),t._v(" "),r("td",[t._v("Default Fee")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.defaultFee))])])])])])]),t._v(" "),t._m(7)]):t._e()])]),t._v(" "),r("div",{staticClass:"modal fade repayment",attrs:{id:"reminder_history"}},[r("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(8),t._v(" "),t.showModalContent?r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[t.activeOrder.order.reminders.length?r("table",{staticClass:"table table-bordered table-striped"},[t._m(9),t._v(" "),r("tbody",t._l(t.activeOrder.order.reminders,function(e,a){return r("tr",[r("th",[t._v(t._s(a+1))]),t._v(" "),r("td",[t._v(t._s(t.$dateTimeConvert(e.date)))]),t._v(" "),r("td",[t._v(t._s(e.type))]),t._v(" "),r("td",{domProps:{innerHTML:t._s(t.Order.renderMessage(e))}}),t._v(" "),r("td",[t._v(t._s(e.user.full_name))])])}))]):r("div",{staticClass:"my-4 text-center"},[t._v("\n                            no reminders have been sent yet!\n                        ")])])]):t._e(),t._v(" "),t._m(10)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tab-pane active text-center"},[e("div",{staticClass:"mb-3 row attendance-item"},[e("div",{staticClass:"col d-flex light-heading align-items-center justify-content-center"},[this._v("\n                    No records found!\n                ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header py-2"},[e("h6",{staticClass:"modal-title py-1"},[this._v("Purchase Order Summary")]),this._v(" "),e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"text-link mt-3 w-100",staticStyle:{"text-align":"right"},attrs:{"data-dismiss":"modal",href:"javascript:"}},[this._v("close dialogue")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header py-2"},[e("h6",{staticClass:"modal-title py-1"},[this._v("Customer Info. Summary")]),this._v(" "),e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"text-link mt-3 w-100 text-right",attrs:{"data-dismiss":"modal",href:"#"}},[this._v("\n                        close dialogue\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{staticClass:"table-separator"},[r("td",[t._v("Name")]),t._v(" "),r("td",[t._v("Order Id")]),t._v(" "),r("td",[t._v("Product")]),t._v(" "),r("th",[t._v("Branch")]),t._v(" "),r("th",[t._v("Status")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer d-flex justify-content-end"},[e("a",{staticClass:"text-link mt-3",attrs:{"data-dismiss":"modal",href:"javascript:"}},[this._v("close dialogue")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header py-2"},[e("h6",{staticClass:"modal-title py-1"},[this._v("History")]),this._v(" "),e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("S/N")]),t._v(" "),r("th",[t._v("Date")]),t._v(" "),r("th",[t._v("Type")]),t._v(" "),r("th",[t._v("SMS/Feedback")]),t._v(" "),r("th",[t._v("sender")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"text-link mt-3 w-100",staticStyle:{"text-align":"right"},attrs:{"data-dismiss":"modal",href:"javascript:"}},[this._v("close dialogue")])])}]}},Qf2W:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".flex-row-bottom[data-v-1a49c150]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}",""])},TZKk:function(t,e,r){var a=r("VU/8")(r("7elN"),r("pIBp"),!1,null,null,null);t.exports=a.exports},UoNi:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("nv24");e.default={props:{order:{default:null},customer:{default:null}},methods:{toggleModal:function(t){a.EventBus.$emit(t,{order:this.order,customer:this.customer})}}}},W7ej:function(t,e,r){var a=r("VU/8")(r("zShF"),r("dW1j"),!1,null,null,null);t.exports=a.exports},XPj8:function(t,e,r){var a=r("VU/8")(r("aSpy"),r("PdN/"),!1,function(t){r("g5Y1")},"data-v-06ef0d53",null);t.exports=a.exports},aSpy:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=m(r("Xxa5")),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},n=m(r("I3G/")),i=r("NYxO"),o=m(r("K23+")),l=r("m2tk"),d=r("p/p5"),c=m(r("TZKk")),u=r("rN6N");function m(t){return t&&t.__esModule?t:{default:t}}function v(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function a(s,n){try{var i=e[s](n),o=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}e.default={components:{OrderItem:c.default},props:{list:{default:null},mode:null,preLoadedOrder:null,startIndex:null},watch:{list:function(t){this.fetchList(t)},preLoadedOrder:function(t){this.prepareForm(t)}},data:function(){return{orders:[],show:!1,showModalContent:!1,Order:u.Order,activeOrder:null}},computed:s({},(0,i.mapGetters)(["auth","getAuthUserDetails"])),methods:{orderStatus:function(t){return t.order.status?t.order.status.name:0},orderStatusClass:function(t){var e=this.orderStatus(t);if(e)return"ok"===e.toLocaleString()?"paid":"missed"},prepareForm:function(){var t=v(a.default.mark(function t(e){var r=e.orders;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.show=!1,this.showModalContent=!1,t.next=4,this.convertRequestOrdersToOrderClassInstance(r);case 4:this.orders=t.sent,this.orders.length&&(this.show=!0),this.$LIPS(!1);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),convertRequestOrdersToOrderClassInstance:function(t){var e=[];for(var r in t){var a=t[r]instanceof u.Order?t[r]:new u.OrderWithPromiseCall(t[r],this.getAuthUserDetails.userId);e.push(a)}return e},fetchList:function(t){var e=this;this.$LIPS(!0);var r,a=!(this.auth("DVALead")||this.auth("FSLLead")||this.auth("CAGAccess"));(0,d.get)((r={query:{list:t,filterWithBranch:a}},"/api/reminder/create?list="+r.query.list+(r.query.filterWithBranch?"&filterWithBranch="+r.query.filterWithBranch:""))).then(function(r){var a=r.data;8===t&&(a.orders=a.orders.map(function(t){return t.order})),e.prepareForm(a)})},displayDetails:function(){var t=v(a.default.mark(function t(e,r){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.default.set(this.$data,"activeOrder",e);case 2:return this.showModalContent=!0,t.abrupt("return",$("#"+r).modal("toggle"));case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),processSelected:function(){this.$LIPS(!0);var t=this.orders.filter(function(t){return t.isSelected});if(!t.length)return this.$displayErrorMessage("please select at least one!"),this.$LIPS(!1);this.sendSMSReminders(t)},sendSMSReminders:function(t){var e=this,r=[];t.forEach(function(a,s){var n=new l.Message(a.nextSMSReminder,a.reminder.contacts,!1,a.dvaId);n.send(function(a){200===a.status&&(delete n.logToDB,r.push(n)),s+1===t.length&&e.logSentMessages(t,r)})})},logSentMessages:function(t,e){var r=this;e.length>0?(0,d.post)("/api/message",{messages:e,bulk:!0}).then(function(e){var a=e.data,s=a.sentAndLogged,n=a.ids;s?r.logSentReminders(t,n):r.$displayErrorMessage("Error Logging sent sms details!")}):this.$displayErrorMessage("Error sending messages!")},logSentReminders:function(t,e){var r=this;if(e.reverse(),e.length>0){var a=t.map(function(t,r){return t.reminder.sms_id=e[r],delete t.reminder.contacts,delete t.reminder.canBeSelected,t.reminder});(0,d.post)("/api/reminder",{reminders:a}).then(function(t){t.data.saved?(o.default.setSuccess("Reminders have been sent successfully!",5e4),r.fetchList(r.list)):r.$displayErrorMessage("Error sending reminders!"),r.$scrollToTop()})}else this.$displayErrorMessage("Error logging sent messages!")}},mounted:function(){var t=this;"normal-list"!=this.mode?this.fetchList(this.list):this.prepareForm(this.preLoadedOrder),$(document).on("hidden.bs.modal",".modal",function(){t.activeOrder=null,t.showModalContent=!1})},created:function(){this.$prepareBanks(),this.$prepareBranches(),this.$preparePaymentMethods()}}},dW1j:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[e("OrderList",{attrs:{"with-branch-filter":!1,"url-to-fetch-orders":"/api/orders/user/"+this.getAuthUserDetails.userId}})],1)},staticRenderFns:[]}},g5Y1:function(t,e,r){var a=r("pqmo");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("033d61fe",a,!0,{})},lEcZ:function(t,e,r){var a=r("Qf2W");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("63e54479",a,!0,{})},oKx2:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:"",buttonTitle:null,to:null}}},pIBp:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3 row attendance-item"},[r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center",staticStyle:{"max-width":"120px"}},["normal-list"===t.mode?r("span"):t.order.reminder.canBeSelected&&["collection","recovery","call","external-recovery"].includes(t.mode)?r("span",{staticClass:"user mx-auto bg-pending text-white",on:{click:t.logReminder}},[r("i",{staticClass:"fas fa-hourglass-start"})]):t.order.reminder.canBeSelected&&"sms"===t.mode?r("div",{staticClass:"d-flex align-items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.isSelected,expression:"order.isSelected"}],staticClass:"form-check-input my-0 mx-4 float-left position-relative ",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.order.isSelected)?t._i(t.order.isSelected,null)>-1:t.order.isSelected},on:{click:t.toggleSelect,change:function(e){var r=t.order.isSelected,a=e.target,s=!!a.checked;if(Array.isArray(r)){var n=t._i(r,null);a.checked?n<0&&t.$set(t.order,"isSelected",r.concat([null])):n>-1&&t.$set(t.order,"isSelected",r.slice(0,n).concat(r.slice(n+1)))}else t.$set(t.order,"isSelected",s)}}})]):r("span",{staticClass:"user mx-auto sent-reminder"},[r("i",{staticClass:"fas fa-check"})]),t._v(" "),r("span",{staticClass:"user mx-auto"},[t._v(t._s(t.startIndex+t.index))]),t._v(" "),t.$route.meta.customSMS?r("span",[r("CustomSMSButton",{key:t.order.order.id,attrs:{order:t.order}})],1):t._e()]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg user-name d-flex align-items-center justify-content-center"},[t._v("\n        "+t._s(t.$vnode.key)+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"purchase_order")}}},[t._v("\n        "+t._s(t.order.order.order_date)+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-3 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"customer_info")}}},[t._v("\n        ID: "+t._s(t.order.customer.id)+" - "+t._s(t._f("capitalize")(t.order.customer.employment_status))+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"repayment")}}},[t._v("\n        "+t._s(t.order.financialStatus)+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"reminder_history")}}},[t._v("\n        "+t._s(t.order.order.reminders.length)+" reminder(s) sent\n    ")]),t._v(" "),["collection","recovery","external-recovery"].includes(t.mode)?r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center attendance-create"},[r("span",{staticClass:"present"},[r("span",{staticClass:"radio w-50 pr-3 mb-0 float-left"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.reminder.is_visited,expression:"order.reminder.is_visited"}],attrs:{type:"radio",id:"present"+t.index,name:"isPresent"+t.index},domProps:{value:!0,checked:t._q(t.order.reminder.is_visited,!0)},on:{change:function(e){t.$set(t.order.reminder,"is_visited",!0)}}}),t._v(" "),r("label",{attrs:{for:"present"+t.index}},[t._v("yes")])]),t._v(" "),r("span",{staticClass:"radio w-50 pl-3 mb-0 float-left"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.reminder.is_visited,expression:"order.reminder.is_visited"}],attrs:{type:"radio",id:"absent"+t.index,name:"isPresent"+t.index},domProps:{value:!1,checked:t._q(t.order.reminder.is_visited,!1)},on:{change:function(e){t.$set(t.order.reminder,"is_visited",!1)}}}),t._v(" "),r("label",{attrs:{for:"absent"+t.index}},[t._v("no")])])])]):t._e(),t._v(" "),["collection","recovery","call","external-recovery"].includes(t.mode)?r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.order.reminder.feedback,expression:"order.reminder.feedback"}],staticClass:"form-control",attrs:{rows:"1",disabled:!t.order.reminder.canBeSelected},domProps:{value:t.order.reminder.feedback},on:{input:function(e){e.target.composing||t.$set(t.order.reminder,"feedback",e.target.value)}}})]):t._e(),t._v(" "),"call"===t.mode?r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.promiseCall.date,expression:"order.promiseCall.date"}],staticClass:"form-control",attrs:{type:"date",disabled:!t.order.reminder.canBeSelected},domProps:{value:t.order.promiseCall.date},on:{input:function(e){e.target.composing||t.$set(t.order.promiseCall,"date",e.target.value)}}})]):t._e()])},staticRenderFns:[]}},pqmo:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".table-separator[data-v-06ef0d53]{border-top:2px solid #dee1e4}",""])},qQoq:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{staticClass:"attendance",attrs:{id:"reminder"}},[r("custom-header",{attrs:{title:"Order List"}}),t._v(" "),r("div",{staticClass:"mt-2 mt-lg-3 row attendance-head attendance-view"},[t._l(t.filters,function(e){var a=e.name,s=e.model;return r("div",{staticClass:"col-4 col-lg"},[r("div",{staticClass:"row"},[r("div",{staticClass:"light-heading mb-1"},[r("span",{staticClass:"d-none d-sm-inline"},[t._v("Select ")]),t._v("\n                        "+t._s(t._f("capitalize")(a))+"\n                    ")]),t._v(" "),r("div",{staticClass:"form-group w-100"},"branch"===a?[r("select",{directives:[{name:"model",rawName:"v-model",value:t.$data[s],expression:"$data[model]"}],staticClass:"custom-select",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.fetchData()},change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.$data,s,e.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",selected:"",value:""}},[t._v(t._s(t._f("capitalize")(a)))]),t._v(" "),t._l(t.getBranches,function(e){var a=e.name,s=e.id;return r("option",{domProps:{value:s}},[t._v("\n                                "+t._s(t._f("capitalize")(a))+"\n                            ")])})],2)]:[r("input",{directives:[{name:"model",rawName:"v-model",value:t.$data[s],expression:"$data[model]"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.$data[s]},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.fetchData()},input:function(e){e.target.composing||t.$set(t.$data,s,e.target.value)}}})])])])}),t._v(" "),r("div",{staticClass:"col-12 col-lg p-0 flex-row-bottom"},[r("button",{staticClass:"btn btn-primary bg-default mt-0 myBtn",on:{click:function(e){t.fetchData()}}},[t._v("Apply Filter")])])],2),t._v(" "),r("div",{staticClass:"mt-5 mb-3 attendance-head"},[r("div",{staticClass:"w-100 my-5 mx-0 hr"}),t._v(" "),r("div",{staticClass:"row px-4 pt-3 pb-4 text-center"},[r("div",{staticClass:"col light-heading",staticStyle:{"max-width":"120px"}},[t._v("S/N")]),t._v(" "),t._l(t.headings,function(e){return r("div",{staticClass:"col light-heading"},[t._v(t._s(e))])})],2)]),t._v(" "),t.show?r("order",{attrs:{"start-index":t.orders.from,"pre-loaded-order":t.response,mode:"normal-list"}}):t._e(),t._v(" "),t.show&&t.orders.current_page?r("div",{staticClass:"mt-1 attendance-body"},[r("div",{staticClass:"mb-5 px-0 row align-items-center"},[r("div",{staticClass:"w-100 mb-4 mt-5 mx-0 hr"}),t._v(" "),r("div",{staticClass:"clearfix w-100 mt-4 d-flex bd-highlight"},[r("div",{staticClass:"col d-flex justify-content-start align-items-center pl-0"},[r("strong",{staticClass:"light-heading float-left"},[t._v("\n                            Displaying: "+t._s(t.orders.from)+" - "+t._s(t.orders.to)+" of "+t._s(t.orders.total)+"\n                        ")])]),t._v(" "),r("div",{staticClass:"col d-flex justify-content-center align-items-center"},[r("div",{staticClass:"mr-5"},[r("span",{staticClass:"d-inline light-heading mr-2"},[t._v("set current Page")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.page,expression:"page"}],staticClass:"d-inline form-control ",staticStyle:{"max-width":"50px"},attrs:{type:"number"},domProps:{value:t.page},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.fetchData()},input:function(e){e.target.composing||(t.page=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"ml-5"},[r("span",{staticClass:"d-inline light-heading mr-2"},[t._v("set page-size")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.page_size,expression:"page_size"}],staticClass:"d-inline form-control",staticStyle:{"max-width":"50px"},attrs:{type:"number"},domProps:{value:t.page_size},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.fetchData()},input:function(e){e.target.composing||(t.page_size=e.target.value)}}})])]),t._v(" "),r("nav",{staticClass:"col d-flex justify-content-end align-items-center pr-0"},[r("ul",{staticClass:"pagination pagination-lg mb-0"},[r("li",{staticClass:"page-item",class:{disabled:!t.orders.first_page_url}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:"},on:{click:function(e){t.prev(1)}}},[t._v("First")])]),t._v(" "),r("li",{staticClass:"page-item",class:{disabled:!t.orders.prev_page_url}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:"},on:{click:function(e){t.prev()}}},[t._v("prev")])]),t._v(" "),r("li",{staticClass:"page-item"},[r("span",{staticClass:"page-link"},[t._v("Current Page: "+t._s(t.orders.current_page))])]),t._v(" "),r("li",{staticClass:"page-item",class:{disabled:!t.orders.next_page_url}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:"},on:{click:function(e){t.next()}}},[t._v("Next")])]),t._v(" "),r("li",{staticClass:"page-item",class:{disabled:!t.orders.last_page_url}},[r("a",{staticClass:"page-link",attrs:{href:"javascript:"},on:{click:function(e){t.next(t.orders.last_page)}}},[t._v("Last")])])])])])])]):t._e()],1)])},staticRenderFns:[]}},rN6N:function(t,e,r){"use strict";var a,s=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=r("I3G/"),i=(a=n)&&a.__esModule?a:{default:a},o=r("N71M");function l(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=new i.default,u=function(){function t(e,r){d(this,t),this._order=e,this._customer=r,this._paymentBanks=[],this._paymentMethods=[],this._actualPayDates=[],this._actualAmountsPaid=[],this._amountsToBePaid=[],this._repaymentCaptions=[],this._paymentStatusClasses=[],this._repaymentLevel=0,this._amountPaid=null,this._discountAmount=null,this._outstandingDebt=null,this._discountedTotal=null,this._defaultFee=null,this._totalPlusDefault=null,this._payments={},this.setIsOrderFormal(),this.setIsRepaymentValid(),this.setRepaymentData(),this.setCountAndInterval(),this.setCommonDetails(),this.setDueDates(),this.setPaymentStatusClasses(),this.calcAndSetPaymentSummary(),this.setBranch(),this.setDiscount()}return s(t,[{key:"setIsRepaymentValid",value:function(){this._isRepaymentValid=!(!this.order.repayment_formal&&!this.order.repayment_informal)}},{key:"setIsOrderFormal",value:function(){this._isOrderFormal=["formal","salaried"].includes(this._customer.employment_status.toLowerCase()),4===parseInt(this.order.payment_method_id)&&(this._isOrderFormal=!0)}},{key:"setRepaymentData",value:function(){null!=this.order.repayment_formal&&(this._repaymentData=this.order.repayment_formal),null!=this.order.repayment_informal&&(this._repaymentData=this.order.repayment_informal)}},{key:"setCountAndInterval",value:function(){var e=void 0,r=void 0;new Date(this.order.order_date)<=new Date("2019-07-07")?(null!=this.order.repayment_formal&&(e=28,r=6),null!=this.order.repayment_informal&&(e=14,r=12)):t.isBankDraftAvailable()&&this.isOrderFormal||4===parseInt(this.order.payment_method_id)?(e=28,r=6):(e=14,r=12),this._count=r,this._interval=e}},{key:"setDueDates",value:function(){this._dueDates=t.generateDueDates(this.order.order_date,this.interval,this.count)}},{key:"setCommonDetails",value:function(){if(this.isRepaymentValid)for(var t=1;t<this.count+1;t++){for(var e=c.$getColumn(t).split(""),r=[],a=1;a<=2;a++)r.unshift(e.pop());this._repaymentCaptions.push("<td>"+e.join("")+"<sup>"+r.join("")+"</sup></td>"),this._actualPayDates.push(this.repaymentData[c.$getColumn(t)+"_date"]),this._actualAmountsPaid.push(this.repaymentData[c.$getColumn(t)+"_pay"]),this._paymentBanks.push(this.repaymentData[c.$getColumn(t)+"_payment_bank"]),this._paymentMethods.push(this.repaymentData[c.$getColumn(t)+"_payment_method"]),this._amountsToBePaid.push(c.$roundDownAmt(this.order.repayment_amount)),this.repaymentData[c.$getColumn(t)+"_pay"]>0&&this._repaymentLevel++}}},{key:"setBranch",value:function(){var t=this;this.order.store_product?this._branch=o.store.state.branches.find(function(e){return parseInt(e.id)===parseInt(t.order.store_product.store_name)}):this._branch=null}},{key:"setPaymentStatusClasses",value:function(){if(this.isRepaymentValid)for(var e=1;e<this.count+1;e++){var r={class:null,icon:null},a=c.$getColumn(e),s=t.isPaymentDue(this.dueDates[e-1]),n=parseInt(this.repaymentData[a+"_pay"]);n?(r.class="paid",r.icon="fa-check"):s&&!n?(r.class="missed",r.icon="fa-times"):s||(r.class="pending",r.icon="fa-hourglass-start"),this._paymentStatusClasses.push(r)}}},{key:"calcAndSetPaymentSummary",value:function(){var t=function(t){return c.$formatCurrency(t)},e=this.order,r=e.repayment_amount,a=e.down_payment,s=e.product_price,n=6===this.count?.5:1,i=this.order.discount.percentage_discount,o=i>0?5===i?1:2:0,l=c.$roundDownAmt(r*n*o);this._discountAmount=t(l);var d=0,u=0;if(this.repaymentData){for(var m=0;m<this.count+1;m++){var v=parseInt(this.actualAmountsPaid[m]);u+=v?c.$roundDownAmt(v):0}d=c.$roundDownAmt(parseInt(a))+u+l}this._amountPaid=t(d);var _=c.$roundDownAmt(s-l);this._discountedTotal=t(_);var h=0;new Date(this.order.order_date)>new Date("2019-07-07")&&(h=500*[].length),this._defaultFee=t(h),this._totalPlusDefault=t(_+h),this._outstandingDebt=t(c.$roundDownAmt(parseInt(s)-d))}},{key:"setDiscount",value:function(){this._discount=this.order.discount.name+" "+this.order.discount.percentage_discount}},{key:"payments",set:function(t){this._payments=t},get:function(){return this._payments}},{key:"repaymentLevel",get:function(){return this._repaymentLevel}},{key:"order",get:function(){return this._order}},{key:"customer",get:function(){return this._customer}},{key:"isRepaymentValid",get:function(){return this._isRepaymentValid}},{key:"isOrderFormal",get:function(){return this._isOrderFormal}},{key:"repaymentData",get:function(){return this._repaymentData}},{key:"count",get:function(){return this._count}},{key:"interval",get:function(){return this._interval}},{key:"dueDates",get:function(){return this._dueDates}},{key:"paymentStatusClasses",get:function(){return this._paymentStatusClasses}},{key:"repaymentCaptions",get:function(){return this._repaymentCaptions}},{key:"paymentBanks",get:function(){return this._paymentBanks}},{key:"paymentMethods",get:function(){return this._paymentMethods}},{key:"actualPayDates",get:function(){return this._actualPayDates}},{key:"actualAmountsPaid",get:function(){return this._actualAmountsPaid}},{key:"amountsToBePaid",get:function(){return this._amountsToBePaid}},{key:"amountPaid",get:function(){return this._amountPaid}},{key:"discountAmount",get:function(){return this._discountAmount}},{key:"outstandingDebt",get:function(){return this._outstandingDebt}},{key:"discountedTotal",get:function(){return this._discountedTotal}},{key:"defaultFee",get:function(){return this._defaultFee}},{key:"totalPlusDefault",get:function(){return this._totalPlusDefault}},{key:"branch",get:function(){return this._branch}},{key:"discount",get:function(){return this._discount}},{key:"customerName",get:function(){return this.customer.first_name+" "+this.customer.last_name}},{key:"customerWGName",get:function(){var t=this.customer;return t.work_guarantor_first_name+" "+t.work_guarantor_last_name+" - "+t.work_guarantor_relationship}},{key:"customerPGName",get:function(){var t=this.customer;return t.personal_guarantor_first_name+" "+t.personal_guarantor_last_name+" - "+t.personal_guarantor_relationship}}],[{key:"generateDueDates",value:function(t,e,r){for(var a=[],s=0;s<r;s++){var n=new Date(t).addDays((s+1)*e),i=c.$getDate(n);a.push(i)}return a}},{key:"isPaymentDue",value:function(t){return new Date>new Date(t)}},{key:"isBankDraftAvailable",value:function(){return!1}},{key:"renderMessage",value:function(t){return t.sms?t.sms.message.replace(/%0a/g,"</br>"):t.feedback}},{key:"convertToName",value:function(t,e){return t?o.store.state[e].find(function(e){return e.id===t}).name:null}}]),t}(),m=function(t){function e(t,r){d(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,t.customer));return a._isReminderSent=!1,a._dvaId=r,a._isSelected=!1,a.setReminder(null),a.setIsReminderSent(),a.setFinancialStatus(),a.setPromiseCall(),a.generateAndSetNextSMSReminder(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u),s(e,[{key:"setIsReminderSent",value:function(){var t=this,e=c.$getDate();this.order.reminders.forEach(function(r){var a=r.date.split(" "),s=a[0].split("-"),n=a[1].split(":"),i=[].concat(l(s),l(n)).map(function(t){return parseInt(t,10)});c.$getDate(new Date(Date.UTC.apply(Date,l(i))),!1)===e&&(t._isReminderSent=!0)})}},{key:"setFinancialStatus",value:function(){this._financialStatus=this.isRepaymentValid?"Paid: "+this.amountPaid+" | Debt: "+this.outstandingDebt:"no detail!"}},{key:"generateAndSetNextSMSReminder",value:function(){var t=null;this.order.store_product&&(t=this.order.store_product.product_name);var e=this.order,r=e.repayment_amount,a=void 0;e.order_date===c.$getDate()?(a="Hello "+this.customerName+", thanks for patronizing us. The following is the breakdown of the repayment plan for the purchase of "+t+":%0a",this.dueDates.forEach(function(t,e){return a+=c.$getColumn(e+1)+": "+t+" => "+c.$formatCurrency(c.$roundDownAmt(r))+"%0a"})):a="Hello "+this.customerName+", This is to remind you that your "+c.$getColumn(parseInt(this.repaymentLevel)+1)+" repayment of "+c.$formatCurrency(c.$roundDownAmt(r))+" for "+t+" will be due on "+this.dueDates[this.repaymentLevel]+". we will be expecting you.",this._nextSMSReminder=a+"Please remember to pay on time to avoid late fees and other penalties.%0aThank you."}},{key:"setReminder",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._reminder={type:t,feedback:null,is_visited:null,dva_id:this.dvaId,order_id:this.order.id.replace(/ +/g,""),customer_id:this.customer.id,canBeSelected:!this.isReminderSent,repayment_level:this.repaymentLevel+"/"+this.count},"sms"===t&&(this._reminder.contacts=this.customer.telephone),this._reminder.sms_id=e}},{key:"setPromiseCall",value:function(){this._promiseCall={order_id:this.order.id,user_id:this.dvaId,customer_id:this.customer.id,date:null}}},{key:"isSelected",set:function(t){this._isSelected=t},get:function(){return this._isSelected}},{key:"isReminderSent",get:function(){return this._isReminderSent}},{key:"dvaId",get:function(){return this._dvaId}},{key:"financialStatus",get:function(){return this._financialStatus}},{key:"nextSMSReminder",get:function(){return this._nextSMSReminder}},{key:"reminder",get:function(){return this._reminder}},{key:"promiseCall",get:function(){return this._promiseCall}}]),e}();t.exports={Order:u,OrderWithPromiseCall:m}},rjj0:function(t,e,r){var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s=r("tTVk"),n={},i=a&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,d=!1,c=function(){},u=null,m="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(t){for(var e=0;e<t.length;e++){var r=t[e],a=n[r.id];if(a){a.refs++;for(var s=0;s<a.parts.length;s++)a.parts[s](r.parts[s]);for(;s<r.parts.length;s++)a.parts.push(p(r.parts[s]));a.parts.length>r.parts.length&&(a.parts.length=r.parts.length)}else{var i=[];for(s=0;s<r.parts.length;s++)i.push(p(r.parts[s]));n[r.id]={id:r.id,refs:1,parts:i}}}}function h(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function p(t){var e,r,a=document.querySelector("style["+m+'~="'+t.id+'"]');if(a){if(d)return c;a.parentNode.removeChild(a)}if(v){var s=l++;a=o||(o=h()),e=g.bind(null,a,s,!1),r=g.bind(null,a,s,!0)}else a=h(),e=function(t,e){var r=e.css,a=e.media,s=e.sourceMap;a&&t.setAttribute("media",a);u.ssrId&&t.setAttribute(m,e.id);s&&(r+="\n/*# sourceURL="+s.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,a),r=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else r()}}t.exports=function(t,e,r,a){d=r,u=a||{};var i=s(t,e);return _(i),function(e){for(var r=[],a=0;a<i.length;a++){var o=i[a];(l=n[o.id]).refs--,r.push(l)}e?_(i=s(t,e)):i=[];for(a=0;a<r.length;a++){var l;if(0===(l=r[a]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete n[l.id]}}}};var f,y=(f=[],function(t,e){return f[t]=e,f.filter(Boolean).join("\n")});function g(t,e,r,a){var s=r?"":a.css;if(t.styleSheet)t.styleSheet.cssText=y(e,s);else{var n=document.createTextNode(s),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(n,i[e]):t.appendChild(n)}}},tIeX:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},s=r("p/p5"),n=d(r("K23+")),i=d(r("XPj8")),o=r("NYxO"),l=d(r("EJ7O"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={props:{withBranchFilter:{default:!0},urlToFetchOrders:{default:"/api/reminder/create"}},components:{CustomHeader:l.default,Order:i.default},computed:a({},(0,o.mapGetters)(["getBranches"])),data:function(){return{branch_id:"",page_size:10,date_from:null,date_to:null,page:1,filters:[{name:"date from",model:"date_from"},{name:"date to",model:"date_to"}],orders:null,response:{},show:!1,headings:["Order Number","Order Summary","Customer Info Summary","Repayment Summary","Reminder History"]}},methods:a({fetchData:function(){var t=this;this.$scrollToTop(),this.$LIPS(!0);var e=this.$data,r=e.page,a=e.page_size,i=e.date_from,o=e.date_to,l=e.branch_id;(0,s.get)(this.urlToFetchOrders+(r?"?page="+r:"")+(o?"&dateTo="+o:"")+(a?"&pageSize="+a:"")+(l?"&branchId="+l:"")+(i?"&dateFrom="+i:"")).then(function(e){var r=e.data;return t.prepareForm(r)}).catch(function(){return n.default.setError("Error Preparing form")})},next:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.orders.next_page_url&&(this.page=t||parseInt(this.page)+1,this.fetchData())},prev:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.orders.prev_page_url&&(this.page=t||parseInt(this.page)-1,this.fetchData())},prepareForm:function(t){this.show=!1,this.orders=t.orders,this.response={orders:t.orders.data},this.$LIPS(!1),this.show=!0}},(0,o.mapActions)("ModalAccess",["addCustomerOptionsModalsToDom","removeCustomerOptionsModalsFromDom"])),created:function(){this.$props.withBranchFilter&&this.filters.unshift({name:"branch",model:"branch_id"}),this.addCustomerOptionsModalsToDom(),this.$prepareBranches(),this.fetchData()},destroyed:function(){this.removeCustomerOptionsModalsFromDom()}}},tTVk:function(t,e){t.exports=function(t,e){for(var r=[],a={},s=0;s<e.length;s++){var n=e[s],i=n[0],o={id:t+":"+s,css:n[1],media:n[2],sourceMap:n[3]};a[i]?a[i].parts.push(o):r.push(a[i]={id:i,parts:[o]})}return r}},zShF:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},n=r("NYxO"),i=r("1PU9"),o=(a=i)&&a.__esModule?a:{default:a};e.default={components:{OrderList:o.default},computed:s({},(0,n.mapGetters)(["getAuthUserDetails"]))}}});