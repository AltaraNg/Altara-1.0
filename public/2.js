webpackJsonp([2],{"+O4B":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5 attendance-head"},[a("div",{staticClass:"mb-5 row align-items-center"},[a("div",{staticClass:"col-12 title-con"},[a("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),t.to?a("div",{staticClass:"row justify-content-end"},[a("router-link",{staticClass:"text-link mt-3",attrs:{to:t.to}},[t._v(t._s(t.buttonTitle))])],1):t._e()])])])},staticRenderFns:[]}},"/O7o":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"[data-function=display].status[data-v-decdc92c]{border-top-right-radius:0;border-bottom-right-radius:0}.status.dropdown-toggle[data-v-decdc92c]{border-top-left-radius:0!important;border-bottom-left-radius:0!important;padding:1rem!important}.approved.dropdown-toggle[data-v-decdc92c]{background:-webkit-gradient(linear,left top,left bottom,from(#00a368),to(#00662a));background:linear-gradient(180deg,#00a368,#00662a)}.not-approved.dropdown-toggle[data-v-decdc92c]{background:-webkit-gradient(linear,left top,left bottom,from(#e12424),to(#a40000));background:linear-gradient(180deg,#e12424,#a40000)}.dropdown-toggle[data-v-decdc92c]:after{border-top:.6em solid;border-right:.6em solid transparent;border-left:.6em solid transparent}",""])},"1gIg":function(t,e,a){var s=a("VU/8")(a("wBhk"),a("9sZT"),!1,null,null,null);t.exports=s.exports},"3eq/":function(t,e,a){var s=a("/O7o");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("7ad2d932",s,!0,{})},"4I72":function(t,e,a){var s=a("VU/8")(a("WiSW"),a("cb+m"),!1,null,null,null);t.exports=s.exports},"7qHL":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("p/p5"),n=o(a("K23+")),r=o(a("EJ7O"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"AutocompleteSearch",components:{CustomHeader:r.default},props:{url:{type:String,required:!0},title:{type:String,required:!0}},data:function(){return{search:"",open:!1,customers:[],selectIndex:0,displayText:"",searchColumn:"name",searchColumns:[{title:"customer id",column:"id"},{title:"customer name",column:"name"},{title:"phone number",column:"telephone"}]}},watch:{searchColumn:function(t){"telephone"===t&&(this.customers=[])},search:function(t){var e=this;if(t.trim()){if(!this.isStringLengthValid(t))return n.default.setError("search should not be more than "+("name"===this.searchColumn?" 3 ":" 1 ")+"words");var a={};"name"===this.searchColumn?(a.first_name=this.search,a.middle_name=this.search,a.last_name=this.search):a[this.searchColumn]=this.search,(0,s.post)(this.url,{searchableFields:a}).then(function(t){var a=t.data.customers;return e.customers=a}).catch(function(){return n.default.setError("error fetching result")})}}},methods:{onDownKey:function(){this.customers.length-1>this.selectIndex&&this.selectIndex++},onUpKey:function(){this.selectIndex>0&&this.selectIndex--},onEnterKey:function(){var t=this.customers[this.selectIndex];t&&this.select(t)},select:function(t){this.displayText=this.getAutocomplete(t),this.$emit("customer-selected",t.id),this.$refs.search.blur()},toggle:function(t){var e=t.target;e!==this.$refs.toggle&&e!==this.$refs.search||(this.open?e!==this.$refs.search&&this.$refs.search.blur():this.$refs.search.focus())},onFocus:function(){this.open=!0},onBlur:function(){this.search="",this.open=!1},onEscape:function(){this.$refs.search.blur()},getAutocomplete:function(t){var e=[];"id"===this.searchColumn&&e.push(t.id),"telephone"===this.searchColumn&&e.push(t.telephone);var a=t.hasOwnProperty("full_name")?t.full_name:this.$getCustomerFullName(t,!!t.middle_name);return e.push(a),this.styleAutocomplete(e)},styleAutocomplete:function(t){var e="";return t.forEach(function(t){return e+='<span class="col">'+t+"</span>"}),e},isStringLengthValid:function(t){var e=t.split(" ").length;return"name"===this.searchColumn&&e<=3||e<=1}}}},"9LRx":function(t,e,a){var s=a("VU/8")(a("7qHL"),a("hUa2"),!1,function(t){a("g2HP")},"data-v-55fc05de",null);t.exports=s.exports},"9sZT":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"mx-md-3 mx-0 py-0 my-0 text-center clearfix",attrs:{id:"app-navigation"}},[t.$routerHistory.hasPrevious()?a("router-link",{staticClass:"text-secondary float-left ml-1 pl-2 ml-sm-4 pl-sm-3",attrs:{to:t.previous,id:"back"}},[a("span",{staticClass:"mr-5 float-left"},[a("i",{staticClass:"far fa-arrow-alt-circle-left float-left"}),t._v(" "),a("small",{staticClass:"float-left ml-2 d-none d-sm-block"},[t._v("Back")])])]):t._e(),t._v(" "),a("strong",{staticClass:"mx-auto w-100 float-left",attrs:{"data-title":"title"}},[a("span",{staticClass:"d-none d-sm-block"},[t._v(t._s(t.pageTitle))]),t._v(" "),a("span",{staticClass:"d-block d-sm-none"},[t._v(t._s(t.pageTitleSmall))])]),t._v(" "),t.$routerHistory.hasForward()?a("router-link",{staticClass:"text-secondary float-right mr-1 pr-2 mr-sm-4 pr-sm-3",attrs:{to:t.forward,id:"forward"}},[a("span",{staticClass:"ml-5 float-right"},[a("i",{staticClass:"far fa-arrow-alt-circle-right float-right"}),t._v(" "),a("small",{staticClass:"float-right mr-2 d-none d-sm-block"},[t._v("Forward")])])]):t._e()],1)},staticRenderFns:[]}},B1o3:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{attrs:{id:"reminder"}},[a("AutocompleteSearch",{attrs:{title:"customer lookup",url:"/api/customer/autocomplete"},on:{"customer-selected":t.processForm}}),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.customer&&t.show?a("div",[a("customer-profile",{attrs:{"view-customer":t.customer}}),t._v(" "),a("custom-header",{attrs:{title:"All order(s)"}}),t._v(" "),a("div",{staticClass:"mt-5 mb-3 attendance-head"},[a("div",{staticClass:"row px-4 pt-3 pb-4 text-center"},[a("div",{staticClass:"col light-heading",staticStyle:{"max-width":"100px"}},[t._v("S/No.")]),t._v(" "),t._l(t.headers,function(e){return a("div",{staticClass:"col light-heading"},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"tab-content mt-1 attendance-body"},[t.show&&t.customer.orders.length>0?a("div",{staticClass:"tab-pane active text-center"},t._l(t.customer.orders,function(e,s){return a("div",{staticClass:"mb-3 row attendance-item"},[a("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center",staticStyle:{"max-width":"100px"}},[a("span",{staticClass:"user mx-auto"},[t._v(t._s(s+1))]),t._v(" "),t.$route.meta.customSMS?a("span",[a("CustomSMSButton",{key:e.order.id,attrs:{order:e,customer:t.customer}})],1):t._e()]),t._v(" "),a("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                    "+t._s(e.order.order_date)+"\n                                ")]),t._v(" "),a("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex user-name align-items-center justify-content-center"},[t._v("\n                                    "+t._s(e.order.id)+"\n                                ")]),t._v(" "),a("div",{staticClass:"col-12 col-xs-3 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                    "+t._s(e.order.store_product.product_name)+"\n                                ")]),t._v(" "),a("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                    "+t._s(t.$formatCurrency(e.order.product_price))+"\n                                ")]),t._v(" "),a("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                    "+t._s(e.order.sales_category.name)+"\n                                ")]),t._v(" "),a("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                    "+t._s(t.$formatCurrency(e.order.down_payment))+"\n                                ")]),t._v(" "),a("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[a("button",{staticClass:"btn status my-sm-2",class:e.count===e.repaymentLevel?"approved":"pending",on:{click:function(e){t.displayAmortization(s)}}},[t._v("\n                                        View Plan\n                                        "),a("i",{staticClass:"fas ml-3",class:e.count===e.repaymentLevel?"fa-check-circle":"fa-hourglass-half",staticStyle:{"font-size":"1.4rem"}})])])])})):a("div",{staticClass:"tab-pane active text-center"},[a("div",{staticClass:"mb-3 row attendance-item"},[a("div",{staticClass:"col d-flex light-heading align-items-center justify-content-center"},[t._v("\n                                    No records found!\n                                ")])])])]),t._v(" "),a("div",{staticClass:"mt-5 mb-3 attendance-head"},[a("div",{staticClass:"w-100 my-5 mx-0 hr"})])],1):t._e()]),t._v(" "),a("div",{staticClass:"modal fade repayment",attrs:{id:"amortization"}},[a("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[t.showModalContent?a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header py-2"},[a("h6",{staticClass:"modal-title py-1"},[t._v("\n                                Repayment Plan/Summary - "+t._s(t._f("capitalize")(t.customer.employment_status))+"\n                            ")]),t._v(" "),a("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[a("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"fas fa-times"})])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"table-responsive"},[a("h5",{staticClass:"mt-3 mb-0"},[t._v("Order Information")]),t._v(" "),a("table",{staticClass:"table table-bordered"},[a("tbody",[a("tr",{staticClass:"table-separator"},[a("td",[t._v("Name")]),t._v(" "),a("td",[t._v("Order Id")]),t._v(" "),a("td",[t._v("Product")]),t._v(" "),a("th",[t._v("Branch")]),t._v(" "),a("th",[t._v("Status")])]),t._v(" "),a("tr",[a("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.activeOrder.customerName)+"\n                                        ")]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.order.id))]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.order.store_product.product_name))]),t._v(" "),a("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.activeOrder.branch.name))]),t._v(" "),a("td",{staticClass:"font-weight-bold",class:t.getOrderStatusClass(t.getOrderStatus(t.activeOrder))},[t._v("\n                                            "+t._s(t.getOrderStatus(t.activeOrder))+"\n                                        ")])])])]),t._v(" "),a("h5",{staticClass:"mt-5 mb-0"},[t._v("Amortization Schedule")]),t._v(" "),a("table",{staticClass:"table table-bordered"},[a("tbody",{staticClass:"text-center"},[a("tr",[a("th",[t._v("Repayment")]),t._v(" "),t._l(t.activeOrder.repaymentCaptions,function(e){return a("td",{domProps:{innerHTML:t._s(e)}})})],2),t._v(" "),a("tr",{staticClass:"table-separator"},[a("th",[t._v("Due Date")]),t._v(" "),t._l(t.activeOrder.dueDates,function(e){return a("td",[t._v(t._s(e))])})],2),t._v(" "),a("tr",[a("th",[t._v("Actual Pay Day")]),t._v(" "),t._l(t.activeOrder.actualPayDates,function(e){return a("td",[t._v(t._s(e))])})],2),t._v(" "),a("tr",{staticClass:"table-separator"},[a("th",[t._v("Status")]),t._v(" "),t._l(t.activeOrder.paymentStatusClasses,function(t){return a("td",{class:t.class},[a("i",{staticClass:"fas",class:t.icon})])})],2),t._v(" "),a("tr",{staticClass:"table-separator"},[a("th",[t._v("Repayment Amount")]),t._v(" "),t._l(t.activeOrder.amountsToBePaid,function(e){return a("td",[t._v("\n                                            "+t._s(t.$formatCurrency(e))+"\n                                        ")])})],2),t._v(" "),a("tr",[a("th",[t._v("Actual Amount Paid")]),t._v(" "),t._l(t.activeOrder.actualAmountsPaid,function(e){return a("td",[t._v("\n                                            "+t._s(t.$formatCurrency(e))+"\n                                        ")])})],2),t._v(" "),a("tr",{staticClass:"table-separator"},[a("th",[t._v("Payment Method")]),t._v(" "),t._l(t.activeOrder.paymentMethods,function(e){return a("td",{staticClass:"text-capitalize"},[t._v("\n                                            "+t._s(t.Order.convertToName(e,"paymentMethods"))+"\n                                        ")])})],2),t._v(" "),a("tr",[a("th",[t._v("Bank")]),t._v(" "),t._l(t.activeOrder.paymentBanks,function(e){return a("td",{staticClass:"text-capitalize"},[t._v("\n                                            "+t._s(t.Order.convertToName(e,"banks"))+"\n                                        ")])})],2)])]),t._v(" "),a("h5",{staticClass:"mt-5 mb-0"},[t._v("Payment Summary")]),t._v(" "),a("table",{staticClass:"table table-bordered"},[a("tbody",{staticClass:"text-center"},[a("tr",{staticClass:"table-separator"},[a("td",{staticClass:"text-left"},[t._v("Discount Detail (%)")]),t._v(" "),a("th",[t._v(t._s(t._f("capitalize")(t.activeOrder.discount)))]),t._v(" "),a("td",[t._v("Total Before Discount")]),t._v(" "),a("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.product_price))))]),t._v(" "),a("td",[t._v("Total Paid (+discount)")]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.amountPaid))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-left"},[t._v("Discount Amount")]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.discountAmount))]),t._v(" "),a("td",[t._v("Total After Discount")]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.discountedTotal))]),t._v(" "),a("td",[t._v("Total Debt")]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.outstandingDebt))])]),t._v(" "),a("tr",[a("td",{staticClass:"text-left"},[t._v("Down Payment")]),t._v(" "),a("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.down_payment))))]),t._v(" "),a("td",[t._v("Total Plus Default Fee")]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.totalPlusDefault))]),t._v(" "),a("td",[t._v("Default Fee")]),t._v(" "),a("th",[t._v(t._s(t.activeOrder.defaultFee))])])])]),t._v(" "),t.canEditPayment?a("div",[a("h5",{staticClass:"mt-5 mb-0"},[t._v("\n                                        "+t._s(t._f("capitalize")(t.paymentFormType))+" a new payment\n                                    ")]),t._v(" "),a("table",{staticClass:"table table-bordered"},[a("tbody",{staticClass:"text-center"},[a("tr",{staticClass:"table-separator"},[a("td",{staticClass:"text-left"},[t._v("S/No.")]),t._v(" "),a("th",[t._v("Repayment")]),t._v(" "),a("th",[t._v("Amount")]),t._v(" "),a("th",[t._v("Payment Method")]),t._v(" "),a("th",[t._v("Bank")]),t._v(" "),a("th",[t._v("Date")]),t._v(" "),a("th",[t._v("Collected By")]),t._v(" "),a("th",[t._v("Action")])]),t._v(" "),t._l(t.paymentForm.payments,function(e,s){return a("tr",[a("th",[t._v(t._s(s+1))]),t._v(" "),a("th",["add"===t.paymentFormType?a("div",{staticClass:"form-group mb-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[s].column,expression:"paymentForm.payments[index].column"}],staticClass:"form-control",attrs:{disabled:"",name:"date",type:"text"},domProps:{value:t.paymentForm.payments[s].column},on:{input:function(e){e.target.composing||t.$set(t.paymentForm.payments[s],"column",e.target.value)}}})]):a("select",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[s]._col,expression:"paymentForm.payments[index]._col"}],staticClass:"custom-select w-100",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.paymentForm.payments[s],"_col",e.target.multiple?a:a[0])}}},t._l(t.activeOrder.repaymentLevel,function(e){return a("option",{domProps:{value:e}},[t._v("\n                                                        "+t._s(t.$getColumn(e))+" Repayment\n                                                    ")])}))]),t._v(" "),a("th",[a("div",{staticClass:"form-group mb-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[s]._pay,expression:"paymentForm.payments[index]._pay"}],staticClass:"form-control",attrs:{name:"date",type:"text"},domProps:{value:t.paymentForm.payments[s]._pay},on:{input:function(e){e.target.composing||t.$set(t.paymentForm.payments[s],"_pay",e.target.value)}}})])]),t._v(" "),a("th",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[s]._payment_method,expression:"paymentForm.payments[index]._payment_method"}],staticClass:"custom-select w-100",attrs:{disabled:"edit"===t.paymentFormType},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.paymentForm.payments[s],"_payment_method",e.target.multiple?a:a[0])}}},t._l(t.getPaymentMethods,function(e){var s=e.name,n=e.id;return a("option",{domProps:{value:n}},[t._v("\n                                                        "+t._s(t._f("capitalize")(s))+"\n                                                    ")])}))]),t._v(" "),a("th",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[s]._payment_bank,expression:"paymentForm.payments[index]._payment_bank"}],staticClass:"custom-select w-100",attrs:{disabled:"edit"===t.paymentFormType},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.paymentForm.payments[s],"_payment_bank",e.target.multiple?a:a[0])}}},t._l(t.getBanks,function(e){var s=e.name,n=e.id;return a("option",{domProps:{value:n}},[t._v(t._s(s))])}))]),t._v(" "),a("th",[a("div",{staticClass:"form-group mb-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[s]._date,expression:"paymentForm.payments[index]._date"}],staticClass:"form-control",attrs:{disabled:"edit"===t.paymentFormType,name:"date",type:"date"},domProps:{value:t.paymentForm.payments[s]._date},on:{input:function(e){e.target.composing||t.$set(t.paymentForm.payments[s],"_date",e.target.value)}}})])]),t._v(" "),a("th",[a("div",{staticClass:"form-group mb-0"},[a("input",{staticClass:"form-control",attrs:{"data-vv-as":"date",disabled:"",name:"date",type:"text"},domProps:{value:t.user.name}})])]),t._v(" "),a("th",[a("button",{staticClass:"ml-2 btn status status-sm my-sm-2 not-approved",on:{click:function(e){t.deletePayment(s)}}},[a("i",{staticClass:"fas fa-times"})])])])})],2)])]):t._e()])]),t._v(" "),a("div",{staticClass:"modal-footer",class:{"d-flex justify-content-end":!t.canEditPayment}},[t.canAddPayment?a("button",{staticClass:"btn status my-sm-2",on:{click:function(e){t.addPaymentForm("add")}}},[t._v("\n                                Add Payment\n                            ")]):t._e(),t._v(" "),t.canEditPayment?a("button",{staticClass:"btn status my-sm-2",on:{click:function(e){t.addPaymentForm("edit")}}},[t._v("\n                                Edit Payment\n                            ")]):t._e(),t._v(" "),t.canEditPayment?a("button",{staticClass:"btn status my-sm-2 approved ml-4",on:{click:function(e){t.preparePayments()}}},[t._v("\n                                Click here to Submit Payment(s)!\n                            ")]):t._e(),t._v(" "),a("a",{staticClass:"text-link mt-3",staticStyle:{"text-align":"right"},attrs:{"data-dismiss":"modal",href:"javascript:"}},[t._v("\n                                close dialogue\n                            ")])])]):t._e()])])],1)])},staticRenderFns:[]}},EJ7O:function(t,e,a){var s=a("VU/8")(a("oKx2"),a("+O4B"),!1,null,null,null);t.exports=s.exports},HY2W:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=v(a("Xxa5")),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},r=a("NYxO"),o=a("ic49"),i=v(a("KVer")),l=v(a("K23+")),c=a("p/p5"),u=v(a("EJ7O")),d=v(a("4I72")),m=a("rN6N"),p=v(a("PASs")),h=v(a("9LRx")),f=a("cBeN");function v(t){return t&&t.__esModule?t:{default:t}}function _(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(n,r){try{var o=e[n](r),i=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(i).then(function(t){s("next",t)},function(t){s("throw",t)});t(i)}("next")})}}e.default={components:{CustomHeader:u.default,CustomerProfile:d.default,CustomSMSButton:p.default,AutocompleteSearch:h.default},data:function(){return{Order:m.Order,customer:null,customer_id:"",user:{name:i.default.state.user_name,id:i.default.state.user_id},show:!1,showModalContent:!1,activeOrder:null,headers:["Date","Order No.","Product Name","Total Product Price","Percentage","Down Payment","Repayment Plans"],paymentForm:null,paymentFormType:"add"}},methods:{updateView:function(){var t=_(s.default.mark(function t(e){var a,n,r=this;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.customer,n=e.user,a.length?(!(a=a[0]).document&&(a.document={id_card_url:"",passport_url:""}),this.user.branch=n.branch_id,this.customer=a,this.customer.orders=a.orders.map(function(t){var e=t;return e.customer=r.customer,new m.OrderWithPromiseCall(e,r.getAuthUserDetails.userId)}),this.show=!0):l.default.setError("Customer not found.",5e3),this.$LIPS(!1);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),processForm:function(t){var e=this;this.show=!1,this.$LIPS(!0),(0,c.get)("/api/customer/lookup/"+t).then(function(t){return e.updateView(t.data)}).catch(function(){e.$LIPS(!1),l.default.setError("Error Fetching customer detail")})},displayAmortization:function(t){return this.activeOrder=this.customer.orders[t],this.paymentForm={payments:[]},this.showModalContent=!0,$("#amortization").modal("toggle")},addPaymentForm:function(t){var e=this.activeOrder.repaymentLevel,a=parseInt(e+this.paymentForm.payments.length+1);if(t!==this.paymentFormType&&(this.paymentForm.payments=[]),!("edit"===t&&(e<1||this.paymentForm.payments.length>=e)||e===this.activeOrder._count||a>this.activeOrder._count)){this.paymentFormType=t;var s={_pay:this.activeOrder.amountsToBePaid[0],_date:this.$getDate(),_col:"",column:""};"add"===t&&(s._payment_bank="",s._payment_method=""),this.paymentForm.payments.push(s),this.reNumber()}},deletePayment:function(t){this.paymentForm.payments.splice(t,1),this.reNumber()},reNumber:function(){var t=this;this.paymentForm.payments.forEach(function(e,a){var s=t.activeOrder.repaymentLevel+a+1;t.paymentForm.payments[a]._col=s,t.paymentForm.payments[a].column=t.$getColumn(s)+" Repayment"})},preparePayments:function(){var t=this;if(this.canAddPayment){var e={};this.paymentForm.payments.forEach(function(a){var s={},r=t.$getColumn(a._col);s[r+"_pay"]=a._pay,s[r+"_date"]=a._date,"add"===t.paymentFormType&&(s[r+"_payment_bank"]=a._payment_bank,s[r+"_payment_method"]=a._payment_method),e=n({},e,s)}),this.activeOrder.payments=e,$.isEmptyObject(e)?l.default.setError("You have not added any payment."):this.savePayments()}},savePayments:function(){var t=this;if(this.canAddPayment){this.$LIPS(!0);var e,a,n=void 0,r=void 0,o=void 0;6===this.activeOrder.count&&(n="formal"),12===this.activeOrder.count&&(n="informal"),e={payments:this.activeOrder.payments,repayment_id:this.activeOrder.order.id,type:n},(0,c.post)("/api/repayment",e).then((a=_(s.default.mark(function a(i){return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.data.saved){a.next=13;break}return(r=t.customer.orders.find(function(t,a){var s=t.order.id===e.repayment_id;return s&&(o=a),s}).order)["repayment_"+n]=i.data.amortization,a.next=5,new m.Order(r,t.customer);case 5:return t.activeOrder=a.sent,t.customer.orders[o]=t.activeOrder,a.next=9,t.logAddedPayment(e);case 9:t.activeOrder.repaymentLevel===t.activeOrder.count&&t.sendPaymentCompleteSMS(),t.paymentForm={payments:[]},t.$scrollToTop(),t.$LIPS(!1);case 13:case"end":return a.stop()}},a,t)})),function(t){return a.apply(this,arguments)})).catch(function(){return l.default.setError("Error adding payment! Please try again later.")})}},sendPaymentCompleteSMS:function(){return null},logAddedPayment:function(t){var e=this.paymentForm.payments.map(function(t){return t.column.replace(/ /g,"_")}).join(" ")+". Order: ID: "+t.repayment_id+". Customer ID: "+this.customer_id;return(0,o.log)("Payment(s) added",e)},getOrderStatus:function(t){return(0,f.getOrderStatus)(t)},getOrderStatusClass:function(t){return(0,f.getOrderStatusClass)(t)}},computed:n({},(0,r.mapGetters)(["getBanks","getPaymentMethods","auth","getAuthUserDetails"]),{check:function(){return!(!this.$isProcessing&&this.customer_id)},canAddPayment:function(){return!!this.auth("FSLLead")||this.auth("supervisor")&&this.user.branch===this.activeOrder.branch.id},canEditPayment:function(){return!!this.auth("FSLLead")||this.auth("FSLAccess")&&this.user.branch===this.activeOrder.branch.id}}),created:function(){this.$prepareBanks(),this.$prepareBranches(),this.$preparePaymentMethods()}}},LgGm:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"CustomSMSButton d-flex align-items-center justify-content-center",on:{click:function(e){t.toggleModal("SMSModal")}}},[a("i",{staticClass:"fas fa-envelope"})])},staticRenderFns:[]}},N9TL:function(t,e,a){var s=a("VU/8")(a("HY2W"),a("B1o3"),!1,function(t){a("tPfa")},"data-v-4c466088",null);t.exports=s.exports},Or4O:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},n=a("NYxO"),r=a("nv24");e.default={props:["link","size","customer"],data:function(){return{status:null,unfilteredOptions:[{caption:"Change sales agent",modal:"toggleChangeCustomerManagerModal",authAccess:"DSACaptain"}]}},methods:{toggleModal:function(t){r.EventBus.$emit(t,this.customer)}},computed:s({},(0,n.mapGetters)(["auth"]),{filteredOptions:function(){var t=this;return this.unfilteredOptions.filter(function(e){return t.auth(e.authAccess)})},isApproved:function(){return this.$getCustomerApprovalStatus(this.customer.verification)},buttonClass:function(){return this.size&&(this.link?"status status-sm "+this.status:"status mt-md-5 my-sm-2 mt-0 "+this.status)},getLink:function(){if(this.link){if(this.auth("DVAAccess"))return"dva/"+this.link;if(this.auth("ALTARAPAYAccess"))return"altarapay/"+this.link}return"#"}}),created:function(){this.status=this.isApproved?"approved":"not-approved"}}},PASs:function(t,e,a){var s=a("VU/8")(a("UoNi"),a("LgGm"),!1,null,null,null);t.exports=s.exports},Re9q:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-relative d-flex align-items-stretch"},[a("router-link",{class:t.buttonClass+" text-uppercase",attrs:{tag:t.link?"a":"span",to:t.getLink,"data-function":"display"}},[t._v("\n        "+t._s(t.status.split("-").join(" "))+"\n        "),a("i",{class:"ml-3 fas fa-"+(t.isApproved?"check":"times")})]),t._v(" "),a("span",{class:t.buttonClass+" dropdown-toggle dropdown-toggle-split d-flex align-items-center",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),t._v(" "),a("div",{staticClass:"dropdown-menu"},t._l(t.filteredOptions,function(e){return a("a",{key:e.modal,staticClass:"dropdown-item",attrs:{href:"javascript:"},on:{click:function(a){t.toggleModal(e.modal)}}},[t._v("\n            "+t._s(e.caption)+"\n        ")])}))],1)},staticRenderFns:[]}},UoNi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("nv24");e.default={props:{order:{default:null},customer:{default:null}},methods:{toggleModal:function(t){s.EventBus.$emit(t,{order:this.order,customer:this.customer})}}}},WiSW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},n=u(a("I3G/")),r=a("NYxO"),o=a("nv24"),i=u(a("1gIg")),l=u(a("vRKz")),c=u(a("PASs"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={props:["viewCustomer"],components:{ApprovalStatusButton:l.default,AppNavigation:i.default,CustomSMSButton:c.default},data:function(){return{customer:"",show:!1}},computed:s({full:function(){return"full"===this.$route.meta.mode},passport:function(){return"https://s3.eu-west-2.amazonaws.com/altara-one/"+this.customer.document.passport_url},branch:function(){return this.customer.branch.description+" "+this.customer.branch.name},approved:function(){return this.$getCustomerApprovalStatus(this.customer.verification)}},(0,r.mapGetters)(["auth"])),created:function(){var t=this;$(".tooltip").remove(),this.viewCustomer&&this.setCustomer(this.viewCustomer),o.EventBus.$on("customer",function(e){return t.setCustomer(e)}),this.addCustomerOptionsModalsToDom()},methods:s({setCustomer:function(t){n.default.set(this.$data,"customer",t),this.show=!0}},(0,r.mapActions)("ModalAccess",["addCustomerOptionsModalsToDom","removeCustomerOptionsModalsFromDom"])),destroyed:function(){this.removeCustomerOptionsModalsFromDom()}}},cBeN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getOrderStatus=function(t){return t.order.status?t.order.status.name:0},e.getOrderStatusClass=function(t){if(t)switch(t.toLowerCase()){case"ok":return"ok";case"returned":return"returned";case"repossessed":return"repossessed"}}},"cb+m":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{class:t.full&&"px-md-4 px-2",staticStyle:{"margin-left":"5rem","margin-right":"5rem"}},[t.full?a("app-navigation",{attrs:{forward:{path:t.$routerHistory.next().path},previous:{path:t.$routerHistory.previous().path},pageTitle:"Customer Profile",pageTitleSmall:"Customer Profile"}}):t._e(),t._v(" "),t.show?a("div",{staticClass:"pt-md-3 pt-2 verification",attrs:{id:"employeeRegister"}},[a("div",{staticClass:"customer-profile card position-relative"},[a("div",{staticClass:"design"}),t._v(" "),a("div",{staticClass:"col-md-4 col-sm-4 col-12 px-0 pb-md-4 pb-sm-3 pb-0 pt-md-5 pt-4 float-left"},[a("div",{staticClass:"pt-md-3 pt-sm-2 pt-1"},[a("div",{staticClass:"justify-content-center d-flex position-relative z-1"},[a("span",{staticClass:"img-border"},[t.customer.document.passport_url?a("img",{staticClass:"profile-picture rounded-circle",attrs:{src:t.passport,alt:"customer profile pic"}}):a("i",{staticClass:"no-image fas fa-user-alt"})])]),t._v(" "),a("div",{staticClass:"justify-content-center d-flex position-relative z-1 pt-md-4 pt-sm-4 pt-2"},[a("span",{staticClass:"w-50"},[a("div",{staticClass:"text-right px-4 py-3 text-light text-muted m-0"},[t._v("\n                                    Status"),a("i",{staticClass:"ml-3 fas fa-briefcase"})]),t._v(" "),a("div",{staticClass:"data text-right px-4 py-3 m-0"},[t._v(t._s(t._f("capitalize")(t.customer.employment_status)))])]),t._v(" "),a("span",{staticClass:"separator"}),t._v(" "),a("span",{staticClass:"w-50"},[a("div",{staticClass:"px-4 py-3 text-muted text-light m-0"},[a("i",{staticClass:"mr-3 fas fa-transgender"}),t._v("Gender\n                                ")]),t._v(" "),a("div",{staticClass:"data px-4 py-3 m-0"},[t._v(t._s(t._f("capitalize")(t.customer.gender)))])])])])]),t._v(" "),a("div",{staticClass:"col-md-8 col-sm-8 col-12 px-0 pb-4 pt-md-5 pt-sm-5 pt-0 float-left"},[a("div",{staticClass:"pt-md-4 pt-0 clearfix"},[a("div",{staticClass:"float-left p-0 m-0 col-md-4 col-sm-6 small-center"},[a("h4",{staticClass:"mt-0 pt-md-5 pt-sm-4 pt-0 mb-md-5 mb-sm-4 mb-3"},[a("i",{staticClass:"mr-3 far fa-user-circle"}),t._v(" "),a("strong",[t._v(t._s(t._f("capitalize")(t.$getCustomerFullName(t.customer))))])])]),t._v(" "),a("div",{staticClass:"float-left p-0 m-0 col-md-4 col-sm-6 d-flex justify-content-center"},[a("h4",{staticClass:"mt-0 pt-md-5 pt-sm-4 pt-0 mb-md-5 mb-sm-4 mb-4 text-muted"},[a("strong",[t._v("Customer ID: "+t._s(t.customer.id))])]),t._v(" "),t.auth("DVAAccess")||t.auth("ALTARAPAYAccess")||t.auth("FSLAccess")?a("span",{staticClass:"mt-0 pt-md-4 pt-sm-3 pt-0 mb-md-5 mb-sm-4 mb-4 px-3"},[a("CustomSMSButton",{key:t.customer.id,attrs:{customer:t.customer}})],1):t._e()]),t._v(" "),a("div",{staticClass:"float-left p-0 m-0 col-md-4 col-12 d-flex justify-content-center"},[a("ApprovalStatusButton",{key:t.customer.id,attrs:{size:"big",customer:t.customer}})],1)]),t._v(" "),a("div",{staticClass:"pt-4"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{staticClass:"text-muted"},[a("i",{staticClass:"mr-3 fas fa-mobile-alt"}),t._v("Phone Number")]),t._v(" "),a("td",[t._v(t._s(t.customer.telephone))])]),t._v(" "),t.auth("DVAAccess")?a("tr",[a("th",{staticClass:"text-muted"},[a("i",{staticClass:"mr-3 fas fa-map-marker-alt"}),t._v("Address")]),t._v(" "),a("td",[t._v(t._s(t._f("capitalize")(t.$getCustomerAddress(t.customer)))+"\n                                ")])]):t._e(),t._v(" "),a("tr",[a("th",{staticClass:"text-muted"},[a("i",{staticClass:"mr-3 fas fa-gift"}),t._v("Registered On")]),t._v(" "),a("td",[t._v(t._s(t.customer.date_of_registration))])]),t._v(" "),a("tr",[a("th",{staticClass:"text-muted"},[a("i",{staticClass:"mr-3 far fa-user-circle"}),t._v("Registered By")]),t._v(" "),a("td",[t._v(t._s(t._f("capitalize")(t.customer.user?t.customer.user.full_name:"user not in record"))+"\n                                ")])]),t._v(" "),a("tr",[a("th",{staticClass:"text-muted"},[a("i",{staticClass:"mr-3 far fa-building"}),t._v("Branch")]),t._v(" "),a("td",[t._v(t._s(t._f("capitalize")(t.branch)))])])])])])])]),t._v(" "),t.full?a("div",[t._v("Full profile goes here")]):t._e()]):t._e()],1)])},staticRenderFns:[]}},g2HP:function(t,e,a){var s=a("vXGt");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("f19a964e",s,!0,{})},hUa2:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"pt-md-3 pt-2 attendance-view mb-4 z-2 position-relative",attrs:{id:"index"}},[a("custom-header",{attrs:{title:t.title}}),t._v(" "),a("div",{staticClass:"attendance-body"},[a("div",{staticClass:"p-5 row bg-white shadow-sm card-radius"},[a("div",{staticClass:"col px-0 px-md-3"},[a("div",{staticClass:"position-relative col-md-6 col-12 float-left typeahead",class:t.open&&"typeahead__open"},[a("div",{ref:"toggle",staticClass:"typeahead__toggle",on:{mousedown:function(e){return e.preventDefault(),t.toggle(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"search",staticClass:"typeahead__search",attrs:{type:"text"},domProps:{value:t.search},on:{blur:t.onBlur,focus:t.onFocus,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.onDownKey(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnterKey(e):null},function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,"Escape")?t.onEscape(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.onUpKey(e):null}],input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("span",{ref:"text",staticClass:"typeahead__text",domProps:{innerHTML:t._s(t.displayText)}})]),t._v(" "),t.open&&t.customers.length?a("ul",{staticClass:"typeahead__list"},t._l(t.customers,function(e,s){return a("li",{key:s,staticClass:"typeahead__item"},[a("a",{staticClass:"typeahead__link d-flex justify-content-between",class:t.selectIndex===s&&"typeahead__active",domProps:{innerHTML:t._s(t.getAutocomplete(e))},on:{mousedown:function(a){a.preventDefault(),t.select(e)}}})])})):t._e()]),t._v(" "),a("div",{staticClass:"col-md-6 col-12 float-left d-flex justify-content-around align-items-center"},t._l(t.searchColumns,function(e){var s=e.title,n=e.column;return a("span",{staticClass:"position-relative radio mb-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchColumn,expression:"searchColumn"}],attrs:{id:n,type:"radio"},domProps:{value:n,checked:t._q(t.searchColumn,n)},on:{change:function(e){t.searchColumn=n}}}),t._v(" "),a("label",{attrs:{for:n}},[t._v(t._s(t._f("capitalize")(s)))])])}))])])])],1)])},staticRenderFns:[]}},oKx2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:"",buttonTitle:null,to:null}}},rN6N:function(t,e,a){"use strict";var s,n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),r=a("I3G/"),o=(s=r)&&s.__esModule?s:{default:s},i=a("N71M");function l(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=new o.default,d=function(){function t(e,a){c(this,t),this._order=e,this._customer=a,this._paymentBanks=[],this._paymentMethods=[],this._actualPayDates=[],this._actualAmountsPaid=[],this._amountsToBePaid=[],this._repaymentCaptions=[],this._paymentStatusClasses=[],this._repaymentLevel=0,this._amountPaid=null,this._discountAmount=null,this._outstandingDebt=null,this._discountedTotal=null,this._defaultFee=null,this._totalPlusDefault=null,this._payments={},this.setIsOrderFormal(),this.setIsRepaymentValid(),this.setRepaymentData(),this.setCountAndInterval(),this.setCommonDetails(),this.setDueDates(),this.setPaymentStatusClasses(),this.calcAndSetPaymentSummary(),this.setBranch(),this.setDiscount()}return n(t,[{key:"setIsRepaymentValid",value:function(){this._isRepaymentValid=!(!this.order.repayment_formal&&!this.order.repayment_informal)}},{key:"setIsOrderFormal",value:function(){this._isOrderFormal=["formal","salaried"].includes(this._customer.employment_status.toLowerCase()),4===parseInt(this.order.payment_method_id)&&(this._isOrderFormal=!0)}},{key:"setRepaymentData",value:function(){null!=this.order.repayment_formal&&(this._repaymentData=this.order.repayment_formal),null!=this.order.repayment_informal&&(this._repaymentData=this.order.repayment_informal)}},{key:"setCountAndInterval",value:function(){var e=void 0,a=void 0;new Date(this.order.order_date)<=new Date("2019-07-07")?(null!=this.order.repayment_formal&&(e=28,a=6),null!=this.order.repayment_informal&&(e=14,a=12)):t.isBankDraftAvailable()&&this.isOrderFormal||4===parseInt(this.order.payment_method_id)?(e=28,a=6):(e=14,a=12),this._count=a,this._interval=e}},{key:"setDueDates",value:function(){this._dueDates=t.generateDueDates(this.order.order_date,this.interval,this.count)}},{key:"setCommonDetails",value:function(){if(this.isRepaymentValid)for(var t=1;t<this.count+1;t++){for(var e=u.$getColumn(t).split(""),a=[],s=1;s<=2;s++)a.unshift(e.pop());this._repaymentCaptions.push("<td>"+e.join("")+"<sup>"+a.join("")+"</sup></td>"),this._actualPayDates.push(this.repaymentData[u.$getColumn(t)+"_date"]),this._actualAmountsPaid.push(this.repaymentData[u.$getColumn(t)+"_pay"]),this._paymentBanks.push(this.repaymentData[u.$getColumn(t)+"_payment_bank"]),this._paymentMethods.push(this.repaymentData[u.$getColumn(t)+"_payment_method"]),this._amountsToBePaid.push(u.$roundDownAmt(this.order.repayment_amount)),this.repaymentData[u.$getColumn(t)+"_pay"]>0&&this._repaymentLevel++}}},{key:"setBranch",value:function(){var t=this;this.order.store_product?this._branch=i.store.state.branches.find(function(e){return parseInt(e.id)===parseInt(t.order.store_product.store_name)}):this._branch=null}},{key:"setPaymentStatusClasses",value:function(){if(this.isRepaymentValid)for(var e=1;e<this.count+1;e++){var a={class:null,icon:null},s=u.$getColumn(e),n=t.isPaymentDue(this.dueDates[e-1]),r=parseInt(this.repaymentData[s+"_pay"]);r?(a.class="paid",a.icon="fa-check"):n&&!r?(a.class="missed",a.icon="fa-times"):n||(a.class="pending",a.icon="fa-hourglass-start"),this._paymentStatusClasses.push(a)}}},{key:"calcAndSetPaymentSummary",value:function(){var t=function(t){return u.$formatCurrency(t)},e=this.order,a=e.repayment_amount,s=e.down_payment,n=e.product_price,r=6===this.count?.5:1,o=this.order.discount.percentage_discount,i=o>0?5===o?1:2:0,l=u.$roundDownAmt(a*r*i);this._discountAmount=t(l);var c=0,d=0;if(this.repaymentData){for(var m=0;m<this.count+1;m++){var p=parseInt(this.actualAmountsPaid[m]);d+=p?u.$roundDownAmt(p):0}c=u.$roundDownAmt(parseInt(s))+d+l}this._amountPaid=t(c);var h=u.$roundDownAmt(n-l);this._discountedTotal=t(h);var f=0;new Date(this.order.order_date)>new Date("2019-07-07")&&(f=500*[].length),this._defaultFee=t(f),this._totalPlusDefault=t(h+f),this._outstandingDebt=t(u.$roundDownAmt(parseInt(n)-c))}},{key:"setDiscount",value:function(){this._discount=this.order.discount.name+" "+this.order.discount.percentage_discount}},{key:"payments",set:function(t){this._payments=t},get:function(){return this._payments}},{key:"repaymentLevel",get:function(){return this._repaymentLevel}},{key:"order",get:function(){return this._order}},{key:"customer",get:function(){return this._customer}},{key:"isRepaymentValid",get:function(){return this._isRepaymentValid}},{key:"isOrderFormal",get:function(){return this._isOrderFormal}},{key:"repaymentData",get:function(){return this._repaymentData}},{key:"count",get:function(){return this._count}},{key:"interval",get:function(){return this._interval}},{key:"dueDates",get:function(){return this._dueDates}},{key:"paymentStatusClasses",get:function(){return this._paymentStatusClasses}},{key:"repaymentCaptions",get:function(){return this._repaymentCaptions}},{key:"paymentBanks",get:function(){return this._paymentBanks}},{key:"paymentMethods",get:function(){return this._paymentMethods}},{key:"actualPayDates",get:function(){return this._actualPayDates}},{key:"actualAmountsPaid",get:function(){return this._actualAmountsPaid}},{key:"amountsToBePaid",get:function(){return this._amountsToBePaid}},{key:"amountPaid",get:function(){return this._amountPaid}},{key:"discountAmount",get:function(){return this._discountAmount}},{key:"outstandingDebt",get:function(){return this._outstandingDebt}},{key:"discountedTotal",get:function(){return this._discountedTotal}},{key:"defaultFee",get:function(){return this._defaultFee}},{key:"totalPlusDefault",get:function(){return this._totalPlusDefault}},{key:"branch",get:function(){return this._branch}},{key:"discount",get:function(){return this._discount}},{key:"customerName",get:function(){return this.customer.first_name+" "+this.customer.last_name}},{key:"customerWGName",get:function(){var t=this.customer;return t.work_guarantor_first_name+" "+t.work_guarantor_last_name+" - "+t.work_guarantor_relationship}},{key:"customerPGName",get:function(){var t=this.customer;return t.personal_guarantor_first_name+" "+t.personal_guarantor_last_name+" - "+t.personal_guarantor_relationship}}],[{key:"generateDueDates",value:function(t,e,a){for(var s=[],n=0;n<a;n++){var r=new Date(t).addDays((n+1)*e),o=u.$getDate(r);s.push(o)}return s}},{key:"isPaymentDue",value:function(t){return new Date>new Date(t)}},{key:"isBankDraftAvailable",value:function(){return!1}},{key:"renderMessage",value:function(t){return t.sms?t.sms.message.replace(/%0a/g,"</br>"):t.feedback}},{key:"convertToName",value:function(t,e){return t?i.store.state[e].find(function(e){return e.id===t}).name:null}}]),t}(),m=function(t){function e(t,a){c(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,t.customer));return s._isReminderSent=!1,s._dvaId=a,s._isSelected=!1,s.setReminder(null),s.setIsReminderSent(),s.setFinancialStatus(),s.setPromiseCall(),s.generateAndSetNextSMSReminder(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,d),n(e,[{key:"setIsReminderSent",value:function(){var t=this,e=u.$getDate();!this.order.reminder||this.order.reminders.length<1||this.order.reminders.forEach(function(a){var s=a.date.split(" "),n=s[0].split("-"),r=s[1].split(":"),o=[].concat(l(n),l(r)).map(function(t){return parseInt(t,10)});o[1]--,u.$getDate(new Date(Date.UTC.apply(Date,l(o))))===e&&(t._isReminderSent=!0)})}},{key:"setFinancialStatus",value:function(){this._financialStatus=this.isRepaymentValid?"Paid: "+this.amountPaid+" | Debt: "+this.outstandingDebt:"no detail!"}},{key:"generateAndSetNextSMSReminder",value:function(){var t=null;this.order.store_product&&(t=this.order.store_product.product_name);var e=this.order,a=e.repayment_amount,s=void 0;e.order_date===u.$getDate()?(s="Hello "+this.customerName+", thanks for patronizing us. The following is the breakdown of the repayment plan for the purchase of "+t+":%0a",this.dueDates.forEach(function(t,e){return s+=u.$getColumn(e+1)+": "+t+" => "+u.$formatCurrency(u.$roundDownAmt(a))+"%0a"})):s="Hello "+this.customerName+", This is to remind you that your "+u.$getColumn(parseInt(this.repaymentLevel)+1)+" repayment of "+u.$formatCurrency(u.$roundDownAmt(a))+" for "+t+" will be due on "+this.dueDates[this.repaymentLevel]+". we will be expecting you.",this._nextSMSReminder=s+"Please remember to pay on time to avoid late fees and other penalties.%0aThank you."}},{key:"setReminder",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._reminder={type:t,feedback:null,is_visited:null,dva_id:this.dvaId,order_id:this.order.id.replace(/ +/g,""),customer_id:this.customer.id,canBeSelected:!this.isReminderSent,repayment_level:this.repaymentLevel+"/"+this.count},"sms"===t&&(this._reminder.contacts=this.customer.telephone),this._reminder.sms_id=e}},{key:"setPromiseCall",value:function(){this._promiseCall={order_id:this.order.id,user_id:this.dvaId,customer_id:this.customer.id,date:null}}},{key:"isSelected",set:function(t){this._isSelected=t},get:function(){return this._isSelected}},{key:"isReminderSent",get:function(){return this._isReminderSent}},{key:"dvaId",get:function(){return this._dvaId}},{key:"financialStatus",get:function(){return this._financialStatus}},{key:"nextSMSReminder",get:function(){return this._nextSMSReminder}},{key:"reminder",get:function(){return this._reminder}},{key:"promiseCall",get:function(){return this._promiseCall}}]),e}();t.exports={Order:d,OrderWithPromiseCall:m}},rjj0:function(t,e,a){var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n=a("tTVk"),r={},o=s&&(document.head||document.getElementsByTagName("head")[0]),i=null,l=0,c=!1,u=function(){},d=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t){for(var e=0;e<t.length;e++){var a=t[e],s=r[a.id];if(s){s.refs++;for(var n=0;n<s.parts.length;n++)s.parts[n](a.parts[n]);for(;n<a.parts.length;n++)s.parts.push(v(a.parts[n]));s.parts.length>a.parts.length&&(s.parts.length=a.parts.length)}else{var o=[];for(n=0;n<a.parts.length;n++)o.push(v(a.parts[n]));r[a.id]={id:a.id,refs:1,parts:o}}}}function f(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function v(t){var e,a,s=document.querySelector("style["+m+'~="'+t.id+'"]');if(s){if(c)return u;s.parentNode.removeChild(s)}if(p){var n=l++;s=i||(i=f()),e=g.bind(null,s,n,!1),a=g.bind(null,s,n,!0)}else s=f(),e=function(t,e){var a=e.css,s=e.media,n=e.sourceMap;s&&t.setAttribute("media",s);d.ssrId&&t.setAttribute(m,e.id);n&&(a+="\n/*# sourceURL="+n.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");if(t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}.bind(null,s),a=function(){s.parentNode.removeChild(s)};return e(t),function(s){if(s){if(s.css===t.css&&s.media===t.media&&s.sourceMap===t.sourceMap)return;e(t=s)}else a()}}t.exports=function(t,e,a,s){c=a,d=s||{};var o=n(t,e);return h(o),function(e){for(var a=[],s=0;s<o.length;s++){var i=o[s];(l=r[i.id]).refs--,a.push(l)}e?h(o=n(t,e)):o=[];for(s=0;s<a.length;s++){var l;if(0===(l=a[s]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete r[l.id]}}}};var _,y=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function g(t,e,a,s){var n=a?"":s.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var r=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}},tPfa:function(t,e,a){var s=a("zH+A");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("94345ef2",s,!0,{})},tTVk:function(t,e){t.exports=function(t,e){for(var a=[],s={},n=0;n<e.length;n++){var r=e[n],o=r[0],i={id:t+":"+n,css:r[1],media:r[2],sourceMap:r[3]};s[o]?s[o].parts.push(i):a.push(s[o]={id:o,parts:[i]})}return a}},vRKz:function(t,e,a){var s=a("VU/8")(a("Or4O"),a("Re9q"),!1,function(t){a("3eq/")},"data-v-decdc92c",null);t.exports=s.exports},vXGt:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".typeahead.typeahead__open .typeahead__text[data-v-55fc05de]{opacity:0}.typeahead.typeahead__open input[data-v-55fc05de]{color:hsla(210,9%,59%,.8)}.typeahead input[data-v-55fc05de]{color:hsla(210,9%,59%,0)}.typeahead__text>span[data-v-55fc05de]{padding-left:0!important}",""])},wBhk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["pageTitle","pageTitleSmall","previous","forward"]}},"zH+A":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".attendance-item[data-v-4c466088]{cursor:auto}",""])}});