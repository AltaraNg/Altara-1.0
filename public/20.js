webpackJsonp([20],{A7oB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("m2tk"),n=i(a),o=s("p/p5"),r=i(s("K23+"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{contacts:"",message:"",form:{}}},methods:{sendMessage:function(){var e=this;this.$validator.validateAll().then(function(t){if(t)if(e.$network()){e.$LIPS(!0);var s=new a.Message(null,e.message,e.contacts);n.default.sendMessage(s,function(t){return 200===t.status&&e.done(s)})}else e.$networkErr();else e.$networkErr("form")})},done:function(e){var t=this;this.$scrollToTop(),this.$LIPS(!1),r.default.setSuccess("Messages sent!"),(0,o.post)("/api/message",e).then(function(){return t.resetData()})},resetData:function(){for(var e in this.contacts=null,this.message=null,this.form)this.form[e]=null}},created:function(){this.resetData()}}},bZ5I:function(e,t,s){var a=s("VU/8")(s("A7oB"),s("c6jJ"),!1,function(e){s("svdf")},"data-v-241bacc9",null);e.exports=a.exports},c6jJ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"pt-md-3 pt-2",attrs:{id:"employeeRegister"}},[s("div",{staticClass:"card"},[s("ul",{staticClass:"nav nav-tabs bg-default justify-content-center"},[s("h6",[e._v("Messaging")])]),e._v(" "),s("div",{staticClass:"card-body p-4 "},[s("form",{staticClass:"clearfix",attrs:{id:"messaging"},on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[s("div",{staticClass:"form-group col-md-12 px-md-3 px-1 float-left"},[s("label",[e._v("Phone Numbers")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.contacts,expression:"contacts"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control col-sm-12",attrs:{name:"contacts",placeholder:"Kindly add the number and separate each with a semi-colon ';'",rows:"3"},domProps:{value:e.contacts},on:{input:function(t){t.target.composing||(e.contacts=t.target.value)}}}),e._v(" "),e.errors.first("contacts")?s("small",[e._v(e._s(e.errors.first("contacts")))]):e._e()]),e._v(" "),s("div",{staticClass:"form-group col-md-12 px-md-3 px-1 float-left"},[s("label",[e._v("Message Body")]),e._v(" "),s("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"form-control col-sm-12",attrs:{name:"message",placeholder:"the content of the message goes here",rows:"3"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),e.errors.first("message")?s("small",[e._v(e._s(e.errors.first("message")))]):e._e()]),e._v(" "),s("hr",{staticClass:"style-two"}),e._v(" "),s("div",{staticClass:"col-sm-12 ml-auto mr-auto mt-md-2 mt-0 px-md-3 px-1 mb-3 float-right"},[s("button",{staticClass:"btn btn-block btn-lg bg-default",attrs:{disabled:e.$isProcessing,type:"submit"}},[e._v("\n                            Send messages "),s("i",{staticClass:"far fa-paper-plane ml-1"})])])])])])])])},staticRenderFns:[]}},m2tk:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var a=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),n=s("p/p5");t.Message=function(){function e(t,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user_id=t,this.message=s,this.contacts=a.constructor===String?a.split(",").filter(function(e){return/\S/.test(e)}).map(function(e){return"234"+e.trim().substr(1)}).join(","):a,this.setPages(),this.setContactCount()}return a(e,[{key:"setContactCount",value:function(){this.contacts.constructor===String&&(this.contact_count=this.contacts.split(",").length),this.contacts.constructor===Array&&(this.contact_count=this.contacts.length)}},{key:"setPages",value:function(){this.pages=Math.ceil(this.message.length/160)}}]),e}();t.default={message:"",welcome:function(e){this.message="Welcome to Altara credit. Please secure your login details. Staff ID: "+e.loginID+", password: "+e.loginPassword,this.send(e)},customerReg:function(e){this.message="Dear "+e.first_name+" "+e.last_name+", Welcome to Altara Credit Limited, You are hereby invited to our showroom at "+e.branch.description+" to learn more about our offerings. Pick up products now and pay later. We look forward to seeing you. For more info contact: "+e.branch.phone_yoruba+". Your customer id is: "+e.id,this.send({phone:e.telephone.substr(1)})},passwordReset:function(e){this.message="Password reset successful! if your did not request for a new password kindly report back immediately, your staff ID is "+e.staff_id+", new password: "+e.password,this.send(e)},transfer:function(e){this.message="Transfer Successful, your new staff ID is "+e.loginID+" ",this.send(e)},sendWithCallback:function(e,t){var s=e.phone;(0,n.get)("/api/message/create?to="+s+"&message="+this.message).then(function(e){return 200===e.status&&console.log("sms sent successfully"),!!t&&t(e)}).catch(function(e){return!!t&&t(e)})},sendMessage:function(e,t){var s=e.contacts,a=e.message;(0,n.get)("/api/message/create?to="+s+"&message="+a).then(function(e){return 200===e.status&&console.log("sms sent successfully"),!!t&&t(e)}).catch(function(e){return!!t&&t(e)})},send:function(e){(0,n.get)("/api/message/create?to=234"+e.phone+"&message="+this.message).then(function(e){200===e.status&&console.log("sms sent successfully")})}}},svdf:function(e,t,s){var a=s("zdl0");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("6c99dbb0",a,!0,{})},zdl0:function(e,t,s){(e.exports=s("FZ+f")(!1)).push([e.i,"#messaging textarea[data-v-241bacc9]{font:500 1.5rem Raleway,sans-serif!important}",""])}});