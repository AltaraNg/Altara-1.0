webpackJsonp([20],{"+O4B":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-5 attendance-head"},[r("div",{staticClass:"mb-5 row align-items-center"},[r("div",{staticClass:"col-12 title-con"},[r("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),t.to?r("div",{staticClass:"row justify-content-end"},[r("router-link",{staticClass:"text-link mt-3",attrs:{to:t.to}},[t._v(t._s(t.buttonTitle))])],1):t._e()])])])},staticRenderFns:[]}},EJ7O:function(t,e,r){var a=r("VU/8")(r("oKx2"),r("+O4B"),!1,null,null,null);t.exports=a.exports},U5lv:function(t,e,r){var a=r("VU/8")(r("rMhB"),r("gFyd"),!1,null,null,null);t.exports=a.exports},gFyd:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{staticClass:"pt-md-3 pt-2 attendance-view",attrs:{id:"index"}},[r("custom-header",{attrs:{to:"/log/products",title:t.mode+" product","button-title":"view Products!"}}),t._v(" "),r("div",{staticClass:"attendance-body"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.onSave(e)}}},[r("div",{staticClass:"my-4 clearfix p-5 row bg-white shadow-sm card-radius"},[r("div",{staticClass:"form-group col-md-6 col-12 float-left px-0 px-md-3"},[r("label",[t._v("Product name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{disabled:"",placeholder:"product name",type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),t.error.name?r("small",[t._v(t._s(t.error.name[0]))]):t._e()]),t._v(" "),r("div",{staticClass:"form-group col-md-6 col-12 float-left px-0 px-md-3"},[r("label",[t._v("Product feature")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.feature,expression:"form.feature"},{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"form-control",attrs:{name:"feature",placeholder:"product feature",type:"text"},domProps:{value:t.form.feature},on:{input:function(e){e.target.composing||t.$set(t.form,"feature",e.target.value)}}}),t._v(" "),t.errors.first("feature")?r("small",[t._v(t._s(t.errors.first("feature")))]):t._e()]),t._v(" "),r("div",{staticClass:"spaceBetween mb-md-2 mb-0"}),t._v(" "),r("div",{staticClass:"form-group col-md-6 col-12 float-left px-0 px-md-3"},[r("label",[t._v("Brand ID")]),t._v(" "),r("typeahead",{attrs:{options:t.brands,caption:"name"},model:{value:t.form.brand_id,callback:function(e){t.$set(t.form,"brand_id",e)},expression:"form.brand_id"}})],1),t._v(" "),r("div",{staticClass:"form-group col-md-6 col-12 float-left px-0 px-md-3"},[r("label",[t._v("Category ID")]),t._v(" "),r("typeahead",{attrs:{options:t.categories,caption:"name"},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}})],1),t._v(" "),r("div",{staticClass:"spaceBetween mb-md-2 mb-0"}),t._v(" "),r("div",{staticClass:"form-group col-md-6 col-12 float-left px-0 px-md-3"},[r("label",[t._v("Retail Price")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.retail_price,expression:"form.retail_price"},{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"form-control",attrs:{name:"price",placeholder:"retail price",type:"number"},domProps:{value:t.form.retail_price},on:{input:function(e){e.target.composing||t.$set(t.form,"retail_price",e.target.value)}}}),t._v(" "),t.errors.first("price")?r("small",[t._v(t._s(t.errors.first("price")))]):t._e()])]),t._v(" "),r("div",{staticClass:"mb-5 px-0 row align-items-center"},[r("div",{staticClass:"clearfix d-flex justify-content-end w-100"},["edit"===t.mode?r("router-link",{staticClass:"mx-5 text-link mt-4 pt-2",attrs:{to:"/log/products"}},[t._v("\n                            Cancel\n                        ")]):t._e(),t._v(" "),r("button",{staticClass:"btn bg-default",attrs:{disabled:t.$isProcessing,type:"submit"}},[t._v("\n                            "+t._s(t._f("capitalize")(t.mode))+" Product "),r("i",{staticClass:"far fa-paper-plane ml-1"})])],1)])])])],1)])},staticRenderFns:[]}},oKx2:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:"",buttonTitle:null,to:null}}},rMhB:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=d(r("I3G/")),o=r("ic49"),s=d(r("K23+")),i=r("p/p5"),n=d(r("GqYo")),l=d(r("EJ7O"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Typeahead:n.default,CustomHeader:l.default},props:{},data:function(){return{form:{},categories:[],brands:[],mode:null,error:{},show:!1,store:"/api/product",method:"POST"}},beforeRouteEnter:function(t,e,r){(0,i.get)(function(t){return{create:"/api/product/create",edit:"/api/product/"+t.params.id+"/edit"}[t.meta.mode]}(t)).then(function(t){var e=t.data;return r(function(t){return t.prepareForm(e)})}).catch(function(){return r(function(){return s.default.setError("Error Preparing form")})})},methods:{prepareForm:function(t){a.default.set(this.$data,"mode",this.$route.meta.mode),a.default.set(this.$data,"form",t.form),a.default.set(this.$data,"brands",t.brands),a.default.set(this.$data,"categories",t.categories),"edit"===this.mode&&(this.store="/api/product/"+this.$route.params.id,this.method="PUT"),this.show=!0},onSave:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.$network()?(t.$LIPS(!0),(0,i.byMethod)(t.method,t.store,t.form).then(function(e){var r=e.data;(r.saved||r.updated)&&((0,o.log)(r.log,r.staff_id),a.default.set(t.$data,"form",r.form),s.default.setSuccess(r.message,5e3),r.updated&&t.$router.push("/log/products"))}).catch(function(e){var r=e.response,a=r.data;422===r.status&&(t.error=a.errors?a.errors:a,t.$networkErr("unique"))}).finally(function(){t.$scrollToTop(),t.$LIPS(!1)})):t.$networkErr():t.$networkErr("form")})}},watch:{form:{handler:function(t){var e=this.brands.find(function(e){return e.id===t.brand_id}),r=this.categories.find(function(e){return e.id===t.category_id});a.default.set(this.$data.form,"name",t.feature+" "+(e?e.name:"")+" "+(r?r.name:""))},deep:!0}}}}});