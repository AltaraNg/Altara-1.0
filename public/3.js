webpackJsonp([3],{"+O4B":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-5 attendance-head"},[r("div",{staticClass:"mb-5 row align-items-center"},[r("div",{staticClass:"col-12 title-con"},[r("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),t.to?r("div",{staticClass:"row justify-content-end"},[r("router-link",{staticClass:"text-link mt-3",attrs:{to:t.to}},[t._v(t._s(t.buttonTitle))])],1):t._e()])])])},staticRenderFns:[]}},"1gIg":function(t,e,r){var a=r("VU/8")(r("wBhk"),r("9sZT"),!1,null,null,null);t.exports=a.exports},"4I72":function(t,e,r){var a=r("VU/8")(r("WiSW"),r("N7G7"),!1,null,null,null);t.exports=a.exports},"9sZT":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h4",{staticClass:"mx-md-3 mx-0 py-0 my-0 text-center clearfix",attrs:{id:"app-navigation"}},[t.$routerHistory.hasPrevious()?r("router-link",{staticClass:"text-secondary float-left ml-1 pl-2 ml-sm-4 pl-sm-3",attrs:{to:t.previous,id:"back"}},[r("span",{staticClass:"mr-5 float-left"},[r("i",{staticClass:"far fa-arrow-alt-circle-left float-left"}),t._v(" "),r("small",{staticClass:"float-left ml-2 d-none d-sm-block"},[t._v("Back")])])]):t._e(),t._v(" "),r("strong",{staticClass:"mx-auto w-100 float-left",attrs:{"data-title":"title"}},[r("span",{staticClass:"d-none d-sm-block"},[t._v(t._s(t.pageTitle))]),t._v(" "),r("span",{staticClass:"d-block d-sm-none"},[t._v(t._s(t.pageTitleSmall))])]),t._v(" "),t.$routerHistory.hasForward()?r("router-link",{staticClass:"text-secondary float-right mr-1 pr-2 mr-sm-4 pr-sm-3",attrs:{to:t.forward,id:"forward"}},[r("span",{staticClass:"ml-5 float-right"},[r("i",{staticClass:"far fa-arrow-alt-circle-right float-right"}),t._v(" "),r("small",{staticClass:"float-right mr-2 d-none d-sm-block"},[t._v("Forward")])])]):t._e()],1)},staticRenderFns:[]}},EJ7O:function(t,e,r){var a=r("VU/8")(r("oKx2"),r("+O4B"),!1,null,null,null);t.exports=a.exports},HY2W:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=f(r("Xxa5")),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},s=(f(r("I3G/")),r("NYxO")),i=r("ic49"),o=f(r("KVer")),c=f(r("K23+")),u=r("m2tk"),l=r("p/p5"),d=r("rN6N"),m=f(r("EJ7O")),p=f(r("4I72"));function f(t){return t&&t.__esModule?t:{default:t}}function h(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function a(n,s){try{var i=e[n](s),o=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}e.default={components:{CustomHeader:m.default,CustomerProfile:p.default},data:function(){return{Order:d.Order,customer:null,customer_id:"",user:{name:o.default.state.user_name,id:o.default.state.user_id},show:!1,showModalContent:!1,activeOrder:null,headers:["Date","Order No.","Product Name","Total Product Price","Percentage","Down Payment","Repayment Plans"],paymentForm:null,canAddPayment:null}},methods:{updateView:function(){var t=h(a.default.mark(function t(e){var r,n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.customer,n=e.user,r.length?((r=r[0]).document.id||(r.document={id_card_url:"",passport_url:""}),this.user.branch=n.branch_id,this.customer=r,this.customer.orders=r.orders.map(function(t){return new d.Order(t,r)}),this.show=!0):c.default.setError("Customer not found.",5e3),this.$LIPS(!1);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),processForm:function(){var t=this;this.show=!1,this.$LIPS(!0),(0,l.get)("/api/customer/lookup/"+this.customer_id).then(function(e){return t.updateView(e.data)}).catch(function(){t.$LIPS(!1),c.default.setError("Error Fetching customer detail")})},displayAmortization:function(t){return this.activeOrder=this.customer.orders[t],this.canAddPayment=this.canUserAddPayment,this.paymentForm={payments:[]},this.showModalContent=!0,$("#amortization").modal("toggle")},addPaymentForm:function(){var t=this.activeOrder.repaymentLevel,e=parseInt(t+this.paymentForm.payments.length+1);t!==this.activeOrder._count&&(e>this.activeOrder._count||(this.paymentForm.payments.push({_pay:this.activeOrder.amountsToBePaid[0],_date:this.$getDate(),_payment_method:"",_payment_bank:"",_col:"",column:""}),this.reNumber()))},deletePayment:function(t){this.paymentForm.payments.splice(t,1),this.reNumber()},reNumber:function(){var t=this;this.paymentForm.payments.forEach(function(e,r){var a=t.activeOrder.repaymentLevel+r+1;t.paymentForm.payments[r]._col=a,t.paymentForm.payments[r].column=t.$getColumn(a)+" Repayment"})},preparePayments:function(){var t=this;if(this.canAddPayment){var e={};this.paymentForm.payments.forEach(function(r){var a={},s=t.$getColumn(r._col);a[s+"_pay"]=r._pay,a[s+"_date"]=r._date,a[s+"_payment_bank"]=r._payment_bank,a[s+"_payment_method"]=r._payment_method,e=n({},e,a)}),this.activeOrder.payments=e,$.isEmptyObject(e)?c.default.setError("You have not added any payment."):this.savePayments()}},savePayments:function(){var t=this;if(this.canAddPayment){this.$LIPS(!0);var e,r,n=void 0,s=void 0,i=void 0;6===this.activeOrder.count&&(n="formal"),12===this.activeOrder.count&&(n="informal"),e={payments:this.activeOrder.payments,repayment_id:this.activeOrder.order.id,type:n},(0,l.post)("/api/repayment",e).then((r=h(a.default.mark(function r(o){return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!o.data.saved){r.next=13;break}return(s=t.customer.orders.find(function(t,r){var a=t.order.id===e.repayment_id;return a&&(i=r),a}).order)["repayment_"+n]=o.data.amortization,r.next=5,new d.Order(s,t.customer);case 5:return t.activeOrder=r.sent,t.customer.orders[i]=t.activeOrder,r.next=9,t.logAddedPayment(e);case 9:t.activeOrder.repaymentLevel===t.activeOrder.count&&t.sendPaymentCompleteSMS(),t.paymentForm={payments:[]},t.$scrollToTop(),t.$LIPS(!1);case 13:case"end":return r.stop()}},r,t)})),function(t){return r.apply(this,arguments)})).catch(function(){return c.default.setError("Error adding payment! Please try again later.")})}},sendPaymentCompleteSMS:function(){var t="Dear "+this.activeOrder.customerName+", you have successfully completed your payment for "+this.activeOrder.order.store_product.product_name+". Thanks for patronizing us.";new u.Message(t,this.activeOrder.customer.telephone).send(function(t){return 200===t.status&&c.default.setSuccess("Repayments Completed. SMS sent.")})},logAddedPayment:function(t){var e=this.paymentForm.payments.map(function(t){return t.column.replace(/ /g,"_")}).join(" ")+". Order: ID: "+t.repayment_id+". Customer ID: "+this.customer_id;return(0,i.log)("Payment(s) added",e)}},computed:n({},(0,s.mapGetters)(["getBanks","getPaymentMethods","auth"]),{check:function(){return!(!this.$isProcessing&&this.customer_id)},canUserAddPayment:function(){return this.auth("supervisor")&&this.user.branch===this.activeOrder.branch.id}}),created:function(){this.$prepareBanks(),this.$prepareBranches(),this.$preparePaymentMethods()}}},JoKY:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{attrs:{id:"reminder"}},[r("div",{staticClass:"mt-5 attendance-head"},[r("div",{staticClass:"card"},[r("ul",{staticClass:"nav nav-tabs bg-default justify-content-center"},[r("h6",[t._v("Customer Lookup")])]),t._v(" "),r("div",{staticClass:"card-body p-4"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.processForm(e)}}},[r("div",{staticClass:"m-0 p-0 col-12 form-group clearfix"},[r("label",{staticClass:"w-100"},[t._v("Customer ID")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_id,expression:"customer_id"},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"form-control col-lg-9 col-md-8 col-sm-8 col-12 float-left mt-1",attrs:{"data-vv-as":"customer id",name:"customer_id"},domProps:{value:t.customer_id},on:{onkeyUp:t.check,input:function(e){e.target.composing||(t.customer_id=e.target.value)}}}),t._v(" "),r("div",{staticClass:"col-lg-3 col-md-4 col-sm-4 col-12 float-right px-md-3 mt-md-0 px-sm-3 mt-sm-0 mt-2 px-0"},[r("button",{staticClass:"btn btn-block bg-default my-1",attrs:{disabled:t.check,type:"submit"}},[t._v("\n                                    Fetch customer details "),r("i",{staticClass:"far fa-paper-plane ml-1"})])]),t._v(" "),t.errors.has("customer_id")?r("small",{staticClass:"form-text text-muted w-100"},[t._v("\n                                "+t._s(t.errors.first("customer_id"))+"\n                            ")]):t._e()])])])])]),t._v(" "),r("transition",{attrs:{name:"fade"}},[t.customer&&t.show?r("div",[r("div",{staticClass:"attendance-head"},[r("customer-profile",{attrs:{"view-customer":t.customer}})],1),t._v(" "),r("custom-header",{attrs:{title:"All order(s)"}}),t._v(" "),r("div",{staticClass:"mt-5 mb-3 attendance-head"},[r("div",{staticClass:"row px-4 pt-3 pb-4 text-center"},[r("div",{staticClass:"col light-heading",staticStyle:{"max-width":"100px"}},[t._v("S/No.")]),t._v(" "),t._l(t.headers,function(e){return r("div",{staticClass:"col light-heading"},[t._v(t._s(e))])})],2)]),t._v(" "),r("div",{staticClass:"tab-content mt-1 attendance-body"},[t.show&&t.customer.orders.length>0?r("div",{staticClass:"tab-pane active text-center"},t._l(t.customer.orders,function(e,a){return r("div",{staticClass:"mb-3 row attendance-item"},[r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center",staticStyle:{"max-width":"100px"}},[r("span",{staticClass:"user mx-auto"},[t._v(t._s(a+1))])]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                "+t._s(e.order.order_date)+"\n                            ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex user-name align-items-center justify-content-center"},[t._v("\n                                "+t._s(e.order.id)+"\n                            ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-3 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                "+t._s(e.order.store_product.product_name)+"\n                            ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                "+t._s(t.$formatCurrency(e.order.product_price))+"\n                            ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                "+t._s(e.order.sales_category.name)+"\n                            ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[t._v("\n                                "+t._s(t.$formatCurrency(e.order.down_payment))+"\n                            ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center"},[r("button",{staticClass:"btn status my-sm-2",class:e.count===e.repaymentLevel?"approved":"pending",on:{click:function(e){t.displayAmortization(a)}}},[t._v("\n                                    View Plan\n                                    "),r("i",{staticClass:"fas ml-3",class:e.count===e.repaymentLevel?"fa-check-circle":"fa-hourglass-half",staticStyle:{"font-size":"1.4rem"}})])])])})):r("div",{staticClass:"tab-pane active text-center"},[r("div",{staticClass:"mb-3 row attendance-item"},[r("div",{staticClass:"col d-flex light-heading align-items-center justify-content-center"},[t._v("\n                                No records found!\n                            ")])])])]),t._v(" "),r("div",{staticClass:"mt-5 mb-3 attendance-head"},[r("div",{staticClass:"w-100 my-5 mx-0 hr"})])],1):t._e()]),t._v(" "),r("div",{staticClass:"modal fade repayment",attrs:{id:"amortization"}},[r("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[t.showModalContent?r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header py-2"},[r("h6",{staticClass:"modal-title py-1"},[t._v("\n                            Repayment Plan/Summary - "+t._s(t._f("capitalize")(t.customer.employment_status))+"\n                        ")]),t._v(" "),r("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[r("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[r("i",{staticClass:"fas fa-times"})])])]),t._v(" "),r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[r("h5",{staticClass:"mt-3 mb-0"},[t._v("Order Information")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",[r("tr",{staticClass:"table-separator"},[r("td",[t._v("Name")]),t._v(" "),r("td",[t._v("Order Id")]),t._v(" "),r("td",[t._v("Product")]),t._v(" "),r("th",[t._v("Branch")])]),t._v(" "),r("tr",[r("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.activeOrder.customerName)+"\n                                    ")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.order.id))]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.order.store_product.product_name))]),t._v(" "),r("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.activeOrder.branch.name))])])])]),t._v(" "),r("h5",{staticClass:"mt-5 mb-0"},[t._v("Amortization Schedule")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",[r("th",[t._v("Repayment")]),t._v(" "),t._l(t.activeOrder.repaymentCaptions,function(e){return r("td",{domProps:{innerHTML:t._s(e)}})})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Due Date")]),t._v(" "),t._l(t.activeOrder.dueDates,function(e){return r("td",[t._v(t._s(e))])})],2),t._v(" "),r("tr",[r("th",[t._v("Actual Pay Day")]),t._v(" "),t._l(t.activeOrder.actualPayDates,function(e){return r("td",[t._v(t._s(e))])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Status")]),t._v(" "),t._l(t.activeOrder.paymentStatusClasses,function(t){return r("td",{class:t.class},[r("i",{staticClass:"fas",class:t.icon})])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Repayment Amount")]),t._v(" "),t._l(t.activeOrder.amountsToBePaid,function(e){return r("td",[t._v("\n                                        "+t._s(t.$formatCurrency(e))+"\n                                    ")])})],2),t._v(" "),r("tr",[r("th",[t._v("Actual Amount Paid")]),t._v(" "),t._l(t.activeOrder.actualAmountsPaid,function(e){return r("td",[t._v("\n                                        "+t._s(t.$formatCurrency(e))+"\n                                    ")])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Payment Method")]),t._v(" "),t._l(t.activeOrder.paymentMethods,function(e){return r("td",{staticClass:"text-capitalize"},[t._v("\n                                        "+t._s(t.Order.convertToName(e,"paymentMethods"))+"\n                                    ")])})],2),t._v(" "),r("tr",[r("th",[t._v("Bank")]),t._v(" "),t._l(t.activeOrder.paymentBanks,function(e){return r("td",{staticClass:"text-capitalize"},[t._v("\n                                        "+t._s(t.Order.convertToName(e,"banks"))+"\n                                    ")])})],2)])]),t._v(" "),r("h5",{staticClass:"mt-5 mb-0"},[t._v("Payment Summary")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",{staticClass:"table-separator"},[r("td",{staticClass:"text-left"},[t._v("Discount Detail (%)")]),t._v(" "),r("th",[t._v(t._s(t._f("capitalize")(t.activeOrder.discount)))]),t._v(" "),r("td",[t._v("Total Before Discount")]),t._v(" "),r("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.product_price))))]),t._v(" "),r("td",[t._v("Total Paid (+discount)")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.amountPaid))])]),t._v(" "),r("tr",[r("td",{staticClass:"text-left"},[t._v("Discount Amount")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.discountAmount))]),t._v(" "),r("td",[t._v("Total After Discount")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.discountedTotal))]),t._v(" "),r("td",[t._v("Total Debt")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.outstandingDebt))])]),t._v(" "),r("tr",[r("td",{staticClass:"text-left"},[t._v("Down Payment")]),t._v(" "),r("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.down_payment))))]),t._v(" "),r("td",[t._v("Total Plus Default Fee")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.totalPlusDefault))]),t._v(" "),r("td",[t._v("Default Fee")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.defaultFee))])])])]),t._v(" "),t.canAddPayment?r("h5",{staticClass:"mt-5 mb-0"},[t._v("Add a new payment")]):t._e(),t._v(" "),t.canAddPayment?r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",{staticClass:"table-separator"},[r("td",{staticClass:"text-left"},[t._v("S/No.")]),t._v(" "),r("th",[t._v("Repayment")]),t._v(" "),r("th",[t._v("Amount")]),t._v(" "),r("th",[t._v("Payment Method")]),t._v(" "),r("th",[t._v("Bank")]),t._v(" "),r("th",[t._v("Date")]),t._v(" "),r("th",[t._v("Collected By")]),t._v(" "),r("th",[t._v("Action")])]),t._v(" "),t._l(t.paymentForm.payments,function(e,a){return r("tr",[r("th",[t._v(t._s(a+1))]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[a].column,expression:"paymentForm.payments[index].column"}],staticClass:"form-control",attrs:{name:"date",type:"text",disabled:""},domProps:{value:t.paymentForm.payments[a].column},on:{input:function(e){e.target.composing||t.$set(t.paymentForm.payments[a],"column",e.target.value)}}})])]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[a]._pay,expression:"paymentForm.payments[index]._pay"}],staticClass:"form-control",attrs:{name:"date",type:"text"},domProps:{value:t.paymentForm.payments[a]._pay},on:{input:function(e){e.target.composing||t.$set(t.paymentForm.payments[a],"_pay",e.target.value)}}})])]),t._v(" "),r("th",[r("select",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[a]._payment_method,expression:"paymentForm.payments[index]._payment_method"}],staticClass:"custom-select w-100",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.paymentForm.payments[a],"_payment_method",e.target.multiple?r:r[0])}}},t._l(t.getPaymentMethods,function(e){var a=e.name,n=e.id;return r("option",{domProps:{value:n}},[t._v("\n                                                "+t._s(t._f("capitalize")(a))+"\n                                            ")])}))]),t._v(" "),r("th",[r("select",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[a]._payment_bank,expression:"paymentForm.payments[index]._payment_bank"}],staticClass:"custom-select w-100",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.paymentForm.payments[a],"_payment_bank",e.target.multiple?r:r[0])}}},t._l(t.getBanks,function(e){var a=e.name,n=e.id;return r("option",{domProps:{value:n}},[t._v(t._s(a))])}))]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentForm.payments[a]._date,expression:"paymentForm.payments[index]._date"}],staticClass:"form-control",attrs:{name:"date",type:"date"},domProps:{value:t.paymentForm.payments[a]._date},on:{input:function(e){e.target.composing||t.$set(t.paymentForm.payments[a],"_date",e.target.value)}}})])]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{staticClass:"form-control",attrs:{"data-vv-as":"date",name:"date",type:"text",disabled:""},domProps:{value:t.user.name}})])]),t._v(" "),r("th",[r("button",{staticClass:"ml-2 btn status status-sm my-sm-2 not-approved",on:{click:function(e){t.deletePayment(a)}}},[r("i",{staticClass:"fas fa-times"})])])])})],2)]):t._e()])]),t._v(" "),r("div",{staticClass:"modal-footer",class:{"d-flex justify-content-end":!t.canAddPayment}},[t.canAddPayment?r("button",{staticClass:"btn status my-sm-2",on:{click:function(e){t.addPaymentForm()}}},[t._v("\n                            Add Payment\n                        ")]):t._e(),t._v(" "),t.canAddPayment?r("button",{staticClass:"btn status my-sm-2 approved ml-4",on:{click:function(e){t.preparePayments()}}},[t._v("\n                            Click here to Submit Payment(s)!\n                        ")]):t._e(),t._v(" "),r("a",{staticClass:"text-link mt-3",staticStyle:{"text-align":"right"},attrs:{"data-dismiss":"modal",href:"javascript:"}},[t._v("close dialogue")])])]):t._e()])])],1)])},staticRenderFns:[]}},N7G7:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{class:t.full&&"px-md-4 px-2"},[t.full?r("app-navigation",{attrs:{forward:{path:t.$routerHistory.next().path},previous:{path:t.$routerHistory.previous().path},pageTitle:"Customer Profile",pageTitleSmall:"Customer Profile"}}):t._e(),t._v(" "),t.show?r("div",{staticClass:"pt-md-3 pt-2 verification",attrs:{id:"employeeRegister"}},[r("div",{staticClass:"customer-profile card position-relative"},[r("div",{staticClass:"design"}),t._v(" "),r("div",{staticClass:"col-md-4 col-sm-4 col-12 px-0 pb-md-4 pb-sm-3 pb-0 pt-md-5 pt-4 float-left"},[r("div",{staticClass:"pt-md-3 pt-sm-2 pt-1"},[r("div",{staticClass:"justify-content-center d-flex position-relative z-1"},[r("span",{staticClass:"img-border"},[t.customer.document.passport_url?r("img",{staticClass:"profile-picture rounded-circle",attrs:{src:t.passport,alt:"customer profile pic"}}):r("i",{staticClass:"no-image fas fa-user-alt"})])]),t._v(" "),r("div",{staticClass:"justify-content-center d-flex position-relative z-1 pt-md-4 pt-sm-4 pt-2"},[r("span",{staticClass:"w-50"},[r("div",{staticClass:"text-right px-4 py-3 text-light text-muted m-0"},[t._v("\n                                    Status"),r("i",{staticClass:"ml-3 fas fa-briefcase"})]),t._v(" "),r("div",{staticClass:"data text-right px-4 py-3 m-0"},[t._v(t._s(t._f("capitalize")(t.customer.employment_status)))])]),t._v(" "),r("span",{staticClass:"separator"}),t._v(" "),r("span",{staticClass:"w-50"},[r("div",{staticClass:"px-4 py-3 text-muted text-light m-0"},[r("i",{staticClass:"mr-3 fas fa-transgender"}),t._v("Gender\n                                ")]),t._v(" "),r("div",{staticClass:"data px-4 py-3 m-0"},[t._v(t._s(t._f("capitalize")(t.customer.gender)))])])])])]),t._v(" "),r("div",{staticClass:"col-md-8 col-sm-8 col-12 px-0 pb-4 pt-md-5 pt-sm-5 pt-0 float-left"},[r("div",{staticClass:"pt-md-4 pt-0 clearfix"},[r("div",{staticClass:"float-left p-0 m-0 col-md-4 col-sm-6 small-center"},[r("h4",{staticClass:"mt-0 pt-md-5 pt-sm-4 pt-0 mb-md-5 mb-sm-4 mb-3"},[r("i",{staticClass:"mr-3 far fa-user-circle"}),t._v(" "),r("strong",[t._v(t._s(t._f("capitalize")(t.$getCustomerFullName(t.customer))))])])]),t._v(" "),r("div",{staticClass:"float-left p-0 m-0 col-md-4 col-sm-6 d-flex justify-content-center"},[r("h4",{staticClass:"mt-0 pt-md-5 pt-sm-4 pt-0 mb-md-5 mb-sm-4 mb-4 text-muted"},[r("strong",[t._v("Customer ID: "+t._s(t.customer.id))])])]),t._v(" "),r("div",{staticClass:"float-left p-0 m-0 col-md-4 col-12 d-flex justify-content-center"},[r("span",{class:"status mt-md-5 my-sm-2 mt-0 "+(t.approved?"approved":"not-approved")},[t._v("\n                                "+t._s(t.approved?"APPROVED":"NOT APPROVED")+"\n                                "),r("i",{class:"ml-3 fas fa-"+(t.approved?"check":"times")})])])]),t._v(" "),r("div",{staticClass:"pt-4"},[r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("th",{staticClass:"text-muted"},[r("i",{staticClass:"mr-3 fas fa-mobile-alt"}),t._v("Phone Number")]),t._v(" "),r("td",[t._v(t._s(t.customer.telephone))])]),t._v(" "),t.$store.getters.auth("DVAAccess")?r("tr",[r("th",{staticClass:"text-muted"},[r("i",{staticClass:"mr-3 fas fa-map-marker-alt"}),t._v("Address")]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(t.$getCustomerAddress(t.customer)))+"\n                                ")])]):t._e(),t._v(" "),r("tr",[r("th",{staticClass:"text-muted"},[r("i",{staticClass:"mr-3 fas fa-gift"}),t._v("Registered On")]),t._v(" "),r("td",[t._v(t._s(t.customer.date_of_registration))])]),t._v(" "),r("tr",[r("th",{staticClass:"text-muted"},[r("i",{staticClass:"mr-3 far fa-user-circle"}),t._v("Registered By")]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(t.customer.user?t.customer.user.full_name:"user not in record"))+"\n                                ")])]),t._v(" "),r("tr",[r("th",{staticClass:"text-muted"},[r("i",{staticClass:"mr-3 far fa-building"}),t._v("Branch")]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(t.branch)))])])])])])])]),t._v(" "),t.full?r("div",[t._v("Full profile goes here")]):t._e()]):t._e()],1)])},staticRenderFns:[]}},N9TL:function(t,e,r){var a=r("VU/8")(r("HY2W"),r("JoKY"),!1,function(t){r("h2EW")},"data-v-934e31f6",null);t.exports=a.exports},SldL:function(t,e){!function(e){"use strict";var r,a=Object.prototype,n=a.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag",u="object"==typeof t,l=e.regeneratorRuntime;if(l)u&&(t.exports=l);else{(l=e.regeneratorRuntime=u?t.exports:{}).wrap=C;var d="suspendedStart",m="suspendedYield",p="executing",f="completed",h={},v={};v[i]=function(){return this};var _=Object.getPrototypeOf,y=_&&_(_($([])));y&&y!==a&&n.call(y,i)&&(v=y);var g=k.prototype=x.prototype=Object.create(v);w.prototype=g.constructor=k,k.constructor=w,k[c]=w.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(g),t},l.awrap=function(t){return{__await:t}},P(D.prototype),D.prototype[o]=function(){return this},l.AsyncIterator=D,l.async=function(t,e,r,a){var n=new D(C(t,e,r,a));return l.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},P(g),g[c]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var a=e.pop();if(a in t)return r.value=a,r.done=!1,r}return r.done=!0,r}},l.values=$,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(a,n){return o.type="throw",o.arg=t,e.next=a,n&&(e.method="next",e.arg=r),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=t,i.arg=e,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;A(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:$(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=r),h}}}function C(t,e,r,a){var n=e&&e.prototype instanceof x?e:x,s=Object.create(n.prototype),i=new F(a||[]);return s._invoke=function(t,e,r){var a=d;return function(n,s){if(a===p)throw new Error("Generator is already running");if(a===f){if("throw"===n)throw s;return N()}for(r.method=n,r.arg=s;;){var i=r.delegate;if(i){var o=O(i,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var c=b(t,e,r);if("normal"===c.type){if(a=r.done?f:m,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=f,r.method="throw",r.arg=c.arg)}}}(t,r,i),s}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function x(){}function w(){}function k(){}function P(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function D(t){var e;this._invoke=function(r,a){function s(){return new Promise(function(e,s){!function e(r,a,s,i){var o=b(t[r],t,a);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,s,i)},function(t){e("throw",t,s,i)}):Promise.resolve(u).then(function(t){c.value=t,s(c)},i)}i(o.arg)}(r,a,e,s)})}return e=e?e.then(s,s):s()}}function O(t,e){var a=t.iterator[e.method];if(a===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=b(a,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var s=n.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,h):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function $(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return s.next=s}}return{next:N}}function N(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},WiSW:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(r("I3G/")),n=(r("N71M"),r("nv24")),s=i(r("1gIg"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={props:["viewCustomer"],components:{AppNavigation:s.default},data:function(){return{customer:"",show:!1}},computed:{full:function(){return"full"===this.$route.meta.mode},passport:function(){return"https://s3.eu-west-2.amazonaws.com/altara-one/"+this.customer.document.passport_url},branch:function(){return this.customer.branch.description+" "+this.customer.branch.name},approved:function(){return this.$getCustomerApprovalStatus(this.customer.verification)}},created:function(){var t=this;$(".tooltip").remove(),this.viewCustomer&&this.setCustomer(this.viewCustomer),n.EventBus.$on("customer",function(e){return t.setCustomer(e)})},methods:{setCustomer:function(t){a.default.set(this.$data,"customer",t),this.show=!0}}}},Xxa5:function(t,e,r){t.exports=r("jyFz")},h2EW:function(t,e,r){var a=r("n9Ml");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("6d8aab8e",a,!0,{})},ic49:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=function(t,e){t=t.replace(/([A-Z])/g," $1").replace(/^./,function(t){return t.toUpperCase()}),(0,a.post)("/api/log",{action:t,description:e})};var a=r("p/p5")},jyFz:function(t,e,r){var a=function(){return this}()||Function("return this")(),n=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,s=n&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,t.exports=r("SldL"),n)a.regeneratorRuntime=s;else try{delete a.regeneratorRuntime}catch(t){a.regeneratorRuntime=void 0}},m2tk:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Message=void 0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=r("p/p5");e.Message=function(){function t(e,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.user_id=n,this.message=e,this.logToDB=a,this.contacts=r.split(",").filter(function(t){return/\S/.test(t)}).map(function(t){return"234"+t.trim().substr(1)}).join(","),this.setPages(),this.setContactCount()}return a(t,[{key:"setContactCount",value:function(){this.contact_count=this.contacts.split(",").length}},{key:"setPages",value:function(){this.pages=Math.ceil(this.message.length/160)}},{key:"send",value:function(t){var e=this;(0,n.get)("/api/message/create?to="+this.contacts+"&message="+this.message).then(function(r){return 200===r.status&&e.logToDB&&(delete e.logToDB,(0,n.post)("/api/message",e)),!!t&&t(r)}).catch(function(e){return!!t&&t(e)})}}]),t}()},n9Ml:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".attendance-item[data-v-934e31f6]{cursor:auto}",""])},nv24:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventBus=void 0;var a,n=r("I3G/"),s=(a=n)&&a.__esModule?a:{default:a};e.EventBus=new s.default},oKx2:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:"",buttonTitle:null,to:null}}},rN6N:function(t,e,r){"use strict";var a,n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),s=r("I3G/"),i=(a=s)&&a.__esModule?a:{default:a},o=r("N71M");function c(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=new i.default,d=function(){function t(e,r){u(this,t),this._order=e,this._customer=r,this._paymentBanks=[],this._paymentMethods=[],this._actualPayDates=[],this._actualAmountsPaid=[],this._amountsToBePaid=[],this._repaymentCaptions=[],this._paymentStatusClasses=[],this._repaymentLevel=0,this._amountPaid=null,this._discountAmount=null,this._outstandingDebt=null,this._discountedTotal=null,this._defaultFee=null,this._totalPlusDefault=null,this._payments={},this.setIsOrderFormal(),this.setIsRepaymentValid(),this.setRepaymentData(),this.setCountAndInterval(),this.setCommonDetails(),this.setDueDates(),this.setPaymentStatusClasses(),this.calcAndSetPaymentSummary(),this.setBranch(),this.setDiscount()}return n(t,[{key:"setIsRepaymentValid",value:function(){this._isRepaymentValid=!(!this.order.repayment_formal&&!this.order.repayment_informal)}},{key:"setIsOrderFormal",value:function(){this._isOrderFormal=["formal","salaried"].includes(this._customer.employment_status.toLowerCase()),4===parseInt(this.order.payment_method_id)&&(this._isOrderFormal=!0)}},{key:"setRepaymentData",value:function(){null!=this.order.repayment_formal&&(this._repaymentData=this.order.repayment_formal),null!=this.order.repayment_informal&&(this._repaymentData=this.order.repayment_informal)}},{key:"setCountAndInterval",value:function(){var e=void 0,r=void 0;new Date(this.order.order_date)<=new Date("2019-07-07")?(null!=this.order.repayment_formal&&(e=28,r=6),null!=this.order.repayment_informal&&(e=14,r=12)):t.isBankDraftAvailable()&&this.isOrderFormal||4===parseInt(this.order.payment_method_id)?(e=28,r=6):(e=14,r=12),this._count=r,this._interval=e}},{key:"setDueDates",value:function(){this._dueDates=t.generateDueDates(this.order.order_date,this.interval,this.count)}},{key:"setCommonDetails",value:function(){if(this.isRepaymentValid)for(var t=1;t<this.count+1;t++){for(var e=l.$getColumn(t).split(""),r=[],a=1;a<=2;a++)r.unshift(e.pop());this._repaymentCaptions.push("<td>"+e.join("")+"<sup>"+r.join("")+"</sup></td>"),this._actualPayDates.push(this.repaymentData[l.$getColumn(t)+"_date"]),this._actualAmountsPaid.push(this.repaymentData[l.$getColumn(t)+"_pay"]),this._paymentBanks.push(this.repaymentData[l.$getColumn(t)+"_payment_bank"]),this._paymentMethods.push(this.repaymentData[l.$getColumn(t)+"_payment_method"]),this._amountsToBePaid.push(l.$roundDownAmt(this.order.repayment_amount)),this.repaymentData[l.$getColumn(t)+"_pay"]>0&&this._repaymentLevel++}}},{key:"setBranch",value:function(){var t=this;this.order.store_product?this._branch=o.store.state.branches.find(function(e){return parseInt(e.id)===parseInt(t.order.store_product.store_name)}):this._branch=null}},{key:"setPaymentStatusClasses",value:function(){if(this.isRepaymentValid)for(var e=1;e<this.count+1;e++){var r={class:null,icon:null},a=l.$getColumn(e),n=t.isPaymentDue(this.dueDates[e-1]),s=parseInt(this.repaymentData[a+"_pay"]);s?(r.class="paid",r.icon="fa-check"):n&&!s?(r.class="missed",r.icon="fa-times"):n||(r.class="pending",r.icon="fa-hourglass-start"),this._paymentStatusClasses.push(r)}}},{key:"calcAndSetPaymentSummary",value:function(){var t=function(t){return l.$formatCurrency(t)},e=this.order,r=e.repayment_amount,a=e.down_payment,n=e.product_price,s=6===this.count?.5:1,i=this.order.discount.percentage_discount,o=i>0?5===i?1:2:0,c=l.$roundDownAmt(r*s*o);this._discountAmount=t(c);var u=0,d=0;if(this.repaymentData){for(var m=0;m<this.count+1;m++){var p=parseInt(this.actualAmountsPaid[m]);d+=p?l.$roundDownAmt(p):0}u=l.$roundDownAmt(parseInt(a))+d+c}this._amountPaid=t(u);var f=l.$roundDownAmt(n-c);this._discountedTotal=t(f);var h=0;new Date(this.order.order_date)>new Date("2019-07-07")&&(h=500*[].length),this._defaultFee=t(h),this._totalPlusDefault=t(f+h),this._outstandingDebt=t(l.$roundDownAmt(parseInt(n)-u))}},{key:"setDiscount",value:function(){this._discount=this.order.discount.name+" "+this.order.discount.percentage_discount}},{key:"payments",set:function(t){this._payments=t},get:function(){return this._payments}},{key:"repaymentLevel",get:function(){return this._repaymentLevel}},{key:"order",get:function(){return this._order}},{key:"customer",get:function(){return this._customer}},{key:"isRepaymentValid",get:function(){return this._isRepaymentValid}},{key:"isOrderFormal",get:function(){return this._isOrderFormal}},{key:"repaymentData",get:function(){return this._repaymentData}},{key:"count",get:function(){return this._count}},{key:"interval",get:function(){return this._interval}},{key:"dueDates",get:function(){return this._dueDates}},{key:"paymentStatusClasses",get:function(){return this._paymentStatusClasses}},{key:"repaymentCaptions",get:function(){return this._repaymentCaptions}},{key:"paymentBanks",get:function(){return this._paymentBanks}},{key:"paymentMethods",get:function(){return this._paymentMethods}},{key:"actualPayDates",get:function(){return this._actualPayDates}},{key:"actualAmountsPaid",get:function(){return this._actualAmountsPaid}},{key:"amountsToBePaid",get:function(){return this._amountsToBePaid}},{key:"amountPaid",get:function(){return this._amountPaid}},{key:"discountAmount",get:function(){return this._discountAmount}},{key:"outstandingDebt",get:function(){return this._outstandingDebt}},{key:"discountedTotal",get:function(){return this._discountedTotal}},{key:"defaultFee",get:function(){return this._defaultFee}},{key:"totalPlusDefault",get:function(){return this._totalPlusDefault}},{key:"branch",get:function(){return this._branch}},{key:"discount",get:function(){return this._discount}},{key:"customerName",get:function(){return this.customer.first_name+" "+this.customer.last_name}},{key:"customerWGName",get:function(){var t=this.customer;return t.work_guarantor_first_name+" "+t.work_guarantor_last_name+" - "+t.work_guarantor_relationship}},{key:"customerPGName",get:function(){var t=this.customer;return t.personal_guarantor_first_name+" "+t.personal_guarantor_last_name+" - "+t.personal_guarantor_relationship}}],[{key:"generateDueDates",value:function(t,e,r){for(var a=[],n=0;n<r;n++){var s=new Date(t).addDays((n+1)*e),i=l.$getDate(s);a.push(i)}return a}},{key:"isPaymentDue",value:function(t){return new Date>new Date(t)}},{key:"isBankDraftAvailable",value:function(){return!1}},{key:"renderMessage",value:function(t){return t.sms?t.sms.message.replace(/%0a/g,"</br>"):t.feedback}},{key:"convertToName",value:function(t,e){return t?o.store.state[e].find(function(e){return e.id===t}).name:null}}]),t}(),m=function(t){function e(t,r){u(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,t.customer));return a._isReminderSent=!1,a._dvaId=r,a._isSelected=!1,a.setReminder(null),a.setIsReminderSent(),a.setFinancialStatus(),a.setPromiseCall(),a.generateAndSetNextSMSReminder(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,d),n(e,[{key:"setIsReminderSent",value:function(){var t=this,e=l.$getDate();this.order.reminders.forEach(function(r){var a=r.date.split(" "),n=a[0].split("-"),s=a[1].split(":"),i=[].concat(c(n),c(s)).map(function(t){return parseInt(t,10)});l.$getDate(new Date(Date.UTC.apply(Date,c(i))),!1)===e&&(t._isReminderSent=!0)})}},{key:"setFinancialStatus",value:function(){this._financialStatus=this.isRepaymentValid?"Paid: "+this.amountPaid+" | Debt: "+this.outstandingDebt:"no detail!"}},{key:"generateAndSetNextSMSReminder",value:function(){var t=null;this.order.store_product&&(t=this.order.store_product.product_name);var e=this.order,r=e.repayment_amount,a=void 0;e.order_date===l.$getDate()?(a="Hello "+this.customerName+", thanks for patronizing us. The following is the breakdown of the repayment plan for the purchase of "+t+":%0a",this.dueDates.forEach(function(t,e){return a+=l.$getColumn(e+1)+": "+t+" => "+l.$formatCurrency(l.$roundDownAmt(r))+"%0a"})):a="Hello "+this.customerName+", This is to remind you that your "+l.$getColumn(parseInt(this.repaymentLevel)+1)+" repayment of "+l.$formatCurrency(l.$roundDownAmt(r))+" for "+t+" will be due on "+this.dueDates[this.repaymentLevel]+". we will be expecting you.",this._nextSMSReminder=a+"Please remember to pay on time to avoid late fees and other penalties.%0aThank you."}},{key:"setReminder",value:function(t){this._reminder={type:t,feedback:null,is_visited:null,dva_id:this.dvaId,order_id:this.order.id,customer_id:this.customer.id,canBeSelected:!this.isReminderSent,repayment_level:this.repaymentLevel+"/"+this.count},"sms"===t&&(this._reminder.sms_id=null,this._reminder.contacts=this.customer.telephone)}},{key:"setPromiseCall",value:function(){this._promiseCall={order_id:this.order.id,user_id:this.dvaId,customer_id:this.customer.id,date:null}}},{key:"isSelected",set:function(t){this._isSelected=t},get:function(){return this._isSelected}},{key:"isReminderSent",get:function(){return this._isReminderSent}},{key:"dvaId",get:function(){return this._dvaId}},{key:"financialStatus",get:function(){return this._financialStatus}},{key:"nextSMSReminder",get:function(){return this._nextSMSReminder}},{key:"reminder",get:function(){return this._reminder}},{key:"promiseCall",get:function(){return this._promiseCall}}]),e}();t.exports={Order:d,OrderWithPromiseCall:m}},rjj0:function(t,e,r){var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n=r("tTVk"),s={},i=a&&(document.head||document.getElementsByTagName("head")[0]),o=null,c=0,u=!1,l=function(){},d=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t){for(var e=0;e<t.length;e++){var r=t[e],a=s[r.id];if(a){a.refs++;for(var n=0;n<a.parts.length;n++)a.parts[n](r.parts[n]);for(;n<r.parts.length;n++)a.parts.push(v(r.parts[n]));a.parts.length>r.parts.length&&(a.parts.length=r.parts.length)}else{var i=[];for(n=0;n<r.parts.length;n++)i.push(v(r.parts[n]));s[r.id]={id:r.id,refs:1,parts:i}}}}function h(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function v(t){var e,r,a=document.querySelector("style["+m+'~="'+t.id+'"]');if(a){if(u)return l;a.parentNode.removeChild(a)}if(p){var n=c++;a=o||(o=h()),e=g.bind(null,a,n,!1),r=g.bind(null,a,n,!0)}else a=h(),e=function(t,e){var r=e.css,a=e.media,n=e.sourceMap;a&&t.setAttribute("media",a);d.ssrId&&t.setAttribute(m,e.id);n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,a),r=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else r()}}t.exports=function(t,e,r,a){u=r,d=a||{};var i=n(t,e);return f(i),function(e){for(var r=[],a=0;a<i.length;a++){var o=i[a];(c=s[o.id]).refs--,r.push(c)}e?f(i=n(t,e)):i=[];for(a=0;a<r.length;a++){var c;if(0===(c=r[a]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete s[c.id]}}}};var _,y=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function g(t,e,r,a){var n=r?"":a.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var s=document.createTextNode(n),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(s,i[e]):t.appendChild(s)}}},tTVk:function(t,e){t.exports=function(t,e){for(var r=[],a={},n=0;n<e.length;n++){var s=e[n],i=s[0],o={id:t+":"+n,css:s[1],media:s[2],sourceMap:s[3]};a[i]?a[i].parts.push(o):r.push(a[i]={id:i,parts:[o]})}return r}},wBhk:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["pageTitle","pageTitleSmall","previous","forward"]}}});