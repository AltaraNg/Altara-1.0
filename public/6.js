webpackJsonp([6],{"/Kj4":function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".table-separator[data-v-3545c70a]{border-top:2px solid #dee1e4}",""])},"3iS+":function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".attendance-head .light-heading[data-v-1ab70cbf]:first-child{max-width:120px}",""])},"7elN":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=r("p/p5"),s=r("K23+"),i=(n=s)&&n.__esModule?n:{default:n},o=(r("nv24"),r("rN6N"));e.default={props:{mode:null,index:null,startIndex:{default:1},order:{default:null,type:o.Order}},created:function(){this.order.setReminder(this.mode)},methods:{logReminder:function(){var t=this;this.$LIPS(!0),delete this.order.reminder.order,delete this.order.reminder.canBeSelected,(0,a.post)("/api/reminder",{reminders:[this.order.reminder]}).then(function(e){return e.data.saved&&t.logPromiseCall()}).catch(function(){return t.$displayErrorMessage("Error Logging reminders!")})},logPromiseCall:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Reminder Logged!";this.order.promiseCall.date?(0,a.post)("/api/promise_call",this.order.promiseCall).then(function(r){return r.data.saved&&t.done(e+" Promise call added!")}).catch(function(){return t.$displayErrorMessage("Error Logging promise call!")}):this.done(e)},done:function(t){this.$scrollToTop(),i.default.setSuccess(t,5e3),this.$emit("done")},toggleSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.order.reminder.canBeSelected&&(this.order.isSelected=null!==t?t:!this.order.isSelected)}}}},HBVr:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.show?r("div",{staticClass:"tab-content mt-1 attendance-body"},[r("div",{staticClass:"tab-pane active text-center",attrs:{id:"reminder-panel",role:"tabpanel"}},t._l(t.orders,function(e,n){return r("order-item",{key:e.order.id,attrs:{index:n,"start-index":t.startIndex,order:e,mode:t.mode},on:{done:function(e){t.fetchList(t.list)},display:t.displayDetails}})})),t._v(" "),"normal-list"!=t.mode?r("div",{staticClass:"w-100 my-5 mx-0 hr"}):t._e()]):r("div",{staticClass:"tab-content mt-1 attendance-body"},[t._m(0)]),t._v(" "),t.show&&"sms"===t.mode?r("div",{staticClass:"mt-1 attendance-body"},[r("div",{staticClass:"mb-5 px-0 row align-items-center"},[r("div",{staticClass:"clearfix d-flex justify-content-end w-100"},[r("button",{staticClass:"btn bg-default",attrs:{disabled:t.$isProcessing},on:{click:t.processSelected}},[t._v("\n                    Send Reminder(s) "),r("i",{staticClass:"far fa-paper-plane ml-1"})])])])]):t._e(),t._v(" "),r("div",{staticClass:"modal fade",attrs:{id:"purchase_order"}},[r("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),t.showModalContent?r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"table table-bordered table-striped"},[r("tbody",[r("tr",[r("th",[t._v("Order ID")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.id))])]),t._v(" "),r("tr",[r("th",[t._v("Order date")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.order_date))])]),t._v(" "),r("tr",[r("th",[t._v("Product")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.store_product.product_name))])]),t._v(" "),r("tr",[r("th",[t._v("Repayment")]),t._v(" "),r("td",[t._v(t._s(t.$formatCurrency(t.activeOrder.amountsToBePaid[0])))])]),t._v(" "),r("tr",[r("th",[t._v("Down Payment")]),t._v(" "),r("td",[t._v(t._s(t.$formatCurrency(t.activeOrder.order.down_payment)))])]),t._v(" "),r("tr",[r("th",[t._v("Discount (%)")]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(t.activeOrder.discount)))])]),t._v(" "),r("tr",[r("th",[t._v("Sale Type")]),t._v(" "),r("td",[t._v(t._s(t._f("capitalize")(t.activeOrder.order.sales_type.name)))])]),t._v(" "),r("tr",[r("th",[t._v("Total amount to Pay")]),t._v(" "),r("td",[t._v(t._s(t.$formatCurrency(t.activeOrder.order.product_price)))])]),t._v(" "),r("tr",[r("th",[t._v("Processed by")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.order.floor_agent?t.activeOrder.order.floor_agent.full_name:null)+"\n                                ")])])])])])]):t._e(),t._v(" "),t._m(2)])])]),t._v(" "),r("div",{staticClass:"modal fade",attrs:{id:"customer_info"}},[r("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),t.showModalContent?r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"table table-bordered table-striped"},[r("tbody",[r("tr",[r("th",[t._v("Customer ID")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.id))])]),t._v(" "),r("tr",[r("th",[t._v("Full Name")]),t._v(" "),r("td",[t._v(t._s(t.$getCustomerFullName(t.activeOrder.customer)))])]),t._v(" "),r("tr",[r("th",[t._v("Address")]),t._v(" "),r("td",[t._v(t._s(t.$getCustomerAddress(t.activeOrder.customer)))])]),t._v(" "),r("tr",[r("th",[t._v("Phone")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.telephone))])]),t._v(" "),r("tr",[r("th",[t._v("Branch")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.branch.name))])]),t._v(" "),r("tr",[r("th",[t._v("Category")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.employment_status))])]),t._v(" "),r("tr",[r("th",[t._v("Work guarantor name")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customerWGName)+"\n                                ")])]),t._v(" "),r("tr",[r("th",[t._v("Work guarantor phone")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.work_guarantor_telno))])]),t._v(" "),r("tr",[r("th",[t._v("Personal guarantor name")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customerPGName)+"\n                                ")])]),t._v(" "),r("tr",[r("th",[t._v("Personal guarantor phone")]),t._v(" "),r("td",[t._v(t._s(t.activeOrder.customer.personal_guarantor_telno))])]),t._v(" "),r("tr",[r("th",[t._v("Verified by")]),t._v(" "),r("td",[r("router-link",{staticClass:"text-link",attrs:{target:"_blank",to:"/dva/verification?id="+t.activeOrder.customer.id}},[t._v("\n                                        click here to see verifications status\n                                    ")])],1)])])])])]):t._e(),t._v(" "),t._m(4)])])]),t._v(" "),r("div",{staticClass:"modal fade repayment",attrs:{id:"repayment"}},[r("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[t.showModalContent?r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header py-2"},[r("h6",{staticClass:"modal-title py-1"},[t._v("\n                        Repayment Plan/Summary - "+t._s(t._f("capitalize")(t.activeOrder.customer.employment_status))+"\n                    ")]),t._v(" "),t._m(5)]),t._v(" "),r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[r("h5",{staticClass:"mt-3 mb-0"},[t._v("Order Information")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",[t._m(6),t._v(" "),r("tr",[r("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.activeOrder.customerName)+"\n                                ")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.order.id))]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.order.store_product.product_name))]),t._v(" "),r("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.activeOrder.branch.name))])])])]),t._v(" "),r("h5",{staticClass:"mt-5 mb-0"},[t._v("Amortization Schedule")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",[r("th",[t._v("Repayment")]),t._v(" "),t._l(t.activeOrder.repaymentCaptions,function(e){return r("td",{domProps:{innerHTML:t._s(e)}})})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Due Date")]),t._v(" "),t._l(t.activeOrder.dueDates,function(e){return r("td",[t._v(t._s(e))])})],2),t._v(" "),r("tr",[r("th",[t._v("Actual Pay Day")]),t._v(" "),t._l(t.activeOrder.actualPayDates,function(e){return r("td",[t._v(t._s(e))])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Status")]),t._v(" "),t._l(t.activeOrder.paymentStatusClasses,function(t){return r("td",{class:t.class},[r("i",{staticClass:"fas",class:t.icon})])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Repayment Amount")]),t._v(" "),t._l(t.activeOrder.amountsToBePaid,function(e){return r("td",[t._v(t._s(t.$formatCurrency(e)))])})],2),t._v(" "),r("tr",[r("th",[t._v("Actual Amount Paid")]),t._v(" "),t._l(t.activeOrder.actualAmountsPaid,function(e){return r("td",[t._v(t._s(t.$formatCurrency(e))+"\n                                ")])})],2),t._v(" "),r("tr",{staticClass:"table-separator"},[r("th",[t._v("Payment Method")]),t._v(" "),t._l(t.activeOrder.paymentMethods,function(e){return r("td",{staticClass:"text-capitalize"},[t._v("\n                                    "+t._s(t.Order.convertToName(e,"paymentMethods"))+"\n                                ")])})],2),t._v(" "),r("tr",[r("th",[t._v("Bank")]),t._v(" "),t._l(t.activeOrder.paymentBanks,function(e){return r("td",{staticClass:"text-capitalize"},[t._v("\n                                    "+t._s(t.Order.convertToName(e,"banks"))+"\n                                ")])})],2)])]),t._v(" "),r("h5",{staticClass:"mt-5 mb-0"},[t._v("Payment Summary")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",{staticClass:"table-separator"},[r("td",{staticClass:"text-left"},[t._v("Discount Detail (%)")]),t._v(" "),r("th",[t._v(t._s(t._f("capitalize")(t.activeOrder.discount)))]),t._v(" "),r("td",[t._v("Total Before Discount")]),t._v(" "),r("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.product_price))))]),t._v(" "),r("td",[t._v("Total Paid")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.amountPaid))])]),t._v(" "),r("tr",[r("td",{staticClass:"text-left"},[t._v("Discount Amount")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.discountAmount))]),t._v(" "),r("td",[t._v("Total After Discount")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.discountedTotal))]),t._v(" "),r("td",[t._v("Total Debt")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.outstandingDebt))])]),t._v(" "),r("tr",[r("td",{staticClass:"text-left"},[t._v("Down Payment")]),t._v(" "),r("th",[t._v(t._s(t.$formatCurrency(t.$roundDownAmt(t.activeOrder.order.down_payment))))]),t._v(" "),r("td",[t._v("Total Plus Default Fee")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.totalPlusDefault))]),t._v(" "),r("td",[t._v("Default Fee")]),t._v(" "),r("th",[t._v(t._s(t.activeOrder.defaultFee))])])])])])]),t._v(" "),t._m(7)]):t._e()])]),t._v(" "),r("div",{staticClass:"modal fade repayment",attrs:{id:"reminder_history"}},[r("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(8),t._v(" "),t.showModalContent?r("div",{staticClass:"modal-body"},[r("div",{staticClass:"table-responsive"},[t.activeOrder.order.reminders.length?r("table",{staticClass:"table table-bordered table-striped"},[t._m(9),t._v(" "),r("tbody",t._l(t.activeOrder.order.reminders,function(e,n){return r("tr",[r("th",[t._v(t._s(n+1))]),t._v(" "),r("td",[t._v(t._s(t.$dateTimeConvert(e.date)))]),t._v(" "),r("td",[t._v(t._s(e.type))]),t._v(" "),r("td",{domProps:{innerHTML:t._s(t.Order.renderMessage(e))}}),t._v(" "),r("td",[t._v(t._s(e.user.full_name))])])}))]):r("div",{staticClass:"my-4 text-center"},[t._v("\n                            no reminders have been sent yet!\n                        ")])])]):t._e(),t._v(" "),t._m(10)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tab-pane active text-center"},[e("div",{staticClass:"mb-3 row attendance-item"},[e("div",{staticClass:"col d-flex light-heading align-items-center justify-content-center"},[this._v("\n                    No records found!\n                ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header py-2"},[e("h6",{staticClass:"modal-title py-1"},[this._v("Purchase Order Summary")]),this._v(" "),e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"text-link mt-3 w-100",staticStyle:{"text-align":"right"},attrs:{"data-dismiss":"modal",href:"javascript:"}},[this._v("close dialogue")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header py-2"},[e("h6",{staticClass:"modal-title py-1"},[this._v("Customer Info. Summary")]),this._v(" "),e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"text-link mt-3 w-100 text-right",attrs:{"data-dismiss":"modal",href:"#"}},[this._v("\n                        close dialogue\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"table-separator"},[e("td",[this._v("Name")]),this._v(" "),e("td",[this._v("Order Id")]),this._v(" "),e("td",[this._v("Product")]),this._v(" "),e("th",[this._v("Branch")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer d-flex justify-content-end"},[e("a",{staticClass:"text-link mt-3",attrs:{"data-dismiss":"modal",href:"javascript:"}},[this._v("close dialogue")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header py-2"},[e("h6",{staticClass:"modal-title py-1"},[this._v("History")]),this._v(" "),e("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal"}},[e("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"fas fa-times"})])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("S/N")]),t._v(" "),r("th",[t._v("Date")]),t._v(" "),r("th",[t._v("Type")]),t._v(" "),r("th",[t._v("SMS/Feedback")]),t._v(" "),r("th",[t._v("sender")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"text-link mt-3 w-100",staticStyle:{"text-align":"right"},attrs:{"data-dismiss":"modal",href:"javascript:"}},[this._v("close dialogue")])])}]}},IObo:function(t,e,r){var n=r("/Kj4");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("5847e9e2",n,!0,{})},LFDu:function(t,e,r){var n=r("3iS+");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("e2ce9f04",n,!0,{})},SldL:function(t,e){!function(e){"use strict";var r,n=Object.prototype,a=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag",d="object"==typeof t,c=e.regeneratorRuntime;if(c)d&&(t.exports=c);else{(c=e.regeneratorRuntime=d?t.exports:{}).wrap=b;var u="suspendedStart",m="suspendedYield",h="executing",v="completed",f={},_={};_[i]=function(){return this};var p=Object.getPrototypeOf,y=p&&p(p(E([])));y&&y!==n&&a.call(y,i)&&(_=y);var g=w.prototype=x.prototype=Object.create(_);k.prototype=g.constructor=w,w.constructor=k,w[l]=k.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(g),t},c.awrap=function(t){return{__await:t}},O(S.prototype),S.prototype[o]=function(){return this},c.AsyncIterator=S,c.async=function(t,e,r,n){var a=new S(b(t,e,r,n));return c.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},O(g),g[l]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=E,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return o.type="throw",o.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),d=a.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=t,i.arg=e,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),$(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;$(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),f}}}function b(t,e,r,n){var a=e&&e.prototype instanceof x?e:x,s=Object.create(a.prototype),i=new L(n||[]);return s._invoke=function(t,e,r){var n=u;return function(a,s){if(n===h)throw new Error("Generator is already running");if(n===v){if("throw"===a)throw s;return T()}for(r.method=a,r.arg=s;;){var i=r.delegate;if(i){var o=D(i,r);if(o){if(o===f)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=C(t,e,r);if("normal"===l.type){if(n=r.done?v:m,l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=v,r.method="throw",r.arg=l.arg)}}}(t,r,i),s}function C(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function w(){}function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(r,n){function s(){return new Promise(function(e,s){!function e(r,n,s,i){var o=C(t[r],t,n);if("throw"!==o.type){var l=o.arg,d=l.value;return d&&"object"==typeof d&&a.call(d,"__await")?Promise.resolve(d.__await).then(function(t){e("next",t,s,i)},function(t){e("throw",t,s,i)}):Promise.resolve(d).then(function(t){l.value=t,s(l)},i)}i(o.arg)}(r,n,e,s)})}return e=e?e.then(s,s):s()}}function D(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,D(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=C(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var s=a.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,f):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return s.next=s}}return{next:T}}function T(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},TZKk:function(t,e,r){var n=r("VU/8")(r("7elN"),r("b4Eb"),!1,null,null,null);t.exports=n.exports},XPj8:function(t,e,r){var n=r("VU/8")(r("aSpy"),r("HBVr"),!1,function(t){r("IObo")},"data-v-3545c70a",null);t.exports=n.exports},Xxa5:function(t,e,r){t.exports=r("jyFz")},aSpy:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=m(r("Xxa5")),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=m(r("I3G/")),i=r("NYxO"),o=m(r("K23+")),l=r("m2tk"),d=r("p/p5"),c=m(r("TZKk")),u=r("rN6N");function m(t){return t&&t.__esModule?t:{default:t}}function h(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(a,s){try{var i=e[a](s),o=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}e.default={components:{OrderItem:c.default},props:{list:{default:null},mode:null,preLoadedOrder:null,startIndex:null},watch:{list:function(t){this.fetchList(t)},preLoadedOrder:function(t){this.prepareForm(t)}},data:function(){return{orders:[],show:!1,showModalContent:!1,Order:u.Order,activeOrder:null}},computed:a({},(0,i.mapGetters)(["auth","getAuthUserDetails"])),methods:{prepareForm:function(){var t=h(n.default.mark(function t(e){var r=e.orders;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.show=!1,this.showModalContent=!1,t.next=4,this.convertRequestOrdersToOrderClassInstance(r);case 4:this.orders=t.sent,this.orders.length&&(this.show=!0),this.$LIPS(!1);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),convertRequestOrdersToOrderClassInstance:function(t){var e=[];for(var r in t){var n=t[r]instanceof u.Order?t[r]:new u.OrderWithPromiseCall(t[r],this.getAuthUserDetails.userId);e.push(n)}return e},fetchList:function(t){var e=this;this.$LIPS(!0);var r,n=!(this.auth("DVALead")||this.auth("FSLLead")||this.auth("CAGAccess"));(0,d.get)((r={query:{list:t,filterWithBranch:n}},"/api/reminder/create?list="+r.query.list)).then(function(r){var n=r.data;8===t&&(n.orders=n.orders.map(function(t){return t.order})),e.prepareForm(n)})},displayDetails:function(){var t=h(n.default.mark(function t(e,r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.set(this.$data,"activeOrder",e);case 2:return this.showModalContent=!0,t.abrupt("return",$("#"+r).modal("toggle"));case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),processSelected:function(){this.$LIPS(!0);var t=this.orders.filter(function(t){return t.isSelected});if(!t.length)return this.$displayErrorMessage("please select at least one!"),this.$LIPS(!1);this.sendSMSReminders(t)},sendSMSReminders:function(t){var e=this,r=[];t.forEach(function(n,a){var s=new l.Message(n.nextSMSReminder,n.reminder.contacts,!1,n.dvaId);s.send(function(n){200===n.status&&(delete s.logToDB,r.push(s)),a+1===t.length&&e.logSentMessages(t,r)})})},logSentMessages:function(t,e){var r=this;e.length>0?(0,d.post)("/api/message",{messages:e,bulk:!0}).then(function(e){var n=e.data,a=n.sentAndLogged,s=n.ids;a?r.logSentReminders(t,s):r.$displayErrorMessage("Error Logging sent sms details!")}):this.$displayErrorMessage("Error sending messages!")},logSentReminders:function(t,e){var r=this;if(e.reverse(),e.length>0){var n=t.map(function(t,r){return t.reminder.sms_id=e[r],delete t.reminder.contacts,delete t.reminder.canBeSelected,t.reminder});(0,d.post)("/api/reminder",{reminders:n}).then(function(t){t.data.saved?(o.default.setSuccess("Reminders have been sent successfully!",5e4),r.fetchList(r.list)):r.$displayErrorMessage("Error sending reminders!"),r.$scrollToTop()})}else this.$displayErrorMessage("Error logging sent messages!")}},mounted:function(){var t=this;"normal-list"!=this.mode?this.fetchList(this.list):this.prepareForm(this.preLoadedOrder),$(document).on("hidden.bs.modal",".modal",function(){t.activeOrder=null,t.showModalContent=!1})},created:function(){this.$prepareBanks(),this.$prepareBranches(),this.$preparePaymentMethods()}}},b4Eb:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3 row attendance-item"},[r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center",staticStyle:{"max-width":"120px"}},["normal-list"===t.mode?r("span"):t.order.reminder.canBeSelected&&["collection","recovery","call","external-recovery"].includes(t.mode)?r("span",{staticClass:"user mx-auto bg-pending text-white",on:{click:t.logReminder}},[r("i",{staticClass:"fas fa-hourglass-start"})]):t.order.reminder.canBeSelected&&"sms"===t.mode?r("div",{staticClass:"d-flex align-items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.isSelected,expression:"order.isSelected"}],staticClass:"form-check-input my-0 mx-4 float-left position-relative ",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.order.isSelected)?t._i(t.order.isSelected,null)>-1:t.order.isSelected},on:{click:t.toggleSelect,change:function(e){var r=t.order.isSelected,n=e.target,a=!!n.checked;if(Array.isArray(r)){var s=t._i(r,null);n.checked?s<0&&t.$set(t.order,"isSelected",r.concat([null])):s>-1&&t.$set(t.order,"isSelected",r.slice(0,s).concat(r.slice(s+1)))}else t.$set(t.order,"isSelected",a)}}})]):r("span",{staticClass:"user mx-auto sent-reminder"},[r("i",{staticClass:"fas fa-check"})]),t._v(" "),r("span",{staticClass:"user mx-auto"},[t._v(t._s(t.startIndex+t.index))])]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg user-name d-flex align-items-center justify-content-center"},[t._v("\n        "+t._s(t.$vnode.key)+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"purchase_order")}}},[t._v("\n        "+t._s(t.order.order.order_date)+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-3 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"customer_info")}}},[t._v("\n        ID: "+t._s(t.order.customer.id)+" - "+t._s(t._f("capitalize")(t.order.customer.employment_status))+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"repayment")}}},[t._v("\n        "+t._s(t.order.financialStatus)+"\n    ")]),t._v(" "),r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center justify-content-center",attrs:{"data-hoverable":"true"},on:{click:function(e){t.$emit("display",t.order,"reminder_history")}}},[t._v("\n        "+t._s(t.order.order.reminders.length)+" reminder(s) sent\n    ")]),t._v(" "),["collection","recovery","external-recovery"].includes(t.mode)?r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center attendance-create"},[r("span",{staticClass:"present"},[r("span",{staticClass:"radio w-50 pr-3 mb-0 float-left"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.reminder.is_visited,expression:"order.reminder.is_visited"}],attrs:{type:"radio",id:"present"+t.index,name:"isPresent"+t.index},domProps:{value:!0,checked:t._q(t.order.reminder.is_visited,!0)},on:{change:function(e){t.$set(t.order.reminder,"is_visited",!0)}}}),t._v(" "),r("label",{attrs:{for:"present"+t.index}},[t._v("yes")])]),t._v(" "),r("span",{staticClass:"radio w-50 pl-3 mb-0 float-left"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.reminder.is_visited,expression:"order.reminder.is_visited"}],attrs:{type:"radio",id:"absent"+t.index,name:"isPresent"+t.index},domProps:{value:!1,checked:t._q(t.order.reminder.is_visited,!1)},on:{change:function(e){t.$set(t.order.reminder,"is_visited",!1)}}}),t._v(" "),r("label",{attrs:{for:"absent"+t.index}},[t._v("no")])])])]):t._e(),t._v(" "),["collection","recovery","call","external-recovery"].includes(t.mode)?r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.order.reminder.feedback,expression:"order.reminder.feedback"}],staticClass:"form-control",attrs:{rows:"1",disabled:!t.order.reminder.canBeSelected},domProps:{value:t.order.reminder.feedback},on:{input:function(e){e.target.composing||t.$set(t.order.reminder,"feedback",e.target.value)}}})]):t._e(),t._v(" "),"call"===t.mode?r("div",{staticClass:"col-12 col-xs-2 col-md col-lg d-flex align-items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.promiseCall.date,expression:"order.promiseCall.date"}],staticClass:"form-control",attrs:{type:"date",disabled:!t.order.reminder.canBeSelected},domProps:{value:t.order.promiseCall.date},on:{input:function(e){e.target.composing||t.$set(t.order.promiseCall,"date",e.target.value)}}})]):t._e()])},staticRenderFns:[]}},dBli:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=r("XPj8"),s=(n=a)&&n.__esModule?n:{default:n};function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}e.default={components:{Order:s.default},data:function(){return{listToOrder:null}},methods:{mode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$route.meta.mode.toLowerCase();return t?e===t:e}},computed:{details:function(){var t=1,e=["1<sup>st</sup>","2<sup>nd</sup>","3<sup>rd</sup>"],r=["Order Number","Order Summary","Customer Info Summary","Repayment Summary","History"];switch(this.mode()){case"call":t=4,e=[].concat(i(e),["Guarantor's"]),r=[].concat(i(r),["Feedback","Promise Date"]);break;case"collection":t=9,e.splice(2,1),r=[].concat(i(r),["Visited?","Feedback"]);break;case"recovery":t=11,r=[].concat(i(r),["Visited?","Feedback"]);break;case"external-recovery":t=14,e.splice(1,2),r=[].concat(i(r),["Delivered Letter?","Feedback"])}return this.mode("call")?this.listToOrder=8:this.listToOrder||(this.listToOrder=t),{tabs:e,headings:r,list:t}}}}},flWo:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{attrs:{id:"reminder"}},[r("div",{staticClass:"mt-5 mb-3 attendance-head"},[r("ul",{staticClass:"nav nav-tabs justify-content-center p-0",attrs:{role:"tablist"}},[t.mode("call")?r("li",{staticClass:"col p-0 nav-item mb-0"},[r("a",{staticClass:"nav-link active",attrs:{"aria-selected":"true","data-toggle":"tab",href:"#reminder-panel",role:"tab"},domProps:{innerHTML:t._s("Promise "+t.mode())},on:{click:function(e){t.listToOrder=8}}})]):t._e(),t._v(" "),t._l(t.details.tabs,function(e,n){return r("li",{staticClass:"col p-0 nav-item mb-0"},[r("a",{staticClass:"nav-link",class:0===n&&!t.mode("call")&&"active",attrs:{"aria-selected":"true","data-toggle":"tab",href:"#reminder-panel",role:"tab"},domProps:{innerHTML:t._s(e+" "+t.mode())},on:{click:function(e){t.listToOrder=t.details.list+n}}})])})],2)]),t._v(" "),r("div",{staticClass:"mt-5 mb-3 attendance-head"},[r("div",{staticClass:"row px-4 pt-3 pb-4 text-center"},[r("div",{staticClass:"col light-heading"},[t._v("Action")]),t._v(" "),t._l(t.details.headings,function(e){return r("div",{staticClass:"col light-heading"},[t._v(t._s(e))])})],2)]),t._v(" "),r("order",{attrs:{list:t.listToOrder,mode:t.mode()}})],1)])},staticRenderFns:[]}},iNcs:function(t,e,r){var n=r("VU/8")(r("dBli"),r("flWo"),!1,function(t){r("LFDu")},"data-v-1ab70cbf",null);t.exports=n.exports},jyFz:function(t,e,r){var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,s=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r("SldL"),a)n.regeneratorRuntime=s;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},m2tk:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Message=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r("p/p5");e.Message=function(){function t(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.user_id=a,this.message=e,this.logToDB=n,this.contacts=r.split(",").filter(function(t){return/\S/.test(t)}).map(function(t){return"234"+t.trim().substr(1)}).join(","),this.setPages(),this.setContactCount()}return n(t,[{key:"setContactCount",value:function(){this.contact_count=this.contacts.split(",").length}},{key:"setPages",value:function(){this.pages=Math.ceil(this.message.length/160)}},{key:"send",value:function(t){var e=this;(0,a.get)("/api/message/create?to="+this.contacts+"&message="+this.message).then(function(r){return 200===r.status&&e.logToDB&&(delete e.logToDB,(0,a.post)("/api/message",e)),!!t&&t(r)}).catch(function(e){return!!t&&t(e)})}}]),t}()},nv24:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventBus=void 0;var n,a=r("I3G/"),s=(n=a)&&n.__esModule?n:{default:n};e.EventBus=new s.default},rN6N:function(t,e,r){"use strict";var n,a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r("I3G/"),i=(n=s)&&n.__esModule?n:{default:n},o=r("N71M");function l(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=new i.default,u=function(){function t(e,r){d(this,t),this._order=e,this._customer=r,this._paymentBanks=[],this._paymentMethods=[],this._actualPayDates=[],this._actualAmountsPaid=[],this._amountsToBePaid=[],this._repaymentCaptions=[],this._paymentStatusClasses=[],this._repaymentLevel=0,this._amountPaid=null,this._discountAmount=null,this._outstandingDebt=null,this._discountedTotal=null,this._defaultFee=null,this._totalPlusDefault=null,this._payments={},this.setIsOrderFormal(),this.setIsRepaymentValid(),this.setRepaymentData(),this.setCountAndInterval(),this.setCommonDetails(),this.setDueDates(),this.setPaymentStatusClasses(),this.calcAndSetPaymentSummary(),this.setBranch(),this.setDiscount()}return a(t,[{key:"setIsRepaymentValid",value:function(){this._isRepaymentValid=!(!this.order.repayment_formal&&!this.order.repayment_informal)}},{key:"setIsOrderFormal",value:function(){this._isOrderFormal=["formal","salaried"].includes(this._customer.employment_status.toLowerCase()),4===parseInt(this.order.payment_method_id)&&(this._isOrderFormal=!0)}},{key:"setRepaymentData",value:function(){null!=this.order.repayment_formal&&(this._repaymentData=this.order.repayment_formal),null!=this.order.repayment_informal&&(this._repaymentData=this.order.repayment_informal)}},{key:"setCountAndInterval",value:function(){var e=void 0,r=void 0;new Date(this.order.order_date)<=new Date("2019-07-07")?(null!=this.order.repayment_formal&&(e=28,r=6),null!=this.order.repayment_informal&&(e=14,r=12)):t.isBankDraftAvailable()&&this.isOrderFormal||4===parseInt(this.order.payment_method_id)?(e=28,r=6):(e=14,r=12),this._count=r,this._interval=e}},{key:"setDueDates",value:function(){this._dueDates=t.generateDueDates(this.order.order_date,this.interval,this.count)}},{key:"setCommonDetails",value:function(){if(this.isRepaymentValid)for(var t=1;t<this.count+1;t++){for(var e=c.$getColumn(t).split(""),r=[],n=1;n<=2;n++)r.unshift(e.pop());this._repaymentCaptions.push("<td>"+e.join("")+"<sup>"+r.join("")+"</sup></td>"),this._actualPayDates.push(this.repaymentData[c.$getColumn(t)+"_date"]),this._actualAmountsPaid.push(this.repaymentData[c.$getColumn(t)+"_pay"]),this._paymentBanks.push(this.repaymentData[c.$getColumn(t)+"_payment_bank"]),this._paymentMethods.push(this.repaymentData[c.$getColumn(t)+"_payment_method"]),this._amountsToBePaid.push(c.$roundDownAmt(this.order.repayment_amount)),this.repaymentData[c.$getColumn(t)+"_pay"]>0&&this._repaymentLevel++}}},{key:"setBranch",value:function(){var t=this;this.order.store_product?this._branch=o.store.state.branches.find(function(e){return parseInt(e.id)===parseInt(t.order.store_product.store_name)}):this._branch=null}},{key:"setPaymentStatusClasses",value:function(){if(this.isRepaymentValid)for(var e=1;e<this.count+1;e++){var r={class:null,icon:null},n=c.$getColumn(e),a=t.isPaymentDue(this.dueDates[e-1]),s=parseInt(this.repaymentData[n+"_pay"]);s?(r.class="paid",r.icon="fa-check"):a&&!s?(r.class="missed",r.icon="fa-times"):a||(r.class="pending",r.icon="fa-hourglass-start"),this._paymentStatusClasses.push(r)}}},{key:"calcAndSetPaymentSummary",value:function(){var t=function(t){return c.$formatCurrency(t)},e=this.order,r=e.repayment_amount,n=e.down_payment,a=e.product_price,s=6===this.count?.5:1,i=this.order.discount.percentage_discount,o=i>0?5===i?1:2:0,l=c.$roundDownAmt(r*s*o);this._discountAmount=t(l);var d=0,u=0;if(this.repaymentData){for(var m=0;m<this.count+1;m++){var h=parseInt(this.actualAmountsPaid[m]);u+=h?c.$roundDownAmt(h):0}d=c.$roundDownAmt(parseInt(n))+u+l}this._amountPaid=t(d);var v=c.$roundDownAmt(a-l);this._discountedTotal=t(v);var f=0;new Date(this.order.order_date)>new Date("2019-07-07")&&(f=500*[].length),this._defaultFee=t(f),this._totalPlusDefault=t(v+f),this._outstandingDebt=t(c.$roundDownAmt(parseInt(a)-d))}},{key:"setDiscount",value:function(){this._discount=this.order.discount.name+" "+this.order.discount.percentage_discount}},{key:"payments",set:function(t){this._payments=t},get:function(){return this._payments}},{key:"repaymentLevel",get:function(){return this._repaymentLevel}},{key:"order",get:function(){return this._order}},{key:"customer",get:function(){return this._customer}},{key:"isRepaymentValid",get:function(){return this._isRepaymentValid}},{key:"isOrderFormal",get:function(){return this._isOrderFormal}},{key:"repaymentData",get:function(){return this._repaymentData}},{key:"count",get:function(){return this._count}},{key:"interval",get:function(){return this._interval}},{key:"dueDates",get:function(){return this._dueDates}},{key:"paymentStatusClasses",get:function(){return this._paymentStatusClasses}},{key:"repaymentCaptions",get:function(){return this._repaymentCaptions}},{key:"paymentBanks",get:function(){return this._paymentBanks}},{key:"paymentMethods",get:function(){return this._paymentMethods}},{key:"actualPayDates",get:function(){return this._actualPayDates}},{key:"actualAmountsPaid",get:function(){return this._actualAmountsPaid}},{key:"amountsToBePaid",get:function(){return this._amountsToBePaid}},{key:"amountPaid",get:function(){return this._amountPaid}},{key:"discountAmount",get:function(){return this._discountAmount}},{key:"outstandingDebt",get:function(){return this._outstandingDebt}},{key:"discountedTotal",get:function(){return this._discountedTotal}},{key:"defaultFee",get:function(){return this._defaultFee}},{key:"totalPlusDefault",get:function(){return this._totalPlusDefault}},{key:"branch",get:function(){return this._branch}},{key:"discount",get:function(){return this._discount}},{key:"customerName",get:function(){return this.customer.first_name+" "+this.customer.last_name}},{key:"customerWGName",get:function(){var t=this.customer;return t.work_guarantor_first_name+" "+t.work_guarantor_last_name+" - "+t.work_guarantor_relationship}},{key:"customerPGName",get:function(){var t=this.customer;return t.personal_guarantor_first_name+" "+t.personal_guarantor_last_name+" - "+t.personal_guarantor_relationship}}],[{key:"generateDueDates",value:function(t,e,r){for(var n=[],a=0;a<r;a++){var s=new Date(t).addDays((a+1)*e),i=c.$getDate(s);n.push(i)}return n}},{key:"isPaymentDue",value:function(t){return new Date>new Date(t)}},{key:"isBankDraftAvailable",value:function(){return!1}},{key:"renderMessage",value:function(t){return t.sms?t.sms.message.replace(/%0a/g,"</br>"):t.feedback}},{key:"convertToName",value:function(t,e){return t?o.store.state[e].find(function(e){return e.id===t}).name:null}}]),t}(),m=function(t){function e(t,r){d(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,t.customer));return n._isReminderSent=!1,n._dvaId=r,n._isSelected=!1,n.setReminder(null),n.setIsReminderSent(),n.setFinancialStatus(),n.setPromiseCall(),n.generateAndSetNextSMSReminder(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u),a(e,[{key:"setIsReminderSent",value:function(){var t=this,e=c.$getDate();this.order.reminders.forEach(function(r){var n=r.date.split(" "),a=n[0].split("-"),s=n[1].split(":"),i=[].concat(l(a),l(s)).map(function(t){return parseInt(t,10)});c.$getDate(new Date(Date.UTC.apply(Date,l(i))),!1)===e&&(t._isReminderSent=!0)})}},{key:"setFinancialStatus",value:function(){this._financialStatus=this.isRepaymentValid?"Paid: "+this.amountPaid+" | Debt: "+this.outstandingDebt:"no detail!"}},{key:"generateAndSetNextSMSReminder",value:function(){var t=null;this.order.store_product&&(t=this.order.store_product.product_name);var e=this.order,r=e.repayment_amount,n=void 0;e.order_date===c.$getDate()?(n="Hello "+this.customerName+", thanks for patronizing us. The following is the breakdown of the repayment plan for the purchase of "+t+":%0a",this.dueDates.forEach(function(t,e){return n+=c.$getColumn(e+1)+": "+t+" => "+c.$formatCurrency(c.$roundDownAmt(r))+"%0a"})):n="Hello "+this.customerName+", This is to remind you that your "+c.$getColumn(parseInt(this.repaymentLevel)+1)+" repayment of "+c.$formatCurrency(c.$roundDownAmt(r))+" for "+t+" will be due on "+this.dueDates[this.repaymentLevel]+". we will be expecting you.",this._nextSMSReminder=n+"Please remember to pay on time to avoid late fees and other penalties.%0aThank you."}},{key:"setReminder",value:function(t){this._reminder={type:t,feedback:null,is_visited:null,dva_id:this.dvaId,order_id:this.order.id,customer_id:this.customer.id,canBeSelected:!this.isReminderSent,repayment_level:this.repaymentLevel+"/"+this.count},"sms"===t&&(this._reminder.sms_id=null,this._reminder.contacts=this.customer.telephone)}},{key:"setPromiseCall",value:function(){this._promiseCall={order_id:this.order.id,user_id:this.dvaId,customer_id:this.customer.id,date:null}}},{key:"isSelected",set:function(t){this._isSelected=t},get:function(){return this._isSelected}},{key:"isReminderSent",get:function(){return this._isReminderSent}},{key:"dvaId",get:function(){return this._dvaId}},{key:"financialStatus",get:function(){return this._financialStatus}},{key:"nextSMSReminder",get:function(){return this._nextSMSReminder}},{key:"reminder",get:function(){return this._reminder}},{key:"promiseCall",get:function(){return this._promiseCall}}]),e}();t.exports={Order:u,OrderWithPromiseCall:m}},rjj0:function(t,e,r){var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a=r("tTVk"),s={},i=n&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,d=!1,c=function(){},u=null,m="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(t){for(var e=0;e<t.length;e++){var r=t[e],n=s[r.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](r.parts[a]);for(;a<r.parts.length;a++)n.parts.push(_(r.parts[a]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var i=[];for(a=0;a<r.parts.length;a++)i.push(_(r.parts[a]));s[r.id]={id:r.id,refs:1,parts:i}}}}function f(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function _(t){var e,r,n=document.querySelector("style["+m+'~="'+t.id+'"]');if(n){if(d)return c;n.parentNode.removeChild(n)}if(h){var a=l++;n=o||(o=f()),e=g.bind(null,n,a,!1),r=g.bind(null,n,a,!0)}else n=f(),e=function(t,e){var r=e.css,n=e.media,a=e.sourceMap;n&&t.setAttribute("media",n);u.ssrId&&t.setAttribute(m,e.id);a&&(r+="\n/*# sourceURL="+a.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,n),r=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else r()}}t.exports=function(t,e,r,n){d=r,u=n||{};var i=a(t,e);return v(i),function(e){for(var r=[],n=0;n<i.length;n++){var o=i[n];(l=s[o.id]).refs--,r.push(l)}e?v(i=a(t,e)):i=[];for(n=0;n<r.length;n++){var l;if(0===(l=r[n]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete s[l.id]}}}};var p,y=(p=[],function(t,e){return p[t]=e,p.filter(Boolean).join("\n")});function g(t,e,r,n){var a=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=y(e,a);else{var s=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(s,i[e]):t.appendChild(s)}}},tTVk:function(t,e){t.exports=function(t,e){for(var r=[],n={},a=0;a<e.length;a++){var s=e[a],i=s[0],o={id:t+":"+a,css:s[1],media:s[2],sourceMap:s[3]};n[i]?n[i].parts.push(o):r.push(n[i]={id:i,parts:[o]})}return r}}});