webpackJsonp([7],{"+O4B":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-5 attendance-head"},[r("div",{staticClass:"mb-5 row align-items-center"},[r("div",{staticClass:"col-12 title-con"},[r("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),t.to?r("div",{staticClass:"row justify-content-end"},[r("router-link",{staticClass:"text-link mt-3",attrs:{to:t.to}},[t._v(t._s(t.buttonTitle))])],1):t._e()])])])},staticRenderFns:[]}},"8F8M":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=d(r("I3G/")),n=r("ic49"),a=d(r("K23+")),s=r("p/p5"),i=d(r("GqYo")),u=d(r("EJ7O")),c=d(r("KVer"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{Typeahead:i.default,CustomHeader:u.default},props:{},data:function(){return{form:{},user:{name:c.default.state.user_name,id:c.default.state.user_id},mode:null,error:{},index:null,show:!1,showModalContent:!1,store:"/api/inventory",number:0,products:[],suppliers:[],product:null,categories:null,brands:null,supplier:null,branches:null,quantity:"",method:"POST",statuses:[{name:"available",value:1},{name:"unavailable",value:0}],productForm:{products:[]},canAddProduct:!0}},beforeRouteEnter:function(t,e,r){(0,s.get)(function(t){return{create:"/api/inventory/create",edit:"/api/inventory/"+t.params.id+"/edit"}[t.meta.mode]}(t)).then(function(t){var e=t.data;return r(function(t){return t.prepareForm(e)})}).catch(function(){return r(function(){return a.default.setError("Error Preparing form")})})},methods:{getForm:function(){},prepareForm:function(t){this.branches=t.branches,o.default.set(this.$data,"mode",this.$route.meta.mode),o.default.set(this.$data,"brands",t.brands),o.default.set(this.$data,"categories",t.categories),o.default.set(this.$data,"branches",t.branches),o.default.set(this.$data,"suppliers",t.suppliers),o.default.set(this.$data,"products",t.products),"edit"===this.mode&&(this.store="/api/inventory/"+this.$route.params.id,this.method="PUT",this.productForm.products.push({product_name:this.getEntity(t.form.product_id,this.products).name,product_id:t.form.product_id,supplier_id:t.form.supplier_id,inventory_sku:t.form.inventory_sku,serial_number:t.form.serial_number,branch_id:t.form.branch_id,market_price:t.form.market_price,received_date:t.form.received_date,receiver_id:1})),this.show=!0,this.canAddProduct=!0},onSave:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.$network()?(t.$LIPS(!0),t.productForm.products.forEach(function(e){(t.mode="edit")&&delete e.product_name,e.branch_id=t.form.branch,(0,s.byMethod)(t.method,t.store,e).then(function(e){var r=e.data;(r.saved||r.updated)&&((0,n.log)(r.log,r.staff_id),a.default.setSuccess(r.message,5e3),t.$router.push("/log/inventory/"))}).catch(function(e){var r=e.response,o=r.data;422===r.status&&(t.error=o.errors?o.errors:o,t.$networkErr("unique"))}).finally(function(){t.$scrollToTop(),t.$LIPS(!1)})})):t.$networkErr():t.$networkErr("form")})},addProductForm:function(){var t=this;this.$validator.validateAll().then(function(e){if(e)for(var r=t.getEntity(t.form.product,t.products),o=t.getEntity(t.form.supplier,t.suppliers),n=0;n<t.quantity;n++)t.productForm.products.push({product_name:r.name,product_id:r.id,supplier_id:o.id,inventory_sku:"",serial_number:"",market_price:r.retail_price,received_date:t.$getDate(),receiver_id:t.user.id})})},deleteProduct:function(t){this.productForm.products.splice(t,1),this.reNumber()},reNumber:function(){var t=this;this.productForm.products.forEach(function(e,r){var o=r+1;t.productForm.products[r]._col=o,t.productForm.products[r].column=t.$getColumn(o)+" Products"})},getEntity:function(t,e){return e.find(function(e){return e.id===t})}},computed:{editForm:function(){}},watch:{productForm:{handler:function(){var t=this;this.productForm.products.forEach(function(e){var r=t.getEntity(e.product_id,t.products).category_id,o=t.getEntity(r,t.categories).name;e.inventory_sku=(o.slice(0,3)+"-"+e.product_name.slice(0,3)+"-"+e.serial_number.slice(e.serial_number.length-4)+"-0"+(t.productForm.products.indexOf(e)+1)).toUpperCase(),e.serial_number=e.serial_number.toUpperCase()})},deep:!0}}}},Cqom:function(t,e,r){var o=r("Llau");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("60143c9c",o,!0,{})},EJ7O:function(t,e,r){var o=r("VU/8")(r("oKx2"),r("+O4B"),!1,null,null,null);t.exports=o.exports},GBQg:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"",""])},GqYo:function(t,e,r){var o=r("VU/8")(r("MmHb"),r("iAiK"),!1,function(t){r("SBKC")},"data-v-1f6e6fa2",null);t.exports=o.exports},Llau:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".disabled{background-color:#fff}",""])},MmHb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("nv24");e.default={props:{options:{type:Array,default:function(){return[]}},caption:{type:[String,Number],default:null},value:{type:[String,Number],default:null},nameValue:{type:[String,Number],default:null}},data:function(){return{open:!1,selectIndex:0,displayText:"",search:""}},computed:{filteredOptions:function(){var t=this,e=new RegExp(this.search,"i");return this.options.filter(function(r){return e.test(r.id)||e.test(r[t.caption])})}},watch:{value:function(t){t&&this.select(this.options.find(function(e){return e.id===t}))}},methods:{onDownKey:function(){this.filteredOptions.length-1>this.selectIndex&&this.selectIndex++},onUpKey:function(){this.selectIndex>0&&this.selectIndex--},onEnterKey:function(){var t=this.filteredOptions[this.selectIndex];t&&this.select(t)},select:function(t){this.displayText=t[this.caption],this.$emit("input",t.id),this.$refs.search.blur()},toggle:function(t){t.target!==this.$refs.toggle&&t.target!==this.$refs.search&&t.target!==this.$refs[this.caption]||(this.open?t.target!==this.$refs.search&&t.target!==this.$refs[this.caption]&&this.$refs.search.blur():this.$refs.search.focus())},onFocus:function(){this.open=!0},onBlur:function(){this.search="",this.open=!1},onEscape:function(){this.$refs.search.blur()}},created:function(){var t=this;o.EventBus.$on("clearTypeAhead",function(){return t.displayText=null})}}},SBKC:function(t,e,r){var o=r("GBQg");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("7948959c",o,!0,{})},d8d8:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[r("div",{staticClass:"pt-md-3 pt-2 attendance-view",attrs:{id:"index"}},["create"===t.mode?r("div",[r("custom-header",{attrs:{to:"/log/inventory",title:"Generate Inventory","button-title":"view Inventory!"}})],1):t._e(),t._v(" "),"create"===t.mode?r("div",{staticClass:"attendance-body"},[r("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){t.preventDefault()}}},[r("div",{staticClass:"my-4 clearfix p-5 row bg-white shadow-sm card-radius"},[r("div",{staticClass:"form-group col-md-6 col-12 float-left px-0 px-md-3"},[r("label",[t._v("Product")]),t._v(" "),r("typeahead",{attrs:{options:t.products,caption:"name"},model:{value:t.form.product,callback:function(e){t.$set(t.form,"product",e)},expression:"form.product"}})],1),t._v(" "),r("div",{staticClass:"form-group col-md-4 col-6 float-left px-0 px-md-3"},[r("label",[t._v("Supplier ID")]),t._v(" "),r("typeahead",{attrs:{options:t.suppliers,caption:"name"},model:{value:t.form.supplier,callback:function(e){t.$set(t.form,"supplier",e)},expression:"form.supplier"}})],1),t._v(" "),r("div",{staticClass:"form-group col-md-4 col-6 float-left px-0 px-md-3"},[r("label",[t._v("Branch")]),t._v(" "),r("typeahead",{attrs:{options:t.branches,caption:"name"},model:{value:t.form.branch,callback:function(e){t.$set(t.form,"branch",e)},expression:"form.branch"}})],1),t._v(" "),r("div",{staticClass:"form-group col-md-2 col-4 float-left px-0 px-md-3"},[r("label",[t._v("Quantity")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"},{name:"validate",rawName:"v-validate",value:"required|max:50|numeric",expression:"'required|max:50|numeric'"}],staticClass:"form-control",attrs:{name:"quantity",placeholder:"retail price"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}}),t._v(" "),t.errors.first("price")?r("small",[t._v(t._s(t.errors.first("price")))]):t._e()])]),t._v(" "),r("div",{staticClass:"mb-5 px-0 row align-items-center"},[r("div",{staticClass:"clearfix d-flex justify-content-end w-100"},["edit"===t.mode?r("router-link",{staticClass:"mx-5 text-link mt-4 pt-2",attrs:{to:"/log/products"}},[t._v("Cancel")]):t._e(),t._v(" "),r("button",{staticClass:"btn bg-default",attrs:{disabled:t.$isProcessing||""==t.quantity,type:"submit"},on:{click:function(e){t.addProductForm()}}},[t._v("\n              Generate Inventory\n              "),r("i",{staticClass:"fas fa-cog ml-1"})])],1)])])]):t._e(),t._v(" "),t.productForm.products.length>0?r("div",{staticClass:"attendance-body"},[t.canAddProduct?r("h5",{staticClass:"mt-5 mb-0"},[t._v("Generate Inventory")]):t._e(),t._v(" "),t.canAddProduct?r("table",{staticClass:"table table-bordered"},[r("tbody",{staticClass:"text-center"},[r("tr",{staticClass:"table-separator"},[r("td",{staticClass:"text-left"},[t._v("S/No.")]),t._v(" "),r("th",[t._v("Product")]),t._v(" "),r("th",[t._v("Inventory SKU")]),t._v(" "),r("th",[t._v("Market Price")]),t._v(" "),r("th",[t._v("Serial/IMEI Number")]),t._v(" "),r("th",[t._v("Received Date")]),t._v(" "),r("th",[t._v("Received By")])]),t._v(" "),t._l(t.productForm.products,function(e,o){return r("tr",[r("th",[t._v(t._s(o+1))]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.products[o].product_name,expression:"productForm.products[index].product_name"}],staticClass:"form-control ",attrs:{name:"product_sku",type:"text",disabled:""},domProps:{value:t.productForm.products[o].product_name},on:{input:function(e){e.target.composing||t.$set(t.productForm.products[o],"product_name",e.target.value)}}})])]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.products[o].inventory_sku,expression:"productForm.products[index].inventory_sku"}],staticClass:"form-control ",attrs:{name:"inventory_sku",type:"text",disabled:""},domProps:{value:t.productForm.products[o].inventory_sku},on:{input:function(e){e.target.composing||t.$set(t.productForm.products[o],"inventory_sku",e.target.value)}}})])]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.products[o].market_price,expression:"productForm.products[index].market_price"}],staticClass:"form-control",attrs:{name:"market_price",type:"text",disabled:""},domProps:{value:t.productForm.products[o].market_price},on:{input:function(e){e.target.composing||t.$set(t.productForm.products[o],"market_price",e.target.value)}}})])]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.products[o].serial_number,expression:"productForm.products[index].serial_number"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"serial_no",type:"text"},domProps:{value:t.productForm.products[o].serial_number},on:{input:function(e){e.target.composing||t.$set(t.productForm.products[o],"serial_number",e.target.value)}}})])]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.products[o].received_date,expression:"productForm.products[index].received_date"}],staticClass:"form-control",attrs:{name:"received_date",type:"date"},domProps:{value:t.productForm.products[o].received_date},on:{input:function(e){e.target.composing||t.$set(t.productForm.products[o],"received_date",e.target.value)}}})])]),t._v(" "),r("th",[r("div",{staticClass:"form-group mb-0"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control ",attrs:{"data-vv-as":"date",name:"date",type:"text",disabled:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})])]),t._v(" "),r("th",[r("button",{staticClass:"ml-2 btn status status-sm my-sm-2 not-approved",on:{click:function(e){t.deleteProduct(o)}}},[r("i",{staticClass:"fas fa-times"})])])])})],2)]):t._e(),t._v(" "),r("div",[r("button",{staticClass:"btn bg-default float-right",attrs:{disabled:t.$isProcessing,type:"submit"},on:{click:function(e){t.onSave()}}},[t._v("\n            Save Inventory\n            "),r("i",{staticClass:"far fa-save ml-1"})])])]):t._e()])])},staticRenderFns:[]}},iAiK:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"position-relative",class:t.open?"typeahead typeahead__open":"typeahead"},[r("div",{ref:"toggle",staticClass:"typeahead__toggle",on:{mousedown:function(e){return e.preventDefault(),t.toggle(e)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"search",staticClass:"typeahead__search",attrs:{type:"text",value:"null"},domProps:{value:t.search},on:{blur:t.onBlur,focus:t.onFocus,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.onDownKey(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnterKey(e):null},function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,"Escape")?t.onEscape(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.onUpKey(e):null}],input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),r("span",{ref:"text",staticClass:"typeahead__text"},[t._v("\n        "+t._s(t.displayText)+"\n     ")])]),t._v(" "),t.open?r("ul",{staticClass:"typeahead__list"},t._l(t.filteredOptions,function(e,o){return r("li",{key:o,staticClass:"typeahead__item"},[r("a",{staticClass:"typeahead__link",class:[t.selectIndex===o?"typeahead__active":""],on:{mousedown:function(r){r.preventDefault(),t.select(e)}}},[t._v("\n                "+t._s(e[t.caption])+"\n            ")])])})):t._e()])},staticRenderFns:[]}},ic49:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=function(t,e){t=t.replace(/([A-Z])/g," $1").replace(/^./,function(t){return t.toUpperCase()}),(0,o.post)("/api/log",{action:t,description:e})};var o=r("p/p5")},nv24:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventBus=void 0;var o,n=r("I3G/"),a=(o=n)&&o.__esModule?o:{default:o};e.EventBus=new a.default},oKx2:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:"",buttonTitle:null,to:null}}},rjj0:function(t,e,r){var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n=r("tTVk"),a={},s=o&&(document.head||document.getElementsByTagName("head")[0]),i=null,u=0,c=!1,d=function(){},l=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t){for(var e=0;e<t.length;e++){var r=t[e],o=a[r.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](r.parts[n]);for(;n<r.parts.length;n++)o.parts.push(h(r.parts[n]));o.parts.length>r.parts.length&&(o.parts.length=r.parts.length)}else{var s=[];for(n=0;n<r.parts.length;n++)s.push(h(r.parts[n]));a[r.id]={id:r.id,refs:1,parts:s}}}}function v(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function h(t){var e,r,o=document.querySelector("style["+p+'~="'+t.id+'"]');if(o){if(c)return d;o.parentNode.removeChild(o)}if(m){var n=u++;o=i||(i=v()),e=g.bind(null,o,n,!1),r=g.bind(null,o,n,!0)}else o=v(),e=function(t,e){var r=e.css,o=e.media,n=e.sourceMap;o&&t.setAttribute("media",o);l.ssrId&&t.setAttribute(p,e.id);n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,o),r=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else r()}}t.exports=function(t,e,r,o){c=r,l=o||{};var s=n(t,e);return f(s),function(e){for(var r=[],o=0;o<s.length;o++){var i=s[o];(u=a[i.id]).refs--,r.push(u)}e?f(s=n(t,e)):s=[];for(o=0;o<r.length;o++){var u;if(0===(u=r[o]).refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete a[u.id]}}}};var _,y=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function g(t,e,r,o){var n=r?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var a=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}},tTVk:function(t,e){t.exports=function(t,e){for(var r=[],o={},n=0;n<e.length;n++){var a=e[n],s=a[0],i={id:t+":"+n,css:a[1],media:a[2],sourceMap:a[3]};o[s]?o[s].parts.push(i):r.push(o[s]={id:s,parts:[i]})}return r}},xvAP:function(t,e,r){var o=r("VU/8")(r("8F8M"),r("d8d8"),!1,function(t){r("Cqom")},null,null);t.exports=o.exports}});