webpackJsonp([8],{"+O4B":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5 attendance-head"},[a("div",{staticClass:"mb-5 row align-items-center"},[a("div",{staticClass:"col-12 title-con"},[a("span",{staticClass:"title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),t.to?a("div",{staticClass:"row justify-content-end"},[a("router-link",{staticClass:"text-link mt-3",attrs:{to:t.to}},[t._v(t._s(t.buttonTitle))])],1):t._e()])])])},staticRenderFns:[]}},EJ7O:function(t,e,a){var r=a("VU/8")(a("oKx2"),a("+O4B"),!1,null,null,null);t.exports=r.exports},GBQg:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},GqYo:function(t,e,a){var r=a("VU/8")(a("MmHb"),a("iAiK"),!1,function(t){a("SBKC")},"data-v-1f6e6fa2",null);t.exports=r.exports},MmHb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("nv24");e.default={props:{options:{type:Array,default:function(){return[]}},caption:{type:[String,Number],default:null},value:{type:[String,Number],default:null},nameValue:{type:[String,Number],default:null}},data:function(){return{open:!1,selectIndex:0,displayText:"",search:""}},computed:{filteredOptions:function(){var t=this,e=new RegExp(this.search,"i");return this.options.filter(function(a){return e.test(a.id)||e.test(a[t.caption])})}},watch:{value:function(t){t&&this.select(this.options.find(function(e){return e.id===t}))}},methods:{onDownKey:function(){this.filteredOptions.length-1>this.selectIndex&&this.selectIndex++},onUpKey:function(){this.selectIndex>0&&this.selectIndex--},onEnterKey:function(){var t=this.filteredOptions[this.selectIndex];t&&this.select(t)},select:function(t){this.displayText=t[this.caption],this.$emit("input",t.id),this.$refs.search.blur()},toggle:function(t){t.target!==this.$refs.toggle&&t.target!==this.$refs.search&&t.target!==this.$refs[this.caption]||(this.open?t.target!==this.$refs.search&&t.target!==this.$refs[this.caption]&&this.$refs.search.blur():this.$refs.search.focus())},onFocus:function(){this.open=!0},onBlur:function(){this.search="",this.open=!1},onEscape:function(){this.$refs.search.blur()}},created:function(){var t=this;r.EventBus.$on("clearTypeAhead",function(){return t.displayText=null})}}},OEBv:function(t,e,a){var r=a("VU/8")(a("c9j+"),a("tqlP"),!1,function(t){a("g3+1")},"data-v-353768c2",null);t.exports=r.exports},SBKC:function(t,e,a){var r=a("GBQg");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("7948959c",r,!0,{})},ZsOQ:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".modal table[data-v-353768c2]{width:100%;margin:auto}.modal th[data-v-353768c2]{font-size:1.4rem;color:#074a74;text-align:center;padding:4px 8px}.modal td[data-v-353768c2]{font-size:1.2rem;color:#074a74;padding:4px 8px;font-weight:500}.modal button[data-v-353768c2]{background-color:#0e5f92}.modal h6[data-v-353768c2]{color:#0e5f92;font-size:1.4rem}",""])},"c9j+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},n=a("NYxO"),s=d(a("I3G/")),o=(a("ic49"),d(a("K23+")),a("p/p5")),i=d(a("GqYo")),c=d(a("EJ7O")),l=d(a("KVer"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ProductSearch",components:{Typeahead:i.default,CustomHeader:c.default},data:function(){return{form:{},user:{name:l.default.state.user_name,id:l.default.state.user_id},mode:null,error:{},index:null,status:[{id:1,name:"available"},{id:0,name:"sold out"}],show:!1,search:"/api/products/search",number:0,suppliers:[],product:null,categories:null,brands:null,supplier:null,branches:null,quantity:"",showDiv:!1,searchInventory:[],modalTitle:"",method:"POST",statuses:[{name:"available",value:1},{name:"unavailable",value:0}],productForm:{products:[]},canAddProduct:!0,requestSent:!1}},created:function(){this.$prepareInventories(),this.$prepareBranches(),this.$prepareCategories(),this.$prepareBrands(),this.$prepareUsers()},methods:{prepareForm:function(){console.log(this.getCategories),this.show=!0,this.canAddProduct=!0},modal:function(t,e){var a=this.getMatchingProduct(e.product_id);s.default.set(this.$data,"searchInventory",a),s.default.set(this.$data,"modalTitle",e.product_name),$("#"+t).modal("toggle"),this.errors.clear(t)},addProductForm:function(){var t=this;(0,o.getMethod)("GET",this.search,this.form).then(function(e){var a=e.data;t.productForm.products=[],t.requestSent=!0,a.products.forEach(function(e){t.productForm.products.push({product_name:e.name,market_price:e.retail_price,product_id:e.id,quantity:t.getMatchingProduct(e.id).length}),t.reNumber()})})},deleteProduct:function(t){this.productForm.products.splice(t,1),this.reNumber()},reNumber:function(){var t=this;this.productForm.products.forEach(function(e,a){var r=a+1;t.productForm.products[a]._col=r,t.productForm.products[a].column=t.$getColumn(r)+" Products"})},getEntity:function(t,e){return e.find(function(e){return e.id===t})},getMatchingProduct:function(t){return this.getInventories.filter(function(e){return e.product_id===t})}},computed:r({},(0,n.mapGetters)(["getInventories","getBranches","getCategories","getBrands","getUsers"])),watch:{productForm:{}},filters:{numberZero:function(t){return 0===t?"Not Available":t}}}},"g3+1":function(t,e,a){var r=a("ZsOQ");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("0887bad2",r,!0,{})},iAiK:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-relative",class:t.open?"typeahead typeahead__open":"typeahead"},[a("div",{ref:"toggle",staticClass:"typeahead__toggle",on:{mousedown:function(e){return e.preventDefault(),t.toggle(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"search",staticClass:"typeahead__search",attrs:{type:"text",value:"null"},domProps:{value:t.search},on:{blur:t.onBlur,focus:t.onFocus,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.onDownKey(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onEnterKey(e):null},function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,"Escape")?t.onEscape(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.onUpKey(e):null}],input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("span",{ref:"text",staticClass:"typeahead__text"},[t._v("\n        "+t._s(t.displayText)+"\n     ")])]),t._v(" "),t.open?a("ul",{staticClass:"typeahead__list"},t._l(t.filteredOptions,function(e,r){return a("li",{key:r,staticClass:"typeahead__item"},[a("a",{staticClass:"typeahead__link",class:[t.selectIndex===r?"typeahead__active":""],on:{mousedown:function(a){a.preventDefault(),t.select(e)}}},[t._v("\n                "+t._s(e[t.caption])+"\n            ")])])})):t._e()])},staticRenderFns:[]}},ic49:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=function(t,e){t=t.replace(/([A-Z])/g," $1").replace(/^./,function(t){return t.toUpperCase()}),(0,r.post)("/api/log",{action:t,description:e})};var r=a("p/p5")},nv24:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventBus=void 0;var r,n=a("I3G/"),s=(r=n)&&r.__esModule?r:{default:r};e.EventBus=new s.default},oKx2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:"",buttonTitle:null,to:null}}},rjj0:function(t,e,a){var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n=a("tTVk"),s={},o=r&&(document.head||document.getElementsByTagName("head")[0]),i=null,c=0,l=!1,d=function(){},u=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(t){for(var e=0;e<t.length;e++){var a=t[e],r=s[a.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](a.parts[n]);for(;n<a.parts.length;n++)r.parts.push(m(a.parts[n]));r.parts.length>a.parts.length&&(r.parts.length=a.parts.length)}else{var o=[];for(n=0;n<a.parts.length;n++)o.push(m(a.parts[n]));s[a.id]={id:a.id,refs:1,parts:o}}}}function h(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function m(t){var e,a,r=document.querySelector("style["+p+'~="'+t.id+'"]');if(r){if(l)return d;r.parentNode.removeChild(r)}if(f){var n=c++;r=i||(i=h()),e=y.bind(null,r,n,!1),a=y.bind(null,r,n,!0)}else r=h(),e=function(t,e){var a=e.css,r=e.media,n=e.sourceMap;r&&t.setAttribute("media",r);u.ssrId&&t.setAttribute(p,e.id);n&&(a+="\n/*# sourceURL="+n.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");if(t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}.bind(null,r),a=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else a()}}t.exports=function(t,e,a,r){l=a,u=r||{};var o=n(t,e);return v(o),function(e){for(var a=[],r=0;r<o.length;r++){var i=o[r];(c=s[i.id]).refs--,a.push(c)}e?v(o=n(t,e)):o=[];for(r=0;r<a.length;r++){var c;if(0===(c=a[r]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete s[c.id]}}}};var _,g=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function y(t,e,a,r){var n=a?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,n);else{var s=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}},tTVk:function(t,e){t.exports=function(t,e){for(var a=[],r={},n=0;n<e.length;n++){var s=e[n],o=s[0],i={id:t+":"+n,css:s[1],media:s[2],sourceMap:s[3]};r[o]?r[o].parts.push(i):a.push(r[o]={id:o,parts:[i]})}return a}},tqlP:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"pt-md-3 pt-2 attendance-view",attrs:{id:"index"}},[a("div",[a("custom-header",{attrs:{to:"/log/inventory/search",title:"Search Products","button-title":"view Inventory!"}})],1),t._v(" "),a("div",{staticClass:"attendance-body"},[a("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"my-4 clearfix p-5 row bg-white shadow-sm card-radius"},[a("div",{staticClass:"form-group col-md-6 col-12 float-left px-0 px-md-3"},[a("label",[t._v("Category")]),t._v(" "),a("typeahead",{attrs:{options:t.getCategories,caption:"name"},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1),t._v(" "),a("div",{staticClass:"form-group col-md-4 col-6 float-left px-0 px-md-3"},[a("label",[t._v("Show-Room")]),t._v(" "),a("typeahead",{attrs:{options:t.getBranches,caption:"name"},model:{value:t.form.branch,callback:function(e){t.$set(t.form,"branch",e)},expression:"form.branch"}})],1),t._v(" "),a("div",{staticClass:"form-group col-md-4 col-6 float-left px-0 px-md-3"},[a("label",[t._v("Brand")]),t._v(" "),a("typeahead",{attrs:{options:t.getBrands,caption:"name"},model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand",e)},expression:"form.brand"}})],1),t._v(" "),a("div",{staticClass:"form-group col-md-4 col-6 float-left px-0 px-md-3"},[a("label",[t._v("Status")]),t._v(" "),a("typeahead",{attrs:{options:t.status,caption:"name"},model:{value:t.form.availability,callback:function(e){t.$set(t.form,"availability",e)},expression:"form.availability"}})],1)]),t._v(" "),a("div",{staticClass:"mb-5 px-0 row align-items-center"},[a("div",{staticClass:"clearfix d-flex justify-content-end w-100"},["edit"===t.mode?a("router-link",{staticClass:"mx-5 text-link mt-4 pt-2",attrs:{to:"/log/products"}},[t._v("Cancel")]):t._e(),t._v(" "),a("button",{staticClass:"btn bg-default",attrs:{disabled:Object.keys(t.form).length<2,type:"submit"},on:{click:function(e){t.addProductForm()}}},[t._v("\n                                Search Product\n                                "),a("i",{staticClass:"far fa-paper-plane ml-1"})])],1)])])]),t._v(" "),t.productForm.products.length>0?a("div",{staticClass:"attendance-body"},[t.canAddProduct?a("h5",{staticClass:"mt-5 mb-0"},[t._v("Search results")]):t._e(),t._v(" "),t.canAddProduct?a("table",{staticClass:"table table-bordered"},[a("tbody",{staticClass:"text-center"},[a("tr",{staticClass:"table-separator"},[a("th",{staticClass:"text-center"},[t._v("S/No.")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Product")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Market Price")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Quantity")])]),t._v(" "),t._l(t.productForm.products,function(e,r){return a("tr",[a("td",[t._v(t._s(r+1))]),t._v(" "),a("td",[a("div",{staticClass:"form-group mb-0"},[a("p",[t._v(t._s(e.product_name))])])]),t._v(" "),a("td",[a("div",{staticClass:"form-group mb-0"},[a("p",[t._v(t._s(t._f("currency")(e.market_price,"₦",0)))])])]),t._v(" "),a("td",[a("div",{staticClass:"form-group mb-0"},[a("p",[t._v(t._s(t._f("numberZero")(e.quantity)))])])]),t._v(" "),a("td",[e.quantity>0?a("button",{staticClass:"ml-2 btn status status-sm my-sm-2 bg-default",on:{click:function(a){t.modal("modal",e)}}},[t._v("\n                                View\n                            ")]):t._e()])])})],2)]):t._e()]):t._e(),t._v(" "),0===t.productForm.products.length&&t.requestSent?a("div",{staticClass:"attendance-body"},[a("p",{staticClass:"text-center text-info"},[t._v("There are no products matching the criteria")])]):t._e(),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal"}},[a("div",{staticClass:"modal-dialog "},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header py-2"},[a("h6",{staticClass:"modal-title py-1"},[t._v(t._s(t.modalTitle))]),t._v(" "),a("a",{staticClass:"close py-1",attrs:{"aria-label":"Close","data-dismiss":"modal",href:"javascript:"}},[a("span",{staticClass:"modal-close text-danger",attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"fas fa-times"})])])]),t._v(" "),a("div",[a("table",{staticClass:"table-responsive table-bordered"},[a("thead",[a("tr",[a("th",[t._v("S/N")]),t._v(" "),a("th",[t._v("Inventory SKU")]),t._v(" "),a("th",[t._v("Market Price")]),t._v(" "),a("th",[t._v("Serial/IMEI Number")]),t._v(" "),a("th",[t._v("Received By")]),t._v(" "),a("th",[t._v("Received Date")]),t._v(" "),a("th",[t._v("Sold Date")]),t._v(" "),a("th",[t._v("Branch")])])]),t._v(" "),a("tbody",t._l(t.searchInventory,function(e,r){return a("tr",[a("td",[t._v(t._s(r+1))]),t._v(" "),a("td",[t._v(t._s(e.inventory_sku))]),t._v(" "),a("td",[t._v(t._s(e.market_price))]),t._v(" "),a("td",[t._v(t._s(e.serial_number))]),t._v(" "),a("td",[t._v(t._s(t.getEntity(e.receiver_id,t.getUsers).full_name))]),t._v(" "),a("td",[t._v(t._s(e.received_date))]),t._v(" "),a("td",[t._v(t._s(e.sold_date))]),t._v(" "),a("td",[t._v(t._s(t.getEntity(e.branch_id,t.getBranches).name))])])}))])])])])])])])},staticRenderFns:[]}}});